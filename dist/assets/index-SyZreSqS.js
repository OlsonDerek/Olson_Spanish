var Ht=Object.defineProperty,Bt=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var zt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable;var Pe=(e,t,n)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))zt.call(t,n)&&Pe(e,n,t[n]);if(xe)for(var n of xe(t))qt.call(t,n)&&Pe(e,n,t[n]);return e},z=(e,t)=>Bt(e,Vt(t));var Z=(e,t,n)=>new Promise((r,i)=>{var o=u=>{try{c(n.next(u))}catch(d){i(d)}},l=u=>{try{c(n.throw(u))}catch(d){i(d)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,l);c((n=n.apply(e,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var pe,N,Xe,Y,Te,et,tt,nt,ke,ge,ye,se={},st=[],Jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,oe=Array.isArray;function J(e,t){for(var n in t)e[n]=t[n];return e}function $e(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function be(e,t,n){var r,i,o,l={};for(o in t)o=="key"?r=t[o]:o=="ref"?i=t[o]:l[o]=t[o];if(arguments.length>2&&(l.children=arguments.length>3?pe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)l[o]===void 0&&(l[o]=e.defaultProps[o]);return de(e,l,r,i,null)}function de(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i==null?++Xe:i,__i:-1,__u:0};return i==null&&N.vnode!=null&&N.vnode(o),o}function ee(e){return e.children}function K(e,t){this.props=e,this.context=t}function te(e,t){if(t==null)return e.__?te(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?te(e):null}function rt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return rt(e)}}function De(e){(!e.__d&&(e.__d=!0)&&Y.push(e)&&!he.__r++||Te!=N.debounceRendering)&&((Te=N.debounceRendering)||et)(he)}function he(){for(var e,t,n,r,i,o,l,c=1;Y.length;)Y.length>c&&Y.sort(tt),e=Y.shift(),c=Y.length,e.__d&&(n=void 0,i=(r=(t=e).__v).__e,o=[],l=[],t.__P&&((n=J({},r)).__v=r.__v+1,N.vnode&&N.vnode(n),Ce(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,o,i==null?te(r):i,!!(32&r.__u),l),n.__v=r.__v,n.__.__k[n.__i]=n,at(o,n,l),n.__e!=i&&rt(n)));he.__r=0}function it(e,t,n,r,i,o,l,c,u,d,v){var a,h,_,f,g,m,y=r&&r.__k||st,p=t.length;for(u=Kt(n,t,y,u,p),a=0;a<p;a++)(_=n.__k[a])!=null&&(h=_.__i==-1?se:y[_.__i]||se,_.__i=a,m=Ce(e,_,h,i,o,l,c,u,d,v),f=_.__e,_.ref&&h.ref!=_.ref&&(h.ref&&Re(h.ref,null,_),v.push(_.ref,_.__c||f,_)),g==null&&f!=null&&(g=f),4&_.__u||h.__k===_.__k?u=ot(_,u,e):typeof _.type=="function"&&m!==void 0?u=m:f&&(u=f.nextSibling),_.__u&=-7);return n.__e=g,u}function Kt(e,t,n,r,i){var o,l,c,u,d,v=n.length,a=v,h=0;for(e.__k=new Array(i),o=0;o<i;o++)(l=t[o])!=null&&typeof l!="boolean"&&typeof l!="function"?(u=o+h,(l=e.__k[o]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?de(null,l,null,null,null):oe(l)?de(ee,{children:l},null,null,null):l.constructor==null&&l.__b>0?de(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=e,l.__b=e.__b+1,c=null,(d=l.__i=Gt(l,n,u,a))!=-1&&(a--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>v?h--:i<v&&h++),typeof l.type!="function"&&(l.__u|=4)):d!=u&&(d==u-1?h--:d==u+1?h++:(d>u?h--:h++,l.__u|=4))):e.__k[o]=null;if(a)for(o=0;o<v;o++)(c=n[o])!=null&&!(2&c.__u)&&(c.__e==r&&(r=te(c)),ct(c,c));return r}function ot(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=ot(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=te(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _e(e,t){return t=t||[],e==null||typeof e=="boolean"||(oe(e)?e.some(function(n){_e(n,t)}):t.push(e)),t}function Gt(e,t,n,r){var i,o,l,c=e.key,u=e.type,d=t[n],v=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||v&&c==d.key&&u==d.type)return n;if(r>(v?1:0)){for(i=n-1,o=n+1;i>=0||o<t.length;)if((d=t[l=i>=0?i--:o++])!=null&&!(2&d.__u)&&c==d.key&&u==d.type)return l}return-1}function Ie(e,t,n){t[0]=="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||Jt.test(t)?n:n+"px"}function ae(e,t,n,r,i){var o,l;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ie(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||Ie(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(nt,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=ke,e.addEventListener(t,o?ye:ge,o)):e.removeEventListener(t,o?ye:ge,o);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n==null?"":n;break e}catch(c){}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function We(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ke++;else if(t.t<n.u)return;return n(N.event?N.event(t):t)}}}function Ce(e,t,n,r,i,o,l,c,u,d){var v,a,h,_,f,g,m,y,p,R,C,U,H,w,k,I,M,$=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),o=[c=t.__e=n.__e]),(v=N.__b)&&v(t);e:if(typeof $=="function")try{if(y=t.props,p="prototype"in $&&$.prototype.render,R=(v=$.contextType)&&r[v.__c],C=v?R?R.props.value:v.__:r,n.__c?m=(a=t.__c=n.__c).__=a.__E:(p?t.__c=a=new $(y,C):(t.__c=a=new K(y,C),a.constructor=$,a.render=Qt),R&&R.sub(a),a.props=y,a.state||(a.state={}),a.context=C,a.__n=r,h=a.__d=!0,a.__h=[],a._sb=[]),p&&a.__s==null&&(a.__s=a.state),p&&$.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=J({},a.__s)),J(a.__s,$.getDerivedStateFromProps(y,a.__s))),_=a.props,f=a.state,a.__v=t,h)p&&$.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),p&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(p&&$.getDerivedStateFromProps==null&&y!==_&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(y,C),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(y,a.__s,C)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(a.props=y,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(W){W&&(W.__=t)}),U=0;U<a._sb.length;U++)a.__h.push(a._sb[U]);a._sb=[],a.__h.length&&l.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(y,a.__s,C),p&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(_,f,g)})}if(a.context=C,a.props=y,a.__P=e,a.__e=!1,H=N.__r,w=0,p){for(a.state=a.__s,a.__d=!1,H&&H(t),v=a.render(a.props,a.state,a.context),k=0;k<a._sb.length;k++)a.__h.push(a._sb[k]);a._sb=[]}else do a.__d=!1,H&&H(t),v=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++w<25);a.state=a.__s,a.getChildContext!=null&&(r=J(J({},r),a.getChildContext())),p&&!h&&a.getSnapshotBeforeUpdate!=null&&(g=a.getSnapshotBeforeUpdate(_,f)),I=v,v!=null&&v.type===ee&&v.key==null&&(I=lt(v.props.children)),c=it(e,oe(I)?I:[I],t,n,r,i,o,l,c,u,d),a.base=t.__e,t.__u&=-161,a.__h.length&&l.push(a),m&&(a.__E=a.__=null)}catch(W){if(t.__v=null,u||o!=null)if(W.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,t.__e=c}else{for(M=o.length;M--;)$e(o[M]);we(t)}else t.__e=n.__e,t.__k=n.__k,W.then||we(t);N.__e(W,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Yt(n.__e,t,n,r,i,o,l,u,d);return(v=N.diffed)&&v(t),128&t.__u?void 0:c}function we(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(we)}function at(e,t,n){for(var r=0;r<n.length;r++)Re(n[r],n[++r],n[++r]);N.__c&&N.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){N.__e(o,i.__v)}})}function lt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:oe(e)?e.map(lt):J({},e)}function Yt(e,t,n,r,i,o,l,c,u){var d,v,a,h,_,f,g,m=n.props,y=t.props,p=t.type;if(p=="svg"?i="http://www.w3.org/2000/svg":p=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(d=0;d<o.length;d++)if((_=o[d])&&"setAttribute"in _==!!p&&(p?_.localName==p:_.nodeType==3)){e=_,o[d]=null;break}}if(e==null){if(p==null)return document.createTextNode(y);e=document.createElementNS(i,p,y.is&&y),c&&(N.__m&&N.__m(t,o),c=!1),o=null}if(p==null)m===y||c&&e.data==y||(e.data=y);else{if(o=o&&pe.call(e.childNodes),m=n.props||se,!c&&o!=null)for(m={},d=0;d<e.attributes.length;d++)m[(_=e.attributes[d]).name]=_.value;for(d in m)if(_=m[d],d!="children"){if(d=="dangerouslySetInnerHTML")a=_;else if(!(d in y)){if(d=="value"&&"defaultValue"in y||d=="checked"&&"defaultChecked"in y)continue;ae(e,d,null,_,i)}}for(d in y)_=y[d],d=="children"?h=_:d=="dangerouslySetInnerHTML"?v=_:d=="value"?f=_:d=="checked"?g=_:c&&typeof _!="function"||m[d]===_||ae(e,d,_,m[d],i);if(v)c||a&&(v.__html==a.__html||v.__html==e.innerHTML)||(e.innerHTML=v.__html),t.__k=[];else if(a&&(e.innerHTML=""),it(t.type=="template"?e.content:e,oe(h)?h:[h],t,n,r,p=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,l,o?o[0]:n.__k&&te(n,0),c,u),o!=null)for(d=o.length;d--;)$e(o[d]);c||(d="value",p=="progress"&&f==null?e.removeAttribute("value"):f!=null&&(f!==e[d]||p=="progress"&&!f||p=="option"&&f!=m[d])&&ae(e,d,f,m[d],i),d="checked",g!=null&&g!=e[d]&&ae(e,d,g,m[d],i))}return e}function Re(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){N.__e(i,n)}}function ct(e,t,n){var r,i;if(N.unmount&&N.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Re(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){N.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&ct(r[i],t,n||typeof e.type!="function");n||$e(e.__e),e.__c=e.__=e.__e=void 0}function Qt(e,t,n){return this.constructor(e,n)}function Zt(e,t,n){var r,i,o,l;t==document&&(t=document.documentElement),N.__&&N.__(e,t),i=(r=!1)?null:t.__k,o=[],l=[],Ce(t,e=t.__k=be(ee,null,[e]),i||se,se,t.namespaceURI,i?null:t.firstChild?pe.call(t.childNodes):null,o,i?i.__e:t.firstChild,r,l),at(o,e,l)}pe=st.slice,N={__e:function(e,t,n,r){for(var i,o,l;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),l=i.__d),l)return i.__E=i}catch(c){e=c}throw e}},Xe=0,K.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=J({},this.state),typeof e=="function"&&(e=e(J({},n),this.props)),e&&J(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),De(this))},K.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),De(this))},K.prototype.render=ee,Y=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(e,t){return e.__v.__b-t.__v.__b},he.__r=0,nt=/(PointerCapture)$|Capture$/i,ke=0,ge=We(!1),ye=We(!0);var Xt=0;function s(e,t,n,r,i,o){t||(t={});var l,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?l=t[c]:u[c]=t[c];var d={type:e,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Xt,__i:-1,__u:0,__source:i,__self:o};if(typeof e=="function"&&(l=e.defaultProps))for(c in l)u[c]===void 0&&(u[c]=l[c]);return N.vnode&&N.vnode(d),d}var re,P,fe,Ae,ie=0,dt=[],D=N,Me=D.__b,Ue=D.__r,Oe=D.diffed,je=D.__c,Le=D.unmount,Fe=D.__;function Ee(e,t){D.__h&&D.__h(P,e,ie||t),ie=0;var n=P.__H||(P.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function T(e){return ie=1,en(ht,e)}function en(e,t,n){var r=Ee(re++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):ht(void 0,t),function(c){var u=r.__N?r.__N[0]:r.__[0],d=r.t(u,c);u!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=P,!P.__f)){var i=function(c,u,d){if(!r.__c.__H)return!0;var v=r.__c.__H.__.filter(function(h){return!!h.__c});if(v.every(function(h){return!h.__N}))return!o||o.call(this,c,u,d);var a=r.__c.props!==c;return v.forEach(function(h){if(h.__N){var _=h.__[0];h.__=h.__N,h.__N=void 0,_!==h.__[0]&&(a=!0)}}),o&&o.call(this,c,u,d)||a};P.__f=!0;var o=P.shouldComponentUpdate,l=P.componentWillUpdate;P.componentWillUpdate=function(c,u,d){if(this.__e){var v=o;o=void 0,i(c,u,d),o=v}l&&l.call(this,c,u,d)},P.shouldComponentUpdate=i}return r.__N||r.__}function G(e,t){var n=Ee(re++,3);!D.__s&&ut(n.__H,t)&&(n.__=e,n.u=t,P.__H.__h.push(n))}function tn(e){return ie=5,Q(function(){return{current:e}},[])}function Q(e,t){var n=Ee(re++,7);return ut(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function F(e,t){return ie=8,Q(function(){return e},t)}function nn(){for(var e;e=dt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ue),e.__H.__h.forEach(Ne),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){P=null,Me&&Me(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Fe&&Fe(e,t)},D.__r=function(e){Ue&&Ue(e),re=0;var t=(P=e.__c).__H;t&&(fe===P?(t.__h=[],P.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(ue),t.__h.forEach(Ne),t.__h=[],re=0)),fe=P},D.diffed=function(e){Oe&&Oe(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(dt.push(t)!==1&&Ae===D.requestAnimationFrame||((Ae=D.requestAnimationFrame)||sn)(nn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),fe=P=null},D.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ue),n.__h=n.__h.filter(function(r){return!r.__||Ne(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],D.__e(r,n.__v)}}),je&&je(e,t)},D.unmount=function(e){Le&&Le(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ue(r)}catch(i){t=i}}),n.__H=void 0,t&&D.__e(t,n.__v))};var He=typeof requestAnimationFrame=="function";function sn(e){var t,n=function(){clearTimeout(r),He&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);He&&(t=requestAnimationFrame(n))}function ue(e){var t=P,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),P=t}function Ne(e){var t=P;e.__c=e.__(),P=t}function ut(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ht(e,t){return typeof t=="function"?t(e):t}function rn(e,t){for(var n in t)e[n]=t[n];return e}function Be(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Ve(e,t){this.props=e,this.context=t}(Ve.prototype=new K).isPureReactComponent=!0,Ve.prototype.shouldComponentUpdate=function(e,t){return Be(this.props,e)||Be(this.state,t)};var ze=N.__b;N.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ze&&ze(e)};var on=N.__e;N.__e=function(e,t,n,r){if(e.then){for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}on(e,t,n,r)};var qe=N.unmount;function _t(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=rn({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return _t(r,t,n)})),e}function pt(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return pt(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function me(){this.__u=0,this.o=null,this.__b=null}function vt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function le(){this.i=null,this.l=null}N.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qe&&qe(e)},(me.prototype=new K).__c=function(e,t){var n=t.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var i=vt(r.__v),o=!1,l=function(){o||(o=!0,n.__R=null,i?i(c):c())};n.__R=l;var c=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=pt(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.o.pop();)d.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(l,l)},me.prototype.componentWillUnmount=function(){this.o=[]},me.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=_t(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&be(ee,null,e.fallback);return i&&(i.__u&=-33),[be(ee,null,t.__a?null:e.children),i]};var Je=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(le.prototype=new K).__a=function(e){var t=this,n=vt(t.__v),r=t.l.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),Je(t,e,r)):i()};n?n(o):o()}},le.prototype.render=function(e){this.i=null,this.l=new Map;var t=_e(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},le.prototype.componentDidUpdate=le.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Je(e,n,t)})};var an=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,ln=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,cn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,dn=/[A-Z0-9]/g,un=typeof document!="undefined",hn=function(e){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};K.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(K.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ke=N.event;function _n(){}function pn(){return this.cancelBubble}function vn(){return this.defaultPrevented}N.event=function(e){return Ke&&(e=Ke(e)),e.persist=_n,e.isPropagationStopped=pn,e.isDefaultPrevented=vn,e.nativeEvent=e};var fn={enumerable:!1,configurable:!0,get:function(){return this.class}},Ge=N.vnode;N.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,i={},o=r.indexOf("-")===-1;for(var l in n){var c=n[l];if(!(l==="value"&&"defaultValue"in n&&c==null||un&&l==="children"&&r==="noscript"||l==="class"||l==="className")){var u=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&c===!0?c="":u==="translate"&&c==="no"?c=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?l="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||hn(n.type)?u==="onfocus"?l="onfocusin":u==="onblur"?l="onfocusout":cn.test(l)&&(l=u):u=l="oninput":o&&ln.test(l)?l=l.replace(dn,"-$&").toLowerCase():c===null&&(c=void 0),u==="oninput"&&i[l=u]&&(l="oninputCapture"),i[l]=c}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=_e(n.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=_e(n.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",fn)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i}(e),e.$$typeof=an,Ge&&Ge(e)};var Ye=N.__r;N.__r=function(e){Ye&&Ye(e),e.__c};var Qe=N.diffed;N.diffed=function(e){Qe&&Qe(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};var Ze={},mn="@vercel/analytics",gn="1.5.0",yn=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function ft(){return typeof window!="undefined"}function mt(){try{const e="production"}catch(e){}return"production"}function bn(e="auto"){if(e==="auto"){window.vam=mt();return}window.vam=e}function wn(){return(ft()?window.vam:mt())||"production"}function Se(){return wn()==="development"}function Nn(e){return e.scriptSrc?e.scriptSrc:Se()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Sn(e={debug:!0}){var t;if(!ft())return;bn(e.mode),yn(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=Nn(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn=mn+(e.framework?`/${e.framework}`:""),r.dataset.sdkv=gn,e.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{const i=Se()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${i}`)},Se()&&e.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function kn({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function $n(){if(!(typeof process=="undefined"||typeof Ze=="undefined"))return Ze.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Cn(e){return G(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),G(()=>{var t;Sn(B(B({framework:e.framework||"react",basePath:(t=e.basePath)!=null?t:$n()},e.route!==void 0&&{disableAutoTrack:!0}),e))},[]),G(()=>{e.route&&e.path&&kn({route:e.route,path:e.path})},[e.route,e.path]),null}function Rn({title:e,viewMode:t,currentWeek:n,currentUnit:r,currentCourse:i,onSideNavToggle:o,onCalendarToggle:l}){const c=()=>{switch(t){case"course":return i==null?void 0:i.title;case"unit":return r==null?void 0:r.title;case"week":default:return n==null?void 0:n.title}},u=()=>{switch(t){case"course":return"Course View";case"unit":return"Unit View";case"week":default:return""}};return s("header",{className:"header",children:s("div",{className:"header-content",children:[s("button",{className:"nav-toggle",onClick:o,"aria-label":"Toggle navigation",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[s("path",{d:"M3 12h18m-9 5V7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3 6h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),s("div",{className:"title-section",children:[s("h1",{className:"app-title",children:e}),c()&&s("h2",{className:"subtitle",children:c()}),u()&&s("span",{className:"view-mode-label",children:u()})]}),s("button",{className:"calendar-toggle",onClick:l,"aria-label":"Toggle calendar view",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})})]})})}function X({state:e,onClick:t,size:n="medium",disabled:r=!1}){const i=()=>{switch(e){case"selected":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12",stroke:"currentColor",strokeWidth:"2",fill:"none"})});case"partial":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"currentColor",strokeWidth:"2"})});case"none":default:return null}},o=()=>{switch(e){case"selected":return"Fully selected";case"partial":return"Partially selected";case"none":default:return"Not selected"}};return s("button",{className:`selection-bubble ${e} ${n} ${r?"disabled":""}`,onClick:r?void 0:t,disabled:r,"aria-label":o(),title:o(),children:i()})}function En({isOpen:e,config:t,currentWeekId:n,currentUnitId:r,currentCourseId:i,selectionStates:o,onWeekSelect:l,onUnitSelect:c,onCourseSelect:u,onWeekToggle:d,onUnitToggle:v,onCourseToggle:a,onClose:h}){const[_,f]=T(new Set([i])),[g,m]=T(new Set([r]));if(!t||!t.courses||t.courses.length===0)return null;const y=w=>{try{const k=`session.vocabReviewed.${w}`,I=`session.phraseReviewed.${w}`,M=JSON.parse(localStorage.getItem(k)||"[]"),$=JSON.parse(localStorage.getItem(I)||"[]");return{vocabReviewed:M,phraseReviewed:$}}catch(k){return{vocabReviewed:[],phraseReviewed:[]}}},p=w=>{if(!w.vocab||!w.phrases)return!1;const k=y(w.id),I=w.vocab.map(O=>O.id),M=w.phrases.map(O=>O.id),$=I.every(O=>k.vocabReviewed.includes(O)),W=M.every(O=>k.phraseReviewed.includes(O));return $&&W&&I.length>0&&M.length>0},R=w=>!w.weeks||w.weeks.length===0?!1:w.weeks.every(k=>p(k)),C=w=>!w.units||w.units.length===0?!1:w.units.every(k=>R(k)),U=w=>{const k=new Set(_);k.has(w)?k.delete(w):k.add(w),f(k)},H=w=>{const k=new Set(g);k.has(w)?k.delete(w):k.add(w),m(k)};return s("nav",{className:`side-nav ${e?"open":""}`,children:[s("div",{className:"side-nav-header",children:[s("h3",{children:"Navigation"}),s("button",{className:"close-button",onClick:h,"aria-label":"Close navigation",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"nav-list",children:t.courses.map(w=>{var I,M;const k=_.has(w.id);return s("div",{className:"nav-section",children:[s("button",{className:`nav-item course-item ${k?"current":""} has-children`,onClick:()=>U(w.id),"aria-expanded":k,children:[s("div",{className:"nav-item-content",children:[s("h4",{className:"nav-item-title",children:w.title}),s("p",{className:"nav-item-meta",children:["Course • ",((I=w.units)==null?void 0:I.length)||0," units"]})]}),s("div",{className:"nav-item-actions",children:[s(X,{state:((M=o.courses)==null?void 0:M[w.id])||"none",onClick:$=>{$.stopPropagation(),a(w.id)},size:"medium"}),C(w)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),k&&w.units&&s("div",{className:"nav-children",children:w.units.map($=>{var O,b;const W=g.has($.id);return s("div",{className:"nav-subsection",children:[s("button",{className:`nav-item unit-item ${W?"current":""} has-children`,onClick:()=>H($.id),"aria-expanded":W,children:[s("div",{className:"nav-item-content",children:[s("h5",{className:"nav-item-title",children:$.title}),s("p",{className:"nav-item-meta",children:["Unit • ",((O=$.weeks)==null?void 0:O.length)||0," weeks"]})]}),s("div",{className:"nav-item-actions",children:[s(X,{state:((b=o.units)==null?void 0:b[$.id])||"none",onClick:S=>{S.stopPropagation(),v($.id)},size:"medium"}),R($)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),W&&$.weeks&&s("div",{className:"nav-children",children:$.weeks.map(S=>{var L;return s("button",{className:`nav-item week-item ${n===S.id?"current":""}`,onClick:()=>d(S.id),children:[s("div",{className:"nav-item-content",children:[s("h6",{className:"nav-item-title",children:S.title}),s("p",{className:"nav-item-meta",children:xn(S)})]}),s("div",{className:"nav-item-actions",children:[s(X,{state:(L=o.weeks)!=null&&L[S.id]?"selected":"none",onClick:E=>{E.stopPropagation(),d(S.id)},size:"small"}),p(S)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},S.id)})})]},$.id)})})]},w.id)})})]})}function xn(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),r=t.getMonth()===n.getMonth(),i=new Intl.DateTimeFormat("en-US",{month:"short"}),o=i.format(t),l=i.format(n),c=t.getFullYear();return r?`${o} ${t.getDate()}–${n.getDate()}, ${c}`:`${o} ${t.getDate()} – ${l} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}function Pn(e){const[t,n]=T(!1),[r,i]=T(null),o=tn(null),l=F(()=>{o.current&&(o.current.pause(),o.current=null),n(!1)},[]),c=F((a,h="es-ES")=>Z(this,null,function*(){return new Promise((_,f)=>{if(!window.speechSynthesis){f(new Error("Speech synthesis not supported"));return}window.speechSynthesis.cancel();const g=new SpeechSynthesisUtterance(a),y=window.speechSynthesis.getVoices().find(p=>p.lang.startsWith("es")||p.lang.includes(h)||p.name.toLowerCase().includes("spanish"));y&&(g.voice=y),g.lang=h,g.rate=.8,g.pitch=1.1,g.volume=1,g.onstart=()=>{n(!0),i(null)},g.onend=()=>{n(!1),_()},g.onerror=p=>{n(!1),f(new Error(`Speech synthesis error: ${p.error}`))},window.speechSynthesis.speak(g)})}),[]),u=F(a=>Z(this,null,function*(){return new Promise((h,_)=>{l();const f=new Audio(a);o.current=f,f.onloadstart=()=>{n(!0),i(null)},f.onended=()=>{n(!1),o.current=null,h()},f.onerror=()=>{n(!1),o.current=null,_(new Error("Failed to load audio file"))},f.play().catch(_)})}),[l]),d=F((a,h)=>Z(this,null,function*(){var _,f,g,m;try{if(i(null),l(),(_=window.speechSynthesis)==null||_.cancel(),h&&h.trim()&&(e!=null&&e.preferMp3||!((f=e==null?void 0:e.tts)!=null&&f.enabled)))try{yield u(h);return}catch(y){console.warn("Audio file failed, falling back to TTS:",y)}if(((g=e==null?void 0:e.tts)==null?void 0:g.enabled)!==!1)yield c(a,((m=e==null?void 0:e.tts)==null?void 0:m.voiceHint)||"es-ES");else throw new Error("No audio playback method available")}catch(y){throw console.error("Failed to play phrase:",y),i(y.message),n(!1),y}}),[e,u,c,l]),v=F(()=>{var a;l(),(a=window.speechSynthesis)==null||a.cancel(),n(!1),i(null)},[l]);return{playPhrase:d,isPlaying:t,error:r,cleanup:v}}function Tn(e){const t=[e.spanish.toLowerCase()];if(e.conjugations&&Object.values(e.conjugations).forEach(n=>{typeof n=="object"&&Object.values(n).forEach(r=>{typeof r=="string"&&t.push(r.toLowerCase())})}),e.type==="noun"){const n=e.spanish.toLowerCase();n.endsWith("a")?t.push(n.slice(0,-1)+"as"):n.endsWith("o")?t.push(n.slice(0,-1)+"os"):n.endsWith("e")?t.push(n+"s"):n.endsWith("l")||n.endsWith("r")||n.endsWith("n")?t.push(n+"es"):t.push(n+"s")}if(e.type==="adjective"){const n=e.spanish.toLowerCase();if(n.endsWith("o")){const r=n.slice(0,-1);t.push(r+"a"),t.push(r+"os"),t.push(r+"as")}else if(n.endsWith("a")){const r=n.slice(0,-1);t.push(r+"o"),t.push(r+"as"),t.push(r+"os")}else n.endsWith("s")||(t.push(n+"s"),(n.endsWith("l")||n.endsWith("r")||n.endsWith("n"))&&t.push(n+"es"))}return[...new Set(t.filter(n=>n&&n.trim()))]}function Dn(e,t){if(!t||t.length===0)return e;let n=e;const r=new Map;return t.forEach(o=>{Tn(o).forEach(c=>{(!r.has(c)||c.length>r.get(c).spanish.length)&&r.set(c,o)})}),Array.from(r.keys()).sort((o,l)=>l.length-o.length).forEach(o=>{const l=r.get(o),c=o.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&"),u=new RegExp(`\\\\b${c}\\\\b`,"gi");n=n.replace(u,d=>`<mark class="vocab-highlight" data-vocab-id="${l.id}" title="${l.english}">${d}</mark>`)}),n}const q={SPANISH:"spanish",ENGLISH:"english",CONJUGATIONS:"conjugations"};function In({type:e,item:t,isReviewed:n,onToggleReviewed:r,audioConfig:i,vocabList:o}){const[l,c]=T(q.SPANISH),{playPhrase:u,isPlaying:d}=Pn(i),v=e==="vocab"&&t.conjugations&&Object.keys(t.conjugations).length>0,a=Q(()=>e!=="phrase"?"":Dn(t.spanish,o||[]),[e,t.spanish,o]),h=()=>{l===q.SPANISH?c(q.ENGLISH):l===q.ENGLISH&&v?c(q.CONJUGATIONS):c(q.SPANISH)},_=m=>Z(this,null,function*(){m.stopPropagation();try{yield u(t.spanish,t.audioUrl)}catch(y){console.warn(y)}}),f=m=>{m.stopPropagation(),r()},g=()=>e==="vocab"?l===q.ENGLISH?s("div",{className:"card-content english",children:[s("div",{className:"word",children:t.english}),s("div",{className:"word-type",children:t.type})]}):l===q.CONJUGATIONS&&v?s("div",{className:"card-content conjugations",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"conjugation-grid",children:Object.entries(t.conjugations).map(([m,y])=>s("div",{className:"tense-group",children:[s("div",{className:"tense-title",children:m}),s("div",{className:"conjugation-forms",children:Object.entries(y).map(([p,R])=>s("div",{className:"conjugation-item",children:[s("span",{className:"person",children:[p,":"]}),s("span",{className:"form",children:R})]},p))})]},m))})]}):s("div",{className:"card-content spanish",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"word-type",children:t.type})]}):l===q.ENGLISH?s("div",{className:"card-content english",children:s("div",{className:"phrase-text",children:t.english})}):s("div",{className:"card-content spanish",children:s("div",{className:"phrase-text",dangerouslySetInnerHTML:{__html:a}})});return s("div",{className:"study-card-wrapper",children:s("div",{className:`study-card ${e} ${l} ${n?"reviewed":""}`,onClick:h,role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),h())},"aria-label":`${e==="vocab"?"Vocabulary":"Phrase"} card ${t.spanish}`,children:[g(),s("div",{className:"right-buttons",children:[s("button",{className:`play-button ${d?"playing":""}`,disabled:d,onClick:_,"aria-label":"Play audio",children:d?s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[s("rect",{x:"6",y:"4",width:"4",height:"16"}),s("rect",{x:"14",y:"4",width:"4",height:"16"})]}):s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("polygon",{points:"5,3 19,12 5,21"})})}),s("button",{className:`review-button ${n?"active":""}`,onClick:f,"aria-pressed":n,"aria-label":n?"Unmark reviewed":"Mark reviewed",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12"})})})]})]})})}function ce({type:e,items:t=[],reviewedIds:n=[],onToggleReviewed:r,audioConfig:i,vocabList:o}){return t.length?s("div",{className:`study-collection ${e}`,children:t.map(l=>s(In,{type:e,item:l,isReviewed:n.includes(l.id),onToggleReviewed:()=>r(l.id),audioConfig:i,vocabList:o},`${l.weekId}-${e}-${l.id}`))}):s("div",{className:"empty-state",children:s("p",{children:["No ",e==="vocab"?"vocabulary":"phrases"," items"]})})}function Wn({weeks:e,viewMode:t,currentWeek:n,currentUnit:r,currentCourse:i,session:o,onMarkReviewed:l,audioConfig:c,onClearSelection:u}){var m,y;const[d,v]=T("vocab"),[a,h]=T(!1);if(G(()=>{if(!localStorage.getItem("hint.tapCycleShown")){h(!0);const p=setTimeout(()=>{h(!1),localStorage.setItem("hint.tapCycleShown","1")},2500);return()=>clearTimeout(p)}},[]),!e||e.length===0)return null;const _=Q(()=>{const p=[],R=[];return e.forEach(C=>{C.vocab&&C.vocab.forEach(U=>{p.push(z(B({},U),{weekId:C.id,weekTitle:C.title,unitId:C.unitId,unitTitle:C.unitTitle}))}),C.phrases&&C.phrases.forEach(U=>{R.push(z(B({},U),{weekId:C.id,weekTitle:C.title,unitId:C.unitId,unitTitle:C.unitTitle}))})}),{vocab:p,phrases:R}},[e]),f=e.length===1?e[0]:null,g={vocabReviewed:((m=o.vocabReviewed)==null?void 0:m.length)||0,phraseReviewed:((y=o.phraseReviewed)==null?void 0:y.length)||0,vocabTotal:_.vocab.length,phraseTotal:_.phrases.length};return s("div",{className:"week-view",children:[f?s("div",{className:"hero",children:[s("h1",{className:"hero-title",children:f.title}),s("div",{className:"hero-progress",children:[s("div",{className:"counts",children:[g.vocabReviewed,"/",g.vocabTotal," words · ",g.phraseReviewed,"/",g.phraseTotal," phrases"]}),s("div",{className:"linear-track","aria-label":"Overall progress",children:s("div",{className:"linear-fill",style:{width:`${(g.vocabReviewed+g.phraseReviewed)/Math.max(1,g.vocabTotal+g.phraseTotal)*100}%`}})})]}),s("div",{className:"hero-actions",children:s("button",{className:"primary hero-cta",children:["Study ",f.title]})})]}):s("div",{className:"selection-chips","aria-label":"Selected weeks",children:[s("span",{className:"chips-label",children:"Selected:"}),s("div",{className:"chips-group",children:e.map(p=>s("span",{className:"chip",children:p.title},p.id))}),s("button",{className:"clear-chips",onClick:u,children:"Clear"})]}),s("div",{className:"tab-rail",children:[s("button",{className:`pill-tab ${d==="vocab"?"active":""}`,onClick:()=>v("vocab"),children:["Vocabulary ",s("span",{className:"count",children:_.vocab.length})]}),s("button",{className:`pill-tab ${d==="phrases"?"active":""}`,onClick:()=>v("phrases"),children:["Phrases ",s("span",{className:"count",children:_.phrases.length})]})]}),a&&s("div",{className:"tap-hint",children:"tap to cycle"}),s("div",{className:"tab-panels",children:[s("div",{className:`panel ${d==="vocab"?"active":""}`,children:d==="vocab"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(p=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:p.title}),s(ce,{type:"vocab",items:_.vocab.filter(R=>R.weekId===p.id),reviewedIds:o.vocabReviewed||[],onToggleReviewed:R=>l(R,"vocab"),audioConfig:c,vocabList:_.vocab})]},p.id))}):s(ce,{type:"vocab",items:_.vocab,reviewedIds:o.vocabReviewed||[],onToggleReviewed:p=>l(p,"vocab"),audioConfig:c,vocabList:_.vocab}))}),s("div",{className:`panel ${d==="phrases"?"active":""}`,children:d==="phrases"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(p=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:p.title}),s(ce,{type:"phrase",items:_.phrases.filter(R=>R.weekId===p.id),reviewedIds:o.phraseReviewed||[],onToggleReviewed:R=>l(R,"phrase"),audioConfig:c,vocabList:_.vocab})]},p.id))}):s(ce,{type:"phrase",items:_.phrases,reviewedIds:o.phraseReviewed||[],onToggleReviewed:p=>l(p,"phrase"),audioConfig:c,vocabList:_.vocab}))})]})]})}function An({isOpen:e,weeks:t,currentWeekId:n,onWeekSelect:r,onClose:i}){const[o,l]=T(new Date),c=Q(()=>{if(!t||t.length===0)return{weeks:[],monthName:"",year:""};const d=o.toLocaleDateString("en-US",{month:"long"}),v=o.getFullYear();return{weeks:t.filter(h=>{if(!h.startDate)return!1;const _=new Date(h.startDate);return _.getMonth()===o.getMonth()&&_.getFullYear()===o.getFullYear()}).sort((h,_)=>new Date(h.startDate)-new Date(_.startDate)),monthName:d,year:v.toString()}},[t,o]),u=d=>{l(v=>{const a=new Date(v);return a.setMonth(v.getMonth()+d),a})};return!t||t.length===0?null:s("div",{className:`calendar-nav ${e?"open":""}`,children:[s("div",{className:"calendar-header",children:[s("h3",{children:"Calendar"}),s("button",{className:"close-button",onClick:i,"aria-label":"Close calendar",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"calendar-content",children:[s("div",{className:"month-navigation",children:[s("button",{className:"nav-arrow",onClick:()=>u(-1),"aria-label":"Previous month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"15,18 9,12 15,6"})})}),s("h4",{className:"month-title",children:[c.monthName," ",c.year]}),s("button",{className:"nav-arrow",onClick:()=>u(1),"aria-label":"Next month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"9,6 15,12 9,18"})})})]}),s("div",{className:"calendar-weeks",children:c.weeks.length>0?c.weeks.map(d=>s("button",{className:`calendar-week-item ${n===d.id?"active":""}`,onClick:()=>r(d.id),children:[s("div",{className:"week-info",children:[s("h5",{className:"week-title",children:d.title}),s("p",{className:"week-dates",children:Mn(d)})]}),n===d.id&&s("div",{className:"active-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]},d.id)):s("div",{className:"no-weeks",children:s("p",{children:["No weeks available for ",c.monthName]})})})]})]})}function Mn(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),r=t.getMonth()===n.getMonth(),i=new Intl.DateTimeFormat("en-US",{month:"short"}),o=i.format(t),l=i.format(n),c=t.getFullYear();return r?`${o} ${t.getDate()}–${n.getDate()}, ${c}`:`${o} ${t.getDate()} – ${l} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}function Un({weeks:e=[],currentWeekId:t,session:n,onReset:r}){var h,_;if(!e||e.length===0||!n)return null;let i=0,o=0;e.forEach(f=>{var g,m;i+=((g=f.vocab)==null?void 0:g.length)||0,o+=((m=f.phrases)==null?void 0:m.length)||0});const l=((h=n.vocabReviewed)==null?void 0:h.length)||0,c=((_=n.phraseReviewed)==null?void 0:_.length)||0;if(!(i+o>0))return null;const d=i?l/i*100:0,v=o?c/o*100:0,a=l>0||c>0;return s("div",{className:"progress-bar-container mini",children:s("div",{className:"progress-content split",children:[s("div",{className:"counter-group","aria-label":"Vocabulary progress",children:[s("span",{className:"counter-label",children:["Words ",l,"/",i]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${d}%`}})})]}),s("div",{className:"counter-group","aria-label":"Phrases progress",children:[s("span",{className:"counter-label",children:["Phrases ",c,"/",o]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${v}%`}})})]}),a&&s("button",{className:"reset-button link",onClick:r,"aria-label":"Reset session progress",children:"Reset"})]})})}function On({config:e,currentWeekId:t,currentUnitId:n,currentCourseId:r,selectionStates:i,onWeekSelect:o,onUnitSelect:l,onCourseSelect:c,onWeekToggle:u,onUnitToggle:d,onCourseToggle:v}){var I,M,$,W,O;const[a,h]=T(new Set(((I=e.courses)==null?void 0:I.map(b=>b.id))||[])),_=(e.courses||[]).flatMap(b=>(b.units||[]).map(S=>S.id)),[f,g]=T(new Set(_));if(!e||!e.courses||e.courses.length===0)return s("div",{className:"full-nav-view",children:s("div",{className:"empty-state",children:[s("h2",{children:"No Content Available"}),s("p",{children:"No courses or weeks are configured."})]})});const m=b=>{try{return{vocabReviewed:JSON.parse(localStorage.getItem(`session.vocabReviewed.${b}`)||"[]"),phraseReviewed:JSON.parse(localStorage.getItem(`session.phraseReviewed.${b}`)||"[]")}}catch(S){return{vocabReviewed:[],phraseReviewed:[]}}},y=b=>{if(!b.vocab||!b.phrases)return!1;const S=m(b.id),L=b.vocab.map(A=>A.id),E=b.phrases.map(A=>A.id);return L.every(A=>S.vocabReviewed.includes(A))&&E.every(A=>S.phraseReviewed.includes(A))&&L.length>0&&E.length>0},p=b=>{var S;return((S=b.weeks)==null?void 0:S.length)&&b.weeks.every(y)},R=b=>{var S;return((S=b.units)==null?void 0:S.length)&&b.units.every(p)},C=b=>{const S=new Set(a);S.has(b)?S.delete(b):S.add(b),h(S)},U=b=>{const S=new Set(f);S.has(b)?S.delete(b):S.add(b),g(S)};(M=e.weeks)==null||M.find(b=>b.id===e.app.current_week_id);const w=(()=>{var b,S;for(const L of e.courses)for(const E of L.units||[])for(const A of E.weeks||[]){const x=m(A.id),j=((b=A.vocab)==null?void 0:b.map(V=>V.id))||[],ne=((S=A.phrases)==null?void 0:S.map(V=>V.id))||[];if(!(j.length>0&&ne.length>0&&j.every(V=>x.vocabReviewed.includes(V))&&ne.every(V=>x.phraseReviewed.includes(V))))return A}return null})()||(($=e.weeks)==null?void 0:$[0]);let k={vocab:0,phrases:0};return w&&(k.vocab=((W=w.vocab)==null?void 0:W.length)||0,k.phrases=((O=w.phrases)==null?void 0:O.length)||0),s("div",{className:"full-nav-view",children:[w&&s("div",{className:"landing-hero",children:s("div",{className:"hero-left",children:[s("h1",{className:"hero-h1",children:w.title}),s("div",{className:"hero-progress-line","aria-label":"Week item counts",children:s("span",{children:[k.vocab," words · ",k.phrases," phrases"]})}),s("button",{className:"primary hero-start",onClick:()=>o(w.id),children:["Study ",w.title]})]})}),s("div",{className:"nav-content",children:e.courses.map(b=>{var S,L;return s("div",{className:"course-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item course-item has-children ${a.has(b.id)?"current":""}`,onClick:()=>C(b.id),"aria-expanded":a.has(b.id),children:[s("div",{className:"section-content",children:[s("h3",{className:"section-title",children:b.title}),s("p",{className:"section-meta",children:["Units ",((S=b.units)==null?void 0:S.length)||0]})]}),s("div",{className:"section-actions",children:[s(X,{state:((L=i.courses)==null?void 0:L[b.id])||"none",onClick:E=>{E.stopPropagation(),v(b.id)},size:"medium"}),R(b)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),a.has(b.id)&&b.units&&s("div",{className:"section-children",children:b.units.map(E=>{var A,x;return s("div",{className:"unit-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item unit-item has-children ${f.has(E.id)?"current":""}`,onClick:()=>U(E.id),"aria-expanded":f.has(E.id),children:[s("div",{className:"section-content",children:[s("h4",{className:"section-title",children:E.title}),s("p",{className:"section-meta",children:["Weeks ",((A=E.weeks)==null?void 0:A.length)||0]})]}),s("div",{className:"section-actions",children:[s(X,{state:((x=i.units)==null?void 0:x[E.id])||"none",onClick:j=>{j.stopPropagation(),d(E.id)},size:"medium"}),p(E)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),f.has(E.id)&&E.weeks&&s("div",{className:"section-children",children:s("div",{className:"weeks-grid",children:E.weeks.map(j=>{var ne,ve;return s("button",{className:`week-card ${t===j.id?"current":""} ${(ne=i.weeks)!=null&&ne[j.id]?"selected":""}`,onClick:()=>u(j.id),children:[s("div",{className:"week-card-content",children:[s("h5",{className:"week-title",children:j.title}),s("p",{className:"week-dates",children:jn(j)})]}),s("div",{className:"week-actions",children:[s(X,{state:(ve=i.weeks)!=null&&ve[j.id]?"selected":"none",onClick:V=>{V.stopPropagation(),u(j.id)},size:"small"}),y(j)&&s("div",{className:"reviewed-indicator small",children:s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},j.id)})})})]},E.id)})})]},b.id)})})]})}function jn(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),r=t.getMonth()===n.getMonth(),i=new Intl.DateTimeFormat("en-US",{month:"short"}),o=i.format(t),l=i.format(n),c=t.getFullYear();return r?`${o} ${t.getDate()}–${n.getDate()}, ${c}`:`${o} ${t.getDate()} – ${l} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}const gt="2025-08-04",yt="spanish-1",bt="unit-1-basics",wt="Week 1: Saludos",Nt="2025-08-04",St="2025-08-10",kt=[{id:"hola",spanish:"hola",english:"hello",type:"interjection"},{id:"adios",spanish:"adiós",english:"goodbye",type:"interjection"},{id:"ser",spanish:"ser",english:"to be (essential)",type:"verb",conjugations:{present:{yo:"soy",tú:"eres","él/ella":"es",nosotros:"somos",vosotros:"sois",ellos:"son"},preterite:{yo:"fui",tú:"fuiste","él/ella":"fue",nosotros:"fuimos",vosotros:"fuisteis",ellos:"fueron"}}},{id:"estar",spanish:"estar",english:"to be (temporary)",type:"verb",conjugations:{present:{yo:"estoy",tú:"estás","él/ella":"está",nosotros:"estamos",vosotros:"estáis",ellos:"están"}}}],$t=[{id:"p1",spanish:"Hola, ¿cómo estás?",english:"Hi, how are you?",audioUrl:""},{id:"p2",spanish:"Yo soy estudiante.",english:"I am a student.",audioUrl:""},{id:"p3",spanish:"Adiós, hasta mañana.",english:"Goodbye, see you tomorrow.",audioUrl:""}],Ln={id:gt,courseId:yt,unitId:bt,title:wt,startDate:Nt,endDate:St,vocab:kt,phrases:$t},Fn=Object.freeze(Object.defineProperty({__proto__:null,courseId:yt,default:Ln,endDate:St,id:gt,phrases:$t,startDate:Nt,title:wt,unitId:bt,vocab:kt},Symbol.toStringTag,{value:"Module"})),Ct="2025-08-11",Rt="spanish-1",Et="unit-1-basics",xt="Week 2: En la Escuela",Pt="2025-08-11",Tt="2025-08-17",Dt=[{id:"lapiz",spanish:"lápiz",english:"pencil",type:"noun"},{id:"libro",spanish:"libro",english:"book",type:"noun"},{id:"estudiar",spanish:"estudiar",english:"to study",type:"verb",conjugations:{present:{yo:"estudio",tú:"estudias","él/ella":"estudia",nosotros:"estudiamos",vosotros:"estudiáis",ellos:"estudian"}}}],It=[{id:"p1",spanish:"Necesito un lápiz.",english:"I need a pencil.",audioUrl:""},{id:"p2",spanish:"Yo estudio español cada día.",english:"I study Spanish every day.",audioUrl:""}],Hn={id:Ct,courseId:Rt,unitId:Et,title:xt,startDate:Pt,endDate:Tt,vocab:Dt,phrases:It},Bn=Object.freeze(Object.defineProperty({__proto__:null,courseId:Rt,default:Hn,endDate:Tt,id:Ct,phrases:It,startDate:Pt,title:xt,unitId:Et,vocab:Dt},Symbol.toStringTag,{value:"Module"})),Wt="2025-08-18",At="spanish-1",Mt="unit-1-basics",Ut="Week 3: Family & Basics Review",Ot="2025-08-18",jt="2025-08-24",Lt=[{id:"familia",spanish:"familia",english:"family",type:"noun"},{id:"madre",spanish:"madre",english:"mother",type:"noun"},{id:"padre",spanish:"padre",english:"father",type:"noun"},{id:"hermano",spanish:"hermano",english:"brother",type:"noun"},{id:"hermana",spanish:"hermana",english:"sister",type:"noun"},{id:"amigo",spanish:"amigo",english:"friend (male)",type:"noun"},{id:"amiga",spanish:"amiga",english:"friend (female)",type:"noun"},{id:"clase",spanish:"clase",english:"class",type:"noun"},{id:"tener",spanish:"tener",english:"to have",type:"verb",conjugations:{present:{yo:"tengo",tú:"tienes","él/ella":"tiene",nosotros:"tenemos",vosotros:"tenéis",ellos:"tienen"},preterite:{yo:"tuve",tú:"tuviste","él/ella":"tuvo",nosotros:"tuvimos",vosotros:"tuvisteis",ellos:"tuvieron"}}},{id:"vivir",spanish:"vivir",english:"to live",type:"verb",conjugations:{present:{yo:"vivo",tú:"vives","él/ella":"vive",nosotros:"vivimos",vosotros:"vivís",ellos:"viven"},preterite:{yo:"viví",tú:"viviste","él/ella":"vivió",nosotros:"vivimos",vosotros:"vivisteis",ellos:"vivieron"}}},{id:"comer",spanish:"comer",english:"to eat",type:"verb",conjugations:{present:{yo:"como",tú:"comes","él/ella":"come",nosotros:"comemos",vosotros:"coméis",ellos:"comen"},preterite:{yo:"comí",tú:"comiste","él/ella":"comió",nosotros:"comimos",vosotros:"comisteis",ellos:"comieron"}}},{id:"gustar",spanish:"gustar",english:"to like",type:"verb",conjugations:{present:{yo:"me gusta",tú:"te gusta","él/ella":"le gusta",nosotros:"nos gusta",vosotros:"os gusta",ellos:"les gusta"},preterite:{yo:"me gustó",tú:"te gustó","él/ella":"le gustó",nosotros:"nos gustó",vosotros:"os gustó",ellos:"les gustó"}}}],Ft=[{id:"p1",spanish:"Tengo una familia grande.",english:"I have a big family.",audioUrl:""},{id:"p2",spanish:"Mi madre vive en España.",english:"My mother lives in Spain.",audioUrl:""},{id:"p3",spanish:"Mi padre come en la cocina.",english:"My father eats in the kitchen.",audioUrl:""},{id:"p4",spanish:"Mi hermana y yo estudiamos juntos.",english:"My sister and I study together.",audioUrl:""},{id:"p5",spanish:"Mi hermano tiene un libro nuevo.",english:"My brother has a new book.",audioUrl:""},{id:"p6",spanish:"A mi amigo le gusta el español.",english:"My friend likes Spanish.",audioUrl:""},{id:"p7",spanish:"Mis amigos viven cerca de la escuela.",english:"My friends live near the school.",audioUrl:""},{id:"p8",spanish:"Tenemos clase el lunes.",english:"We have class on Monday.",audioUrl:""},{id:"p9",spanish:"A mi amiga le gusta comer pizza.",english:"My (female) friend likes to eat pizza.",audioUrl:""},{id:"p10",spanish:"Mi familia vive en una casa pequeña.",english:"My family lives in a small house.",audioUrl:""}],Vn={id:Wt,courseId:At,unitId:Mt,title:Ut,startDate:Ot,endDate:jt,vocab:Lt,phrases:Ft},zn=Object.freeze(Object.defineProperty({__proto__:null,courseId:At,default:Vn,endDate:jt,id:Wt,phrases:Ft,startDate:Ot,title:Ut,unitId:Mt,vocab:Lt},Symbol.toStringTag,{value:"Module"}));function qn(){const[e,t]=T(null),[n,r]=T(!0),[i,o]=T(null);return G(()=>{Z(this,null,function*(){try{r(!0),o(null);const c=yield fetch("/config.json");if(!c.ok)throw new Error(`Failed to load config: ${c.status}`);const u=yield c.json();let d;if(u.courses){d={app:u.app,courses:u.courses,units:[],weeks:[]},u.courses.forEach(v=>{v.units.forEach(a=>{d.units.push(z(B({},a),{courseId:v.id,courseTitle:v.title,weeks:[]}))})});try{const a=Object.values(Object.assign({"../weeks/spanish-1/unit-1-basics/2025-08-04.json":Fn,"../weeks/spanish-1/unit-1-basics/2025-08-11.json":Bn,"../weeks/spanish-1/unit-1-basics/2025-08-18.json":zn})).map(h=>h.default||h);if(a.length){const h={};d.courses.forEach(_=>{_.units.forEach(f=>{h[f.id]={unit:f,course:_}})}),a.forEach(_=>{const f=h[_.unitId];if(!f){console.warn("Week references unknown unitId",_.unitId,"in",_.id);return}const{unit:g,course:m}=f;g.weeks.push(_),d.weeks.push(z(B({},_),{unitTitle:g.title,courseId:m.id,courseTitle:m.title}))})}}catch(v){console.error("Error loading week modules",v)}}else if(u.weeks)d={app:z(B({},u.app),{current_unit_id:"default-unit",current_course_id:"default-course"}),courses:[{id:"default-course",title:"Spanish Course",description:"Spanish language course",units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",weeks:u.weeks}]}],units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",courseId:"default-course",courseTitle:"Spanish Course",weeks:u.weeks}],weeks:u.weeks.map(v=>z(B({},v),{unitId:"default-unit",unitTitle:"Spanish Lessons",courseId:"default-course",courseTitle:"Spanish Course"}))};else throw new Error("Invalid config format: missing courses or weeks");if(!d.app||!Array.isArray(d.weeks))throw new Error("Invalid config format after processing");t(d)}catch(c){console.error("Failed to load config:",c),o(c.message)}finally{r(!1)}})},[]),{config:e,loading:n,error:i}}const Jn=24*60*60*1e3;function Kn(e){const[t,n]=T({vocabReviewed:[],phraseReviewed:[],startedAt:null});G(()=>{if(!e)return;(()=>{try{const c=`session.vocabReviewed.${e}`,u=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`,v=JSON.parse(localStorage.getItem(c)||"[]"),a=JSON.parse(localStorage.getItem(u)||"[]"),h=localStorage.getItem(d);if(h&&Date.now()-parseInt(h)>Jn){localStorage.removeItem(c),localStorage.removeItem(u),localStorage.removeItem(d),n({vocabReviewed:[],phraseReviewed:[],startedAt:null});return}n({vocabReviewed:v,phraseReviewed:a,startedAt:h?parseInt(h):null})}catch(c){console.error("Failed to load session:",c),n({vocabReviewed:[],phraseReviewed:[],startedAt:null})}})()},[e]);const r=F(l=>{if(e)try{const c=`session.vocabReviewed.${e}`,u=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`;localStorage.setItem(c,JSON.stringify(l.vocabReviewed)),localStorage.setItem(u,JSON.stringify(l.phraseReviewed)),l.startedAt&&localStorage.setItem(d,l.startedAt.toString())}catch(c){console.error("Failed to save session:",c)}},[e]),i=F((l,c)=>{e&&n(u=>{const d=Date.now(),v=u.startedAt||d;let a;if(c==="vocab"){const h=u.vocabReviewed.includes(l)?u.vocabReviewed.filter(_=>_!==l):[...u.vocabReviewed,l];a=z(B({},u),{vocabReviewed:h,startedAt:v})}else if(c==="phrase"){const h=u.phraseReviewed.includes(l)?u.phraseReviewed.filter(_=>_!==l):[...u.phraseReviewed,l];a=z(B({},u),{phraseReviewed:h,startedAt:v})}else return u;return r(a),a})},[e,r]),o=F(()=>{if(!e)return;n({vocabReviewed:[],phraseReviewed:[],startedAt:null});try{localStorage.removeItem(`session.vocabReviewed.${e}`),localStorage.removeItem(`session.phraseReviewed.${e}`),localStorage.removeItem(`session.startedAt.${e}`)}catch(c){console.error("Failed to clear session:",c)}},[e]);return{session:t,markReviewed:i,resetSession:o}}function Gn(e,t){const[n,r]=T(new Set(t?[t]:[])),i=Q(()=>{var h,_;if(!e||!e.courses)return{};const a={weeks:{},units:{},courses:{}};return n.forEach(f=>{a.weeks[f]="selected"}),(h=e.units)==null||h.forEach(f=>{var y;const g=f.weeks&&f.weeks.length>0?f.weeks:((y=e.weeks)==null?void 0:y.filter(p=>p.unitId===f.id))||[],m=g.filter(p=>n.has(p.id)).length;g.length===0||m===0?a.units[f.id]="none":m===g.length?a.units[f.id]="selected":a.units[f.id]="partial"}),(_=e.courses)==null||_.forEach(f=>{var y;const g=[];(y=f.units)==null||y.forEach(p=>{var R;(R=p.weeks)==null||R.forEach(C=>g.push(C))});const m=g.filter(p=>n.has(p.id)).length;m===0?a.courses[f.id]="none":m===g.length?a.courses[f.id]="selected":a.courses[f.id]="partial"}),a},[e,n]),o=F(a=>{r(h=>{const _=new Set(h);return _.has(a)?_.delete(a):_.add(a),_})},[]),l=F(a=>{var g;if(!e)return;let h=[];const _=(g=e.units)==null?void 0:g.find(m=>m.id===a);if(_!=null&&_.weeks&&_.weeks.length>0?h=_.weeks.map(m=>m.id):e.weeks&&(h=e.weeks.filter(m=>m.unitId===a).map(m=>m.id)),h.length===0)return;const f=i.units[a];r(m=>{const y=new Set(m);return f==="selected"?h.forEach(p=>y.delete(p)):h.forEach(p=>y.add(p)),y})},[e,i]),c=F(a=>{if(!(e!=null&&e.courses))return;const h=e.courses.find(g=>g.id===a);if(!(h!=null&&h.units))return;const _=[];h.units.forEach(g=>{var m;(m=g.weeks)==null||m.forEach(y=>_.push(y.id))});const f=i.courses[a];r(g=>{const m=new Set(g);return f==="selected"?_.forEach(y=>m.delete(y)):_.forEach(y=>m.add(y)),m})},[e,i]),u=Q(()=>e!=null&&e.weeks?e.weeks.filter(a=>n.has(a.id)):[],[e,n]),d=F(()=>{r(new Set)},[]),v=F(a=>{r(new Set([a]))},[]);return{selectedWeekIds:n,selectionStates:i,selectedWeeks:u,toggleWeekSelection:o,toggleUnitSelection:l,toggleCourseSelection:c,clearSelection:d,selectSingleWeek:v,hasSelection:n.size>0,selectionCount:n.size}}function Yn(){var L,E,A;const[e,t]=T(!1),[n,r]=T(!1),[i,o]=T(null),[l,c]=T("week"),[u,d]=T(null),[v,a]=T(null),{config:h,loading:_,error:f}=qn(),{session:g,markReviewed:m,resetSession:y}=Kn(i),{selectedWeekIds:p,selectionStates:R,selectedWeeks:C,toggleWeekSelection:U,toggleUnitSelection:H,toggleCourseSelection:w,selectSingleWeek:k}=Gn(h,i);G(()=>{h&&!i&&(d(h.app.current_unit_id),a(h.app.current_course_id))},[h,i]),G(()=>{if(!i&&p&&p.size>0){const x=p.values().next().value;x&&o(x)}},[i,p]);const I=(L=h==null?void 0:h.weeks)==null?void 0:L.find(x=>x.id===i),M=(E=h==null?void 0:h.units)==null?void 0:E.find(x=>x.id===u),$=(A=h==null?void 0:h.courses)==null?void 0:A.find(x=>x.id===v),W=x=>{o(x),c("week"),k(x),t(!1),r(!1)},O=x=>{d(x),c("unit"),t(!1),r(!1)},b=x=>{a(x),c("course"),t(!1),r(!1)},S=()=>{p&&p.size&&Array.from(p).forEach(x=>U(x))};return _?s("div",{className:"app loading",children:s("div",{className:"loading-spinner",children:[s("div",{className:"spinner"}),s("p",{children:"Loading Spanish Weekly..."})]})}):f||!h?s("div",{className:"app error",children:s("div",{className:"error-message",children:[s("h2",{children:"Oops! Can't load this week."}),s("p",{children:"Pull to refresh or try again later."}),s("button",{onClick:()=>window.location.reload(),children:"Refresh"})]})}):s("div",{className:"app",children:[s(Rn,{title:h.app.title,viewMode:l,currentWeek:I,currentUnit:M,currentCourse:$,onSideNavToggle:()=>t(!e),onCalendarToggle:()=>r(!n)}),s(En,{isOpen:e,config:h,currentWeekId:i,currentUnitId:u,currentCourseId:v,selectionStates:R,onWeekSelect:W,onUnitSelect:O,onCourseSelect:b,onWeekToggle:U,onUnitToggle:H,onCourseToggle:w,onClose:()=>t(!1)}),s(An,{isOpen:n,weeks:h.weeks,currentWeekId:i,onWeekSelect:W,onClose:()=>r(!1)}),s("main",{className:"main-content",children:C.length>0?s(Wn,{weeks:C,viewMode:l,currentWeek:I,currentUnit:M,currentCourse:$,session:g,onMarkReviewed:m,audioConfig:h.app.audio,onClearSelection:S}):s(On,{config:h,currentWeekId:i,currentUnitId:u,currentCourseId:v,selectionStates:R,onWeekSelect:W,onUnitSelect:O,onCourseSelect:b,onWeekToggle:U,onUnitToggle:H,onCourseToggle:w})}),s(Un,{weeks:C,currentWeekId:i,session:g,onReset:y}),(e||n)&&s("div",{className:"overlay",onClick:()=>{t(!1),r(!1)}}),s(Cn,{})]})}Zt(s(Yn,{}),document.getElementById("app"));
