var Bt=Object.defineProperty,Vt=Object.defineProperties;var zt=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var qt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable;var Pe=(e,t,n)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))qt.call(t,n)&&Pe(e,n,t[n]);if(Re)for(var n of Re(t))Jt.call(t,n)&&Pe(e,n,t[n]);return e},z=(e,t)=>Vt(e,zt(t));var Q=(e,t,n)=>new Promise((i,o)=>{var r=h=>{try{c(n.next(h))}catch(d){o(d)}},a=h=>{try{c(n.throw(h))}catch(d){o(d)}},c=h=>h.done?i(h.value):Promise.resolve(h.value).then(r,a);c((n=n.apply(e,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var pe,k,Xe,Z,Ie,et,tt,nt,ke,ge,ye,se={},st=[],Kt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,re=Array.isArray;function J(e,t){for(var n in t)e[n]=t[n];return e}function $e(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function we(e,t,n){var i,o,r,a={};for(r in t)r=="key"?i=t[r]:r=="ref"?o=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?pe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)a[r]===void 0&&(a[r]=e.defaultProps[r]);return de(e,a,i,o,null)}function de(e,t,n,i,o){var r={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o==null?++Xe:o,__i:-1,__u:0};return o==null&&k.vnode!=null&&k.vnode(r),r}function te(e){return e.children}function K(e,t){this.props=e,this.context=t}function ne(e,t){if(t==null)return e.__?ne(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ne(e):null}function it(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return it(e)}}function Te(e){(!e.__d&&(e.__d=!0)&&Z.push(e)&&!ue.__r++||Ie!=k.debounceRendering)&&((Ie=k.debounceRendering)||et)(ue)}function ue(){for(var e,t,n,i,o,r,a,c=1;Z.length;)Z.length>c&&Z.sort(tt),e=Z.shift(),c=Z.length,e.__d&&(n=void 0,o=(i=(t=e).__v).__e,r=[],a=[],t.__P&&((n=J({},i)).__v=i.__v+1,k.vnode&&k.vnode(n),Ce(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,r,o==null?ne(i):o,!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,at(r,n,a),n.__e!=o&&it(n)));ue.__r=0}function ot(e,t,n,i,o,r,a,c,h,d,m){var l,p,u,v,y,_,g=i&&i.__k||st,f=t.length;for(h=Gt(n,t,g,h,f),l=0;l<f;l++)(u=n.__k[l])!=null&&(p=u.__i==-1?se:g[u.__i]||se,u.__i=l,_=Ce(e,u,p,o,r,a,c,h,d,m),v=u.__e,u.ref&&p.ref!=u.ref&&(p.ref&&xe(p.ref,null,u),m.push(u.ref,u.__c||v,u)),y==null&&v!=null&&(y=v),4&u.__u||p.__k===u.__k?h=rt(u,h,e):typeof u.type=="function"&&_!==void 0?h=_:v&&(h=v.nextSibling),u.__u&=-7);return n.__e=y,h}function Gt(e,t,n,i,o){var r,a,c,h,d,m=n.length,l=m,p=0;for(e.__k=new Array(o),r=0;r<o;r++)(a=t[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(h=r+p,(a=e.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?de(null,a,null,null,null):re(a)?de(te,{children:a},null,null,null):a.constructor==null&&a.__b>0?de(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,c=null,(d=a.__i=Yt(a,n,h,l))!=-1&&(l--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(o>m?p--:o<m&&p++),typeof a.type!="function"&&(a.__u|=4)):d!=h&&(d==h-1?p--:d==h+1?p++:(d>h?p--:p++,a.__u|=4))):e.__k[r]=null;if(l)for(r=0;r<m;r++)(c=n[r])!=null&&!(2&c.__u)&&(c.__e==i&&(i=ne(c)),ct(c,c));return i}function rt(e,t,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=rt(i[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=ne(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _e(e,t){return t=t||[],e==null||typeof e=="boolean"||(re(e)?e.some(function(n){_e(n,t)}):t.push(e)),t}function Yt(e,t,n,i){var o,r,a,c=e.key,h=e.type,d=t[n],m=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||m&&c==d.key&&h==d.type)return n;if(i>(m?1:0)){for(o=n-1,r=n+1;o>=0||r<t.length;)if((d=t[a=o>=0?o--:r++])!=null&&!(2&d.__u)&&c==d.key&&h==d.type)return a}return-1}function De(e,t,n){t[0]=="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||Kt.test(t)?n:n+"px"}function ae(e,t,n,i,o){var r,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||De(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||De(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(nt,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i?n.u=i.u:(n.u=ke,e.addEventListener(t,r?ye:ge,r)):e.removeEventListener(t,r?ye:ge,r);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n==null?"":n;break e}catch(c){}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function We(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ke++;else if(t.t<n.u)return;return n(k.event?k.event(t):t)}}}function Ce(e,t,n,i,o,r,a,c,h,d){var m,l,p,u,v,y,_,g,f,S,w,x,F,L,N,$,O,P=t.type;if(t.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),r=[c=t.__e=n.__e]),(m=k.__b)&&m(t);e:if(typeof P=="function")try{if(g=t.props,f="prototype"in P&&P.prototype.render,S=(m=P.contextType)&&i[m.__c],w=m?S?S.props.value:m.__:i,n.__c?_=(l=t.__c=n.__c).__=l.__E:(f?t.__c=l=new P(g,w):(t.__c=l=new K(g,w),l.constructor=P,l.render=Zt),S&&S.sub(l),l.props=g,l.state||(l.state={}),l.context=w,l.__n=i,p=l.__d=!0,l.__h=[],l._sb=[]),f&&l.__s==null&&(l.__s=l.state),f&&P.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=J({},l.__s)),J(l.__s,P.getDerivedStateFromProps(g,l.__s))),u=l.props,v=l.state,l.__v=t,p)f&&P.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),f&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(f&&P.getDerivedStateFromProps==null&&g!==u&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(g,w),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(g,l.__s,w)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(l.props=g,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(E){E&&(E.__=t)}),x=0;x<l._sb.length;x++)l.__h.push(l._sb[x]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(g,l.__s,w),f&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(u,v,y)})}if(l.context=w,l.props=g,l.__P=e,l.__e=!1,F=k.__r,L=0,f){for(l.state=l.__s,l.__d=!1,F&&F(t),m=l.render(l.props,l.state,l.context),N=0;N<l._sb.length;N++)l.__h.push(l._sb[N]);l._sb=[]}else do l.__d=!1,F&&F(t),m=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++L<25);l.state=l.__s,l.getChildContext!=null&&(i=J(J({},i),l.getChildContext())),f&&!p&&l.getSnapshotBeforeUpdate!=null&&(y=l.getSnapshotBeforeUpdate(u,v)),$=m,m!=null&&m.type===te&&m.key==null&&($=lt(m.props.children)),c=ot(e,re($)?$:[$],t,n,i,o,r,a,c,h,d),l.base=t.__e,t.__u&=-161,l.__h.length&&a.push(l),_&&(l.__E=l.__=null)}catch(E){if(t.__v=null,h||r!=null)if(E.then){for(t.__u|=h?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,t.__e=c}else{for(O=r.length;O--;)$e(r[O]);be(t)}else t.__e=n.__e,t.__k=n.__k,E.then||be(t);k.__e(E,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Qt(n.__e,t,n,i,o,r,a,h,d);return(m=k.diffed)&&m(t),128&t.__u?void 0:c}function be(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(be)}function at(e,t,n){for(var i=0;i<n.length;i++)xe(n[i],n[++i],n[++i]);k.__c&&k.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(r){r.call(o)})}catch(r){k.__e(r,o.__v)}})}function lt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:re(e)?e.map(lt):J({},e)}function Qt(e,t,n,i,o,r,a,c,h){var d,m,l,p,u,v,y,_=n.props,g=t.props,f=t.type;if(f=="svg"?o="http://www.w3.org/2000/svg":f=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(d=0;d<r.length;d++)if((u=r[d])&&"setAttribute"in u==!!f&&(f?u.localName==f:u.nodeType==3)){e=u,r[d]=null;break}}if(e==null){if(f==null)return document.createTextNode(g);e=document.createElementNS(o,f,g.is&&g),c&&(k.__m&&k.__m(t,r),c=!1),r=null}if(f==null)_===g||c&&e.data==g||(e.data=g);else{if(r=r&&pe.call(e.childNodes),_=n.props||se,!c&&r!=null)for(_={},d=0;d<e.attributes.length;d++)_[(u=e.attributes[d]).name]=u.value;for(d in _)if(u=_[d],d!="children"){if(d=="dangerouslySetInnerHTML")l=u;else if(!(d in g)){if(d=="value"&&"defaultValue"in g||d=="checked"&&"defaultChecked"in g)continue;ae(e,d,null,u,o)}}for(d in g)u=g[d],d=="children"?p=u:d=="dangerouslySetInnerHTML"?m=u:d=="value"?v=u:d=="checked"?y=u:c&&typeof u!="function"||_[d]===u||ae(e,d,u,_[d],o);if(m)c||l&&(m.__html==l.__html||m.__html==e.innerHTML)||(e.innerHTML=m.__html),t.__k=[];else if(l&&(e.innerHTML=""),ot(t.type=="template"?e.content:e,re(p)?p:[p],t,n,i,f=="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,a,r?r[0]:n.__k&&ne(n,0),c,h),r!=null)for(d=r.length;d--;)$e(r[d]);c||(d="value",f=="progress"&&v==null?e.removeAttribute("value"):v!=null&&(v!==e[d]||f=="progress"&&!v||f=="option"&&v!=_[d])&&ae(e,d,v,_[d],o),d="checked",y!=null&&y!=e[d]&&ae(e,d,y,_[d],o))}return e}function xe(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(o){k.__e(o,n)}}function ct(e,t,n){var i,o;if(k.unmount&&k.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||xe(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){k.__e(r,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&ct(i[o],t,n||typeof e.type!="function");n||$e(e.__e),e.__c=e.__=e.__e=void 0}function Zt(e,t,n){return this.constructor(e,n)}function Xt(e,t,n){var i,o,r,a;t==document&&(t=document.documentElement),k.__&&k.__(e,t),o=(i=!1)?null:t.__k,r=[],a=[],Ce(t,e=t.__k=we(te,null,[e]),o||se,se,t.namespaceURI,o?null:t.firstChild?pe.call(t.childNodes):null,r,o?o.__e:t.firstChild,i,a),at(r,e,a)}pe=st.slice,k={__e:function(e,t,n,i){for(var o,r,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),a=o.__d),a)return o.__E=o}catch(c){e=c}throw e}},Xe=0,K.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=J({},this.state),typeof e=="function"&&(e=e(J({},n),this.props)),e&&J(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Te(this))},K.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Te(this))},K.prototype.render=te,Z=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(e,t){return e.__v.__b-t.__v.__b},ue.__r=0,nt=/(PointerCapture)$|Capture$/i,ke=0,ge=We(!1),ye=We(!0);var en=0;function s(e,t,n,i,o,r){t||(t={});var a,c,h=t;if("ref"in h)for(c in h={},t)c=="ref"?a=t[c]:h[c]=t[c];var d={type:e,props:h,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--en,__i:-1,__u:0,__source:o,__self:r};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)h[c]===void 0&&(h[c]=a[c]);return k.vnode&&k.vnode(d),d}var ie,W,fe,Me,oe=0,dt=[],A=k,Ae=A.__b,Ue=A.__r,Le=A.diffed,Oe=A.__c,je=A.unmount,Fe=A.__;function Ee(e,t){A.__h&&A.__h(W,e,oe||t),oe=0;var n=W.__H||(W.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function R(e){return oe=1,tn(_t,e)}function tn(e,t,n){var i=Ee(ie++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):_t(void 0,t),function(c){var h=i.__N?i.__N[0]:i.__[0],d=i.t(h,c);h!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=W,!W.__f)){var o=function(c,h,d){if(!i.__c.__H)return!0;var m=i.__c.__H.__.filter(function(p){return!!p.__c});if(m.every(function(p){return!p.__N}))return!r||r.call(this,c,h,d);var l=i.__c.props!==c;return m.forEach(function(p){if(p.__N){var u=p.__[0];p.__=p.__N,p.__N=void 0,u!==p.__[0]&&(l=!0)}}),r&&r.call(this,c,h,d)||l};W.__f=!0;var r=W.shouldComponentUpdate,a=W.componentWillUpdate;W.componentWillUpdate=function(c,h,d){if(this.__e){var m=r;r=void 0,o(c,h,d),r=m}a&&a.call(this,c,h,d)},W.shouldComponentUpdate=o}return i.__N||i.__}function G(e,t){var n=Ee(ie++,3);!A.__s&&ut(n.__H,t)&&(n.__=e,n.u=t,W.__H.__h.push(n))}function ht(e){return oe=5,X(function(){return{current:e}},[])}function X(e,t){var n=Ee(ie++,7);return ut(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function j(e,t){return oe=8,X(function(){return e},t)}function nn(){for(var e;e=dt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(he),e.__H.__h.forEach(Ne),e.__H.__h=[]}catch(t){e.__H.__h=[],A.__e(t,e.__v)}}A.__b=function(e){W=null,Ae&&Ae(e)},A.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Fe&&Fe(e,t)},A.__r=function(e){Ue&&Ue(e),ie=0;var t=(W=e.__c).__H;t&&(fe===W?(t.__h=[],W.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(he),t.__h.forEach(Ne),t.__h=[],ie=0)),fe=W},A.diffed=function(e){Le&&Le(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(dt.push(t)!==1&&Me===A.requestAnimationFrame||((Me=A.requestAnimationFrame)||sn)(nn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),fe=W=null},A.__c=function(e,t){t.some(function(n){try{n.__h.forEach(he),n.__h=n.__h.filter(function(i){return!i.__||Ne(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],A.__e(i,n.__v)}}),Oe&&Oe(e,t)},A.unmount=function(e){je&&je(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{he(i)}catch(o){t=o}}),n.__H=void 0,t&&A.__e(t,n.__v))};var He=typeof requestAnimationFrame=="function";function sn(e){var t,n=function(){clearTimeout(i),He&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);He&&(t=requestAnimationFrame(n))}function he(e){var t=W,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),W=t}function Ne(e){var t=W;e.__c=e.__(),W=t}function ut(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function _t(e,t){return typeof t=="function"?t(e):t}function on(e,t){for(var n in t)e[n]=t[n];return e}function Be(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Ve(e,t){this.props=e,this.context=t}(Ve.prototype=new K).isPureReactComponent=!0,Ve.prototype.shouldComponentUpdate=function(e,t){return Be(this.props,e)||Be(this.state,t)};var ze=k.__b;k.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ze&&ze(e)};var rn=k.__e;k.__e=function(e,t,n,i){if(e.then){for(var o,r=t;r=r.__;)if((o=r.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}rn(e,t,n,i)};var qe=k.unmount;function pt(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=on({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return pt(i,t,n)})),e}function vt(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return vt(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function me(){this.__u=0,this.o=null,this.__b=null}function ft(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function le(){this.i=null,this.l=null}k.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qe&&qe(e)},(me.prototype=new K).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var o=ft(i.__v),r=!1,a=function(){r||(r=!0,n.__R=null,o?o(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__a){var h=i.state.__a;i.__v.__k[0]=vt(h,h.__c.__P,h.__c.__O)}var d;for(i.setState({__a:i.__b=null});d=i.o.pop();)d.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},me.prototype.componentWillUnmount=function(){this.o=[]},me.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=pt(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__a&&we(te,null,e.fallback);return o&&(o.__u&=-33),[we(te,null,t.__a?null:e.children),o]};var Je=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(le.prototype=new K).__a=function(e){var t=this,n=ft(t.__v),i=t.l.get(e);return i[0]++,function(o){var r=function(){t.props.revealOrder?(i.push(o),Je(t,e,i)):o()};n?n(r):r()}},le.prototype.render=function(e){this.i=null,this.l=new Map;var t=_e(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},le.prototype.componentDidUpdate=le.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Je(e,n,t)})};var an=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,ln=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,cn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,dn=/[A-Z0-9]/g,hn=typeof document!="undefined",un=function(e){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};K.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(K.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ke=k.event;function _n(){}function pn(){return this.cancelBubble}function vn(){return this.defaultPrevented}k.event=function(e){return Ke&&(e=Ke(e)),e.persist=_n,e.isPropagationStopped=pn,e.isDefaultPrevented=vn,e.nativeEvent=e};var fn={enumerable:!1,configurable:!0,get:function(){return this.class}},Ge=k.vnode;k.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,o={},r=i.indexOf("-")===-1;for(var a in n){var c=n[a];if(!(a==="value"&&"defaultValue"in n&&c==null||hn&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var h=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&c===!0?c="":h==="translate"&&c==="no"?c=!1:h[0]==="o"&&h[1]==="n"?h==="ondoubleclick"?a="ondblclick":h!=="onchange"||i!=="input"&&i!=="textarea"||un(n.type)?h==="onfocus"?a="onfocusin":h==="onblur"?a="onfocusout":cn.test(a)&&(a=h):h=a="oninput":r&&ln.test(a)?a=a.replace(dn,"-$&").toLowerCase():c===null&&(c=void 0),h==="oninput"&&o[a=h]&&(a="oninputCapture"),o[a]=c}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=_e(n.children).forEach(function(d){d.props.selected=o.value.indexOf(d.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=_e(n.children).forEach(function(d){d.props.selected=o.multiple?o.defaultValue.indexOf(d.props.value)!=-1:o.defaultValue==d.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",fn)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=an,Ge&&Ge(e)};var Ye=k.__r;k.__r=function(e){Ye&&Ye(e),e.__c};var Qe=k.diffed;k.diffed=function(e){Qe&&Qe(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};var Ze={},mn="@vercel/analytics",gn="1.5.0",yn=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function mt(){return typeof window!="undefined"}function gt(){try{const e="production"}catch(e){}return"production"}function wn(e="auto"){if(e==="auto"){window.vam=gt();return}window.vam=e}function bn(){return(mt()?window.vam:gt())||"production"}function Se(){return bn()==="development"}function Nn(e){return e.scriptSrc?e.scriptSrc:Se()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Sn(e={debug:!0}){var t;if(!mt())return;wn(e.mode),yn(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=Nn(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const i=document.createElement("script");i.src=n,i.defer=!0,i.dataset.sdkn=mn+(e.framework?`/${e.framework}`:""),i.dataset.sdkv=gn,e.disableAutoTrack&&(i.dataset.disableAutoTrack="1"),e.endpoint?i.dataset.endpoint=e.endpoint:e.basePath&&(i.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(i.dataset.dsn=e.dsn),i.onerror=()=>{const o=Se()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${o}`)},Se()&&e.debug===!1&&(i.dataset.debug="false"),document.head.appendChild(i)}function kn({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function $n(){if(!(typeof process=="undefined"||typeof Ze=="undefined"))return Ze.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Cn(e){return G(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),G(()=>{var t;Sn(B(B({framework:e.framework||"react",basePath:(t=e.basePath)!=null?t:$n()},e.route!==void 0&&{disableAutoTrack:!0}),e))},[]),G(()=>{e.route&&e.path&&kn({route:e.route,path:e.path})},[e.route,e.path]),null}function xn({title:e,viewMode:t,currentWeek:n,currentUnit:i,currentCourse:o,onSideNavToggle:r,onCalendarToggle:a,onVoiceToggle:c}){const h=()=>{switch(t){case"course":return o==null?void 0:o.title;case"unit":return i==null?void 0:i.title;case"week":default:return n==null?void 0:n.title}},d=()=>{switch(t){case"course":return"Course View";case"unit":return"Unit View";case"week":default:return""}};return s("header",{className:"header",children:s("div",{className:"header-content",children:[s("button",{className:"nav-toggle",onClick:r,"aria-label":"Toggle navigation",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[s("path",{d:"M3 12h18m-9 5V7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3 6h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),s("div",{className:"title-section",children:[s("h1",{className:"app-title",children:e}),h()&&s("h2",{className:"subtitle",children:h()}),d()&&s("span",{className:"view-mode-label",children:d()})]}),s("div",{className:"header-actions",children:[s("button",{className:"calendar-toggle",onClick:a,"aria-label":"Toggle calendar view",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),s("button",{className:"voice-toggle",onClick:c,"aria-label":"Select voice",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("path",{d:"M12 3v18"}),s("path",{d:"M17 8v8"}),s("path",{d:"M7 8v8"}),s("path",{d:"M4 12h16"})]})})]})]})})}function ee({state:e,onClick:t,size:n="medium",disabled:i=!1}){const o=()=>{switch(e){case"selected":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12",stroke:"currentColor",strokeWidth:"2",fill:"none"})});case"partial":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"currentColor",strokeWidth:"2"})});case"none":default:return null}},r=()=>{switch(e){case"selected":return"Fully selected";case"partial":return"Partially selected";case"none":default:return"Not selected"}};return s("button",{className:`selection-bubble ${e} ${n} ${i?"disabled":""}`,onClick:i?void 0:t,disabled:i,"aria-label":r(),title:r(),children:o()})}function En({isOpen:e,config:t,currentWeekId:n,currentUnitId:i,currentCourseId:o,selectionStates:r,onWeekSelect:a,onUnitSelect:c,onCourseSelect:h,onWeekToggle:d,onUnitToggle:m,onCourseToggle:l,onClose:p,onVoiceToggle:u}){const[v,y]=R(new Set([o])),[_,g]=R(new Set([i]));if(!t||!t.courses||t.courses.length===0)return null;const f=N=>{try{const $=`session.vocabReviewed.${N}`,O=`session.phraseReviewed.${N}`,P=JSON.parse(localStorage.getItem($)||"[]"),E=JSON.parse(localStorage.getItem(O)||"[]");return{vocabReviewed:P,phraseReviewed:E}}catch($){return{vocabReviewed:[],phraseReviewed:[]}}},S=N=>{if(!N.vocab||!N.phrases)return!1;const $=f(N.id),O=N.vocab.map(b=>b.id),P=N.phrases.map(b=>b.id),E=O.every(b=>$.vocabReviewed.includes(b)),H=P.every(b=>$.phraseReviewed.includes(b));return E&&H&&O.length>0&&P.length>0},w=N=>!N.weeks||N.weeks.length===0?!1:N.weeks.every($=>S($)),x=N=>!N.units||N.units.length===0?!1:N.units.every($=>w($)),F=N=>{const $=new Set(v);$.has(N)?$.delete(N):$.add(N),y($)},L=N=>{const $=new Set(_);$.has(N)?$.delete(N):$.add(N),g($)};return s("nav",{className:`side-nav ${e?"open":""}`,children:[s("div",{className:"side-nav-header",children:[s("h3",{children:"Navigation"}),s("button",{className:"close-button",onClick:p,"aria-label":"Close navigation",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"nav-list",children:t.courses.map(N=>{var O,P;const $=v.has(N.id);return s("div",{className:"nav-section",children:[s("button",{className:`nav-item course-item ${$?"current":""} has-children`,onClick:()=>F(N.id),"aria-expanded":$,children:[s("div",{className:"nav-item-content",children:[s("h4",{className:"nav-item-title",children:N.title}),s("p",{className:"nav-item-meta",children:["Course • ",((O=N.units)==null?void 0:O.length)||0," units"]})]}),s("div",{className:"nav-item-actions",children:[s(ee,{state:((P=r.courses)==null?void 0:P[N.id])||"none",onClick:E=>{E.stopPropagation(),l(N.id)},size:"medium"}),x(N)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),$&&N.units&&s("div",{className:"nav-children",children:N.units.map(E=>{var b,C;const H=_.has(E.id);return s("div",{className:"nav-subsection",children:[s("button",{className:`nav-item unit-item ${H?"current":""} has-children`,onClick:()=>L(E.id),"aria-expanded":H,children:[s("div",{className:"nav-item-content",children:[s("h5",{className:"nav-item-title",children:E.title}),s("p",{className:"nav-item-meta",children:["Unit • ",((b=E.weeks)==null?void 0:b.length)||0," weeks"]})]}),s("div",{className:"nav-item-actions",children:[s(ee,{state:((C=r.units)==null?void 0:C[E.id])||"none",onClick:D=>{D.stopPropagation(),m(E.id)},size:"medium"}),w(E)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),H&&E.weeks&&s("div",{className:"nav-children",children:E.weeks.map(D=>{var I;return s("button",{className:`nav-item week-item ${n===D.id?"current":""}`,onClick:()=>d(D.id),children:[s("div",{className:"nav-item-content",children:[s("h6",{className:"nav-item-title",children:D.title}),s("p",{className:"nav-item-meta",children:Rn(D)})]}),s("div",{className:"nav-item-actions",children:[s(ee,{state:(I=r.weeks)!=null&&I[D.id]?"selected":"none",onClick:M=>{M.stopPropagation(),d(D.id)},size:"small"}),S(D)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},D.id)})})]},E.id)})})]},N.id)})}),s("div",{className:"side-nav-footer",children:s("button",{className:"voice-select-footer",onClick:u,children:[s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:"margin-right:6px",children:[s("path",{d:"M12 3v18"}),s("path",{d:"M17 8v8"}),s("path",{d:"M7 8v8"}),s("path",{d:"M4 12h16"})]}),"Select Voice"]})})]})}function Rn(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),i=t.getMonth()===n.getMonth(),o=new Intl.DateTimeFormat("en-US",{month:"short"}),r=o.format(t),a=o.format(n),c=t.getFullYear();return i?`${r} ${t.getDate()}–${n.getDate()}, ${c}`:`${r} ${t.getDate()} – ${a} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}function Pn(e){const[t,n]=R(!1),[i,o]=R(null),r=ht(null),a=j(()=>{r.current&&(r.current.pause(),r.current=null),n(!1)},[]),c=j((l,p="es-ES")=>Q(this,null,function*(){return new Promise((u,v)=>{if(!window.speechSynthesis){v(new Error("Speech synthesis not supported"));return}window.speechSynthesis.cancel();const y=new SpeechSynthesisUtterance(l),_=localStorage.getItem("prefs.tts.voice"),g=localStorage.getItem("prefs.tts.voiceLang")||p,f=()=>{const S=window.speechSynthesis.getVoices()||[];let w=null;_&&(w=S.find(x=>x.name===_)),w||(w=S.find(x=>x.lang===g)),w||(w=S.find(x=>x.lang.startsWith("es"))),w||(w=S.find(x=>x.name.toLowerCase().includes("spanish"))),w?(y.voice=w,y.lang=w.lang):y.lang=g};if(window.speechSynthesis.getVoices().length===0){const S=()=>{f(),window.speechSynthesis.removeEventListener("voiceschanged",S),window.speechSynthesis.speak(y)};window.speechSynthesis.addEventListener("voiceschanged",S)}else f();y.rate=.8,y.pitch=1.1,y.volume=1,y.onstart=()=>{n(!0),o(null)},y.onend=()=>{n(!1),u()},y.onerror=S=>{n(!1),v(new Error(`Speech synthesis error: ${S.error}`))},window.speechSynthesis.getVoices().length>0&&window.speechSynthesis.speak(y)})}),[]),h=j(l=>Q(this,null,function*(){return new Promise((p,u)=>{a();const v=new Audio(l);r.current=v,v.onloadstart=()=>{n(!0),o(null)},v.onended=()=>{n(!1),r.current=null,p()},v.onerror=()=>{n(!1),r.current=null,u(new Error("Failed to load audio file"))},v.play().catch(u)})}),[a]),d=j((l,p)=>Q(this,null,function*(){var u,v,y,_;try{if(o(null),a(),(u=window.speechSynthesis)==null||u.cancel(),p&&p.trim()&&(e!=null&&e.preferMp3||!((v=e==null?void 0:e.tts)!=null&&v.enabled)))try{yield h(p);return}catch(g){console.warn("Audio file failed, falling back to TTS:",g)}if(((y=e==null?void 0:e.tts)==null?void 0:y.enabled)!==!1)yield c(l,((_=e==null?void 0:e.tts)==null?void 0:_.voiceHint)||"es-ES");else throw new Error("No audio playback method available")}catch(g){throw console.error("Failed to play phrase:",g),o(g.message),n(!1),g}}),[e,h,c,a]),m=j(()=>{var l;a(),(l=window.speechSynthesis)==null||l.cancel(),n(!1),o(null)},[a]);return{playPhrase:d,isPlaying:t,error:i,cleanup:m}}function In(e){const t=[e.spanish.toLowerCase()];if(e.conjugations&&Object.values(e.conjugations).forEach(n=>{typeof n=="object"&&Object.values(n).forEach(i=>{typeof i=="string"&&t.push(i.toLowerCase())})}),e.type==="noun"){const n=e.spanish.toLowerCase();n.endsWith("a")?t.push(n.slice(0,-1)+"as"):n.endsWith("o")?t.push(n.slice(0,-1)+"os"):n.endsWith("e")?t.push(n+"s"):n.endsWith("l")||n.endsWith("r")||n.endsWith("n")?t.push(n+"es"):t.push(n+"s")}if(e.type==="adjective"){const n=e.spanish.toLowerCase();if(n.endsWith("o")){const i=n.slice(0,-1);t.push(i+"a"),t.push(i+"os"),t.push(i+"as")}else if(n.endsWith("a")){const i=n.slice(0,-1);t.push(i+"o"),t.push(i+"as"),t.push(i+"os")}else n.endsWith("s")||(t.push(n+"s"),(n.endsWith("l")||n.endsWith("r")||n.endsWith("n"))&&t.push(n+"es"))}return[...new Set(t.filter(n=>n&&n.trim()))]}function Tn(e,t){if(!t||t.length===0)return e;let n=e;const i=new Map;return t.forEach(r=>{In(r).forEach(c=>{(!i.has(c)||c.length>i.get(c).spanish.length)&&i.set(c,r)})}),Array.from(i.keys()).sort((r,a)=>a.length-r.length).forEach(r=>{const a=i.get(r),c=r.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&"),h=new RegExp(`\\\\b${c}\\\\b`,"gi");n=n.replace(h,d=>`<mark class="vocab-highlight" data-vocab-id="${a.id}" title="${a.english}">${d}</mark>`)}),n}const q={SPANISH:"spanish",ENGLISH:"english",CONJUGATIONS:"conjugations"};function Dn({type:e,item:t,isReviewed:n,onToggleReviewed:i,audioConfig:o,vocabList:r}){const[a,c]=R(q.SPANISH),{playPhrase:h,isPlaying:d}=Pn(o),m=e==="vocab"&&t.conjugations&&Object.keys(t.conjugations).length>0,l=X(()=>e!=="phrase"?"":Tn(t.spanish,r||[]),[e,t.spanish,r]),p=()=>{a===q.SPANISH?c(q.ENGLISH):a===q.ENGLISH&&m?c(q.CONJUGATIONS):c(q.SPANISH)},u=_=>Q(this,null,function*(){_.stopPropagation();try{yield h(t.spanish,t.audioUrl)}catch(g){console.warn(g)}}),v=_=>{_.stopPropagation(),i()},y=()=>e==="vocab"?a===q.ENGLISH?s("div",{className:"card-content english",children:[s("div",{className:"word",children:t.english}),s("div",{className:"word-type",children:t.type})]}):a===q.CONJUGATIONS&&m?s("div",{className:"card-content conjugations",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"conjugation-grid",children:Object.entries(t.conjugations).map(([_,g])=>s("div",{className:"tense-group",children:[s("div",{className:"tense-title",children:_}),s("div",{className:"conjugation-forms",children:Object.entries(g).map(([f,S])=>s("div",{className:"conjugation-item",children:[s("span",{className:"person",children:[f,":"]}),s("span",{className:"form",children:S})]},f))})]},_))})]}):s("div",{className:"card-content spanish",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"word-type",children:t.type})]}):a===q.ENGLISH?s("div",{className:"card-content english",children:s("div",{className:"phrase-text",children:t.english})}):s("div",{className:"card-content spanish",children:s("div",{className:"phrase-text",dangerouslySetInnerHTML:{__html:l}})});return s("div",{className:"study-card-wrapper",children:s("div",{className:`study-card ${e} ${a} ${n?"reviewed":""}`,onClick:p,role:"button",tabIndex:0,onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),p())},"aria-label":`${e==="vocab"?"Vocabulary":"Phrase"} card ${t.spanish}`,children:[y(),s("div",{className:"right-buttons",children:[s("button",{className:`play-button ${d?"playing":""}`,disabled:d,onClick:u,"aria-label":"Play audio",children:d?s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[s("rect",{x:"6",y:"4",width:"4",height:"16"}),s("rect",{x:"14",y:"4",width:"4",height:"16"})]}):s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("polygon",{points:"5,3 19,12 5,21"})})}),s("button",{className:`review-button ${n?"active":""}`,onClick:v,"aria-pressed":n,"aria-label":n?"Unmark reviewed":"Mark reviewed",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12"})})})]})]})})}function ce({type:e,items:t=[],reviewedIds:n=[],onToggleReviewed:i,audioConfig:o,vocabList:r}){return t.length?s("div",{className:`study-collection ${e}`,children:t.map(a=>s(Dn,{type:e,item:a,isReviewed:n.includes(a.id),onToggleReviewed:()=>i(a.id),audioConfig:o,vocabList:r},`${a.weekId}-${e}-${a.id}`))}):s("div",{className:"empty-state",children:s("p",{children:["No ",e==="vocab"?"vocabulary":"phrases"," items"]})})}function Wn({weeks:e,viewMode:t,currentWeek:n,currentUnit:i,currentCourse:o,session:r,onMarkReviewed:a,audioConfig:c,onClearSelection:h}){var _,g;const[d,m]=R("vocab"),[l,p]=R(!1);if(G(()=>{if(!localStorage.getItem("hint.tapCycleShown")){p(!0);const f=setTimeout(()=>{p(!1),localStorage.setItem("hint.tapCycleShown","1")},2500);return()=>clearTimeout(f)}},[]),!e||e.length===0)return null;const u=X(()=>{const f=[],S=[];return e.forEach(w=>{w.vocab&&w.vocab.forEach(x=>{f.push(z(B({},x),{weekId:w.id,weekTitle:w.title,unitId:w.unitId,unitTitle:w.unitTitle}))}),w.phrases&&w.phrases.forEach(x=>{S.push(z(B({},x),{weekId:w.id,weekTitle:w.title,unitId:w.unitId,unitTitle:w.unitTitle}))})}),{vocab:f,phrases:S}},[e]),v=e.length===1?e[0]:null,y={vocabReviewed:((_=r.vocabReviewed)==null?void 0:_.length)||0,phraseReviewed:((g=r.phraseReviewed)==null?void 0:g.length)||0,vocabTotal:u.vocab.length,phraseTotal:u.phrases.length};return s("div",{className:"week-view",children:[v?s("div",{className:"hero",children:[s("h1",{className:"hero-title",children:v.title}),s("div",{className:"hero-progress",children:[s("div",{className:"counts",children:[y.vocabReviewed,"/",y.vocabTotal," words · ",y.phraseReviewed,"/",y.phraseTotal," phrases"]}),s("div",{className:"linear-track","aria-label":"Overall progress",children:s("div",{className:"linear-fill",style:{width:`${(y.vocabReviewed+y.phraseReviewed)/Math.max(1,y.vocabTotal+y.phraseTotal)*100}%`}})})]}),s("div",{className:"hero-actions",children:s("button",{className:"primary hero-cta",children:["Study ",v.title]})})]}):s("div",{className:"selection-chips","aria-label":"Selected weeks",children:[s("span",{className:"chips-label",children:"Selected:"}),s("div",{className:"chips-group",children:e.map(f=>s("span",{className:"chip",children:f.title},f.id))}),s("button",{className:"clear-chips",onClick:h,children:"Clear"})]}),s("div",{className:"tab-rail",children:[s("button",{className:`pill-tab ${d==="vocab"?"active":""}`,onClick:()=>m("vocab"),children:["Vocabulary ",s("span",{className:"count",children:u.vocab.length})]}),s("button",{className:`pill-tab ${d==="phrases"?"active":""}`,onClick:()=>m("phrases"),children:["Phrases ",s("span",{className:"count",children:u.phrases.length})]})]}),l&&s("div",{className:"tap-hint",children:"tap to cycle"}),s("div",{className:"tab-panels",children:[s("div",{className:`panel ${d==="vocab"?"active":""}`,children:d==="vocab"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(f=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:f.title}),s(ce,{type:"vocab",items:u.vocab.filter(S=>S.weekId===f.id),reviewedIds:r.vocabReviewed||[],onToggleReviewed:S=>a(S,"vocab"),audioConfig:c,vocabList:u.vocab})]},f.id))}):s(ce,{type:"vocab",items:u.vocab,reviewedIds:r.vocabReviewed||[],onToggleReviewed:f=>a(f,"vocab"),audioConfig:c,vocabList:u.vocab}))}),s("div",{className:`panel ${d==="phrases"?"active":""}`,children:d==="phrases"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(f=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:f.title}),s(ce,{type:"phrase",items:u.phrases.filter(S=>S.weekId===f.id),reviewedIds:r.phraseReviewed||[],onToggleReviewed:S=>a(S,"phrase"),audioConfig:c,vocabList:u.vocab})]},f.id))}):s(ce,{type:"phrase",items:u.phrases,reviewedIds:r.phraseReviewed||[],onToggleReviewed:f=>a(f,"phrase"),audioConfig:c,vocabList:u.vocab}))})]})]})}function Mn({isOpen:e,weeks:t,currentWeekId:n,onWeekSelect:i,onClose:o}){const[r,a]=R(new Date),c=X(()=>{if(!t||t.length===0)return{weeks:[],monthName:"",year:""};const d=r.toLocaleDateString("en-US",{month:"long"}),m=r.getFullYear();return{weeks:t.filter(p=>{if(!p.startDate)return!1;const u=new Date(p.startDate);return u.getMonth()===r.getMonth()&&u.getFullYear()===r.getFullYear()}).sort((p,u)=>new Date(p.startDate)-new Date(u.startDate)),monthName:d,year:m.toString()}},[t,r]),h=d=>{a(m=>{const l=new Date(m);return l.setMonth(m.getMonth()+d),l})};return!t||t.length===0?null:s("div",{className:`calendar-nav ${e?"open":""}`,children:[s("div",{className:"calendar-header",children:[s("h3",{children:"Calendar"}),s("button",{className:"close-button",onClick:o,"aria-label":"Close calendar",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"calendar-content",children:[s("div",{className:"month-navigation",children:[s("button",{className:"nav-arrow",onClick:()=>h(-1),"aria-label":"Previous month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"15,18 9,12 15,6"})})}),s("h4",{className:"month-title",children:[c.monthName," ",c.year]}),s("button",{className:"nav-arrow",onClick:()=>h(1),"aria-label":"Next month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"9,6 15,12 9,18"})})})]}),s("div",{className:"calendar-weeks",children:c.weeks.length>0?c.weeks.map(d=>s("button",{className:`calendar-week-item ${n===d.id?"active":""}`,onClick:()=>i(d.id),children:[s("div",{className:"week-info",children:[s("h5",{className:"week-title",children:d.title}),s("p",{className:"week-dates",children:An(d)})]}),n===d.id&&s("div",{className:"active-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]},d.id)):s("div",{className:"no-weeks",children:s("p",{children:["No weeks available for ",c.monthName]})})})]})]})}function An(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),i=t.getMonth()===n.getMonth(),o=new Intl.DateTimeFormat("en-US",{month:"short"}),r=o.format(t),a=o.format(n),c=t.getFullYear();return i?`${r} ${t.getDate()}–${n.getDate()}, ${c}`:`${r} ${t.getDate()} – ${a} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}function Un({weeks:e=[],currentWeekId:t,session:n,onReset:i}){var p,u;if(!e||e.length===0||!n)return null;let o=0,r=0;e.forEach(v=>{var y,_;o+=((y=v.vocab)==null?void 0:y.length)||0,r+=((_=v.phrases)==null?void 0:_.length)||0});const a=((p=n.vocabReviewed)==null?void 0:p.length)||0,c=((u=n.phraseReviewed)==null?void 0:u.length)||0;if(!(o+r>0))return null;const d=o?a/o*100:0,m=r?c/r*100:0,l=a>0||c>0;return s("div",{className:"progress-bar-container mini",children:s("div",{className:"progress-content split",children:[s("div",{className:"counter-group","aria-label":"Vocabulary progress",children:[s("span",{className:"counter-label",children:["Words ",a,"/",o]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${d}%`}})})]}),s("div",{className:"counter-group","aria-label":"Phrases progress",children:[s("span",{className:"counter-label",children:["Phrases ",c,"/",r]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${m}%`}})})]}),l&&s("button",{className:"reset-button link",onClick:i,"aria-label":"Reset session progress",children:"Reset"})]})})}function Ln({config:e,currentWeekId:t,currentUnitId:n,currentCourseId:i,selectionStates:o,onWeekSelect:r,onUnitSelect:a,onCourseSelect:c,onWeekToggle:h,onUnitToggle:d,onCourseToggle:m}){var $,O,P,E,H;const[l,p]=R(new Set((($=e.courses)==null?void 0:$.map(b=>b.id))||[])),u=(e.courses||[]).flatMap(b=>(b.units||[]).map(C=>C.id)),[v,y]=R(new Set(u));if(!e||!e.courses||e.courses.length===0)return s("div",{className:"full-nav-view",children:s("div",{className:"empty-state",children:[s("h2",{children:"No Content Available"}),s("p",{children:"No courses or weeks are configured."})]})});const _=b=>{try{return{vocabReviewed:JSON.parse(localStorage.getItem(`session.vocabReviewed.${b}`)||"[]"),phraseReviewed:JSON.parse(localStorage.getItem(`session.phraseReviewed.${b}`)||"[]")}}catch(C){return{vocabReviewed:[],phraseReviewed:[]}}},g=b=>{if(!b.vocab||!b.phrases)return!1;const C=_(b.id),D=b.vocab.map(M=>M.id),I=b.phrases.map(M=>M.id);return D.every(M=>C.vocabReviewed.includes(M))&&I.every(M=>C.phraseReviewed.includes(M))&&D.length>0&&I.length>0},f=b=>{var C;return((C=b.weeks)==null?void 0:C.length)&&b.weeks.every(g)},S=b=>{var C;return((C=b.units)==null?void 0:C.length)&&b.units.every(f)},w=b=>{const C=new Set(l);C.has(b)?C.delete(b):C.add(b),p(C)},x=b=>{const C=new Set(v);C.has(b)?C.delete(b):C.add(b),y(C)};(O=e.weeks)==null||O.find(b=>b.id===e.app.current_week_id);const L=(()=>{var b,C;for(const D of e.courses)for(const I of D.units||[])for(const M of I.weeks||[]){const Y=_(M.id),U=((b=M.vocab)==null?void 0:b.map(V=>V.id))||[],T=((C=M.phrases)==null?void 0:C.map(V=>V.id))||[];if(!(U.length>0&&T.length>0&&U.every(V=>Y.vocabReviewed.includes(V))&&T.every(V=>Y.phraseReviewed.includes(V))))return M}return null})()||((P=e.weeks)==null?void 0:P[0]);let N={vocab:0,phrases:0};return L&&(N.vocab=((E=L.vocab)==null?void 0:E.length)||0,N.phrases=((H=L.phrases)==null?void 0:H.length)||0),s("div",{className:"full-nav-view",children:[L&&s("div",{className:"landing-hero",children:s("div",{className:"hero-left",children:[s("h1",{className:"hero-h1",children:L.title}),s("div",{className:"hero-progress-line","aria-label":"Week item counts",children:s("span",{children:[N.vocab," words · ",N.phrases," phrases"]})}),s("button",{className:"primary hero-start",onClick:()=>r(L.id),children:["Study ",L.title]})]})}),s("div",{className:"nav-content",children:e.courses.map(b=>{var C,D;return s("div",{className:"course-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item course-item has-children ${l.has(b.id)?"current":""}`,onClick:()=>w(b.id),"aria-expanded":l.has(b.id),children:[s("div",{className:"section-content",children:[s("h3",{className:"section-title",children:b.title}),s("p",{className:"section-meta",children:["Units ",((C=b.units)==null?void 0:C.length)||0]})]}),s("div",{className:"section-actions",children:[s(ee,{state:((D=o.courses)==null?void 0:D[b.id])||"none",onClick:I=>{I.stopPropagation(),m(b.id)},size:"medium"}),S(b)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),l.has(b.id)&&b.units&&s("div",{className:"section-children",children:b.units.map(I=>{var M,Y;return s("div",{className:"unit-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item unit-item has-children ${v.has(I.id)?"current":""}`,onClick:()=>x(I.id),"aria-expanded":v.has(I.id),children:[s("div",{className:"section-content",children:[s("h4",{className:"section-title",children:I.title}),s("p",{className:"section-meta",children:["Weeks ",((M=I.weeks)==null?void 0:M.length)||0]})]}),s("div",{className:"section-actions",children:[s(ee,{state:((Y=o.units)==null?void 0:Y[I.id])||"none",onClick:U=>{U.stopPropagation(),d(I.id)},size:"medium"}),f(I)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),v.has(I.id)&&I.weeks&&s("div",{className:"section-children",children:s("div",{className:"weeks-grid",children:I.weeks.map(U=>{var T,ve;return s("button",{className:`week-card ${t===U.id?"current":""} ${(T=o.weeks)!=null&&T[U.id]?"selected":""}`,onClick:()=>h(U.id),children:[s("div",{className:"week-card-content",children:[s("h5",{className:"week-title",children:U.title}),s("p",{className:"week-dates",children:On(U)})]}),s("div",{className:"week-actions",children:[s(ee,{state:(ve=o.weeks)!=null&&ve[U.id]?"selected":"none",onClick:V=>{V.stopPropagation(),h(U.id)},size:"small"}),g(U)&&s("div",{className:"reviewed-indicator small",children:s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},U.id)})})})]},I.id)})})]},b.id)})})]})}function On(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),i=t.getMonth()===n.getMonth(),o=new Intl.DateTimeFormat("en-US",{month:"short"}),r=o.format(t),a=o.format(n),c=t.getFullYear();return i?`${r} ${t.getDate()}–${n.getDate()}, ${c}`:`${r} ${t.getDate()} – ${a} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}const yt="2025-08-04",wt="spanish-1",bt="unit-1-basics",Nt="Week 0: Saludos",St="2025-08-04",kt="2025-08-10",$t=[{id:"hola",spanish:"hola",english:"hello",type:"interjection"},{id:"adios",spanish:"adiós",english:"goodbye",type:"interjection"},{id:"ser",spanish:"ser",english:"to be (essential)",type:"verb",conjugations:{present:{yo:"soy",tú:"eres","él/ella":"es",nosotros:"somos",vosotros:"sois",ellos:"son"},preterite:{yo:"fui",tú:"fuiste","él/ella":"fue",nosotros:"fuimos",vosotros:"fuisteis",ellos:"fueron"}}},{id:"estar",spanish:"estar",english:"to be (temporary)",type:"verb",conjugations:{present:{yo:"estoy",tú:"estás","él/ella":"está",nosotros:"estamos",vosotros:"estáis",ellos:"están"}}}],Ct=[{id:"p1",spanish:"Hola, ¿cómo estás?",english:"Hi, how are you?",audioUrl:""},{id:"p2",spanish:"Yo soy estudiante.",english:"I am a student.",audioUrl:""},{id:"p3",spanish:"Adiós, hasta mañana.",english:"Goodbye, see you tomorrow.",audioUrl:""}],jn={id:yt,courseId:wt,unitId:bt,title:Nt,startDate:St,endDate:kt,vocab:$t,phrases:Ct},Fn=Object.freeze(Object.defineProperty({__proto__:null,courseId:wt,default:jn,endDate:kt,id:yt,phrases:Ct,startDate:St,title:Nt,unitId:bt,vocab:$t},Symbol.toStringTag,{value:"Module"})),xt="2025-08-11",Et="spanish-1",Rt="unit-1-basics",Pt="Week 0: En la Escuela",It="2025-08-11",Tt="2025-08-17",Dt=[{id:"lapiz",spanish:"lápiz",english:"pencil",type:"noun"},{id:"libro",spanish:"libro",english:"book",type:"noun"},{id:"estudiar",spanish:"estudiar",english:"to study",type:"verb",conjugations:{present:{yo:"estudio",tú:"estudias","él/ella":"estudia",nosotros:"estudiamos",vosotros:"estudiáis",ellos:"estudian"}}}],Wt=[{id:"p1",spanish:"Necesito un lápiz.",english:"I need a pencil.",audioUrl:""},{id:"p2",spanish:"Yo estudio español cada día.",english:"I study Spanish every day.",audioUrl:""}],Hn={id:xt,courseId:Et,unitId:Rt,title:Pt,startDate:It,endDate:Tt,vocab:Dt,phrases:Wt},Bn=Object.freeze(Object.defineProperty({__proto__:null,courseId:Et,default:Hn,endDate:Tt,id:xt,phrases:Wt,startDate:It,title:Pt,unitId:Rt,vocab:Dt},Symbol.toStringTag,{value:"Module"})),Mt="2025-08-18",At="spanish-1",Ut="unit-1-basics",Lt="Week 1: Family & Basics Review",Ot="2025-08-18",jt="2025-08-24",Ft=[{id:"familia",spanish:"familia",english:"family",type:"noun"},{id:"madre",spanish:"madre",english:"mother",type:"noun"},{id:"padre",spanish:"padre",english:"father",type:"noun"},{id:"hermano",spanish:"hermano",english:"brother",type:"noun"},{id:"hermana",spanish:"hermana",english:"sister",type:"noun"},{id:"amigo",spanish:"amigo",english:"friend (male)",type:"noun"},{id:"amiga",spanish:"amiga",english:"friend (female)",type:"noun"},{id:"clase",spanish:"clase",english:"class",type:"noun"},{id:"casa",spanish:"casa",english:"house",type:"noun"},{id:"escuela",spanish:"escuela",english:"school",type:"noun"},{id:"ciudad",spanish:"ciudad",english:"city",type:"noun"},{id:"perro",spanish:"perro",english:"dog",type:"noun"},{id:"gato",spanish:"gato",english:"cat",type:"noun"},{id:"comida",spanish:"comida",english:"food",type:"noun"},{id:"tener",spanish:"tener",english:"to have",type:"verb",conjugations:{present:{yo:"tengo",tú:"tienes","él/ella":"tiene",nosotros:"tenemos",vosotros:"tenéis",ellos:"tienen"},preterite:{yo:"tuve",tú:"tuviste","él/ella":"tuvo",nosotros:"tuvimos",vosotros:"tuvisteis",ellos:"tuvieron"}}},{id:"vivir",spanish:"vivir",english:"to live",type:"verb",conjugations:{present:{yo:"vivo",tú:"vives","él/ella":"vive",nosotros:"vivimos",vosotros:"vivís",ellos:"viven"},preterite:{yo:"viví",tú:"viviste","él/ella":"vivió",nosotros:"vivimos",vosotros:"vivisteis",ellos:"vivieron"}}},{id:"comer",spanish:"comer",english:"to eat",type:"verb",conjugations:{present:{yo:"como",tú:"comes","él/ella":"come",nosotros:"comemos",vosotros:"coméis",ellos:"comen"},preterite:{yo:"comí",tú:"comiste","él/ella":"comió",nosotros:"comimos",vosotros:"comisteis",ellos:"comieron"}}},{id:"gustar",spanish:"gustar",english:"to like",type:"verb",conjugations:{present:{yo:"me gusta",tú:"te gusta","él/ella":"le gusta",nosotros:"nos gusta",vosotros:"os gusta",ellos:"les gusta"},preterite:{yo:"me gustó",tú:"te gustó","él/ella":"le gustó",nosotros:"nos gustó",vosotros:"os gustó",ellos:"les gustó"}}},{id:"visitar",spanish:"visitar",english:"to visit",type:"verb",conjugations:{present:{yo:"visito",tú:"visitas","él/ella":"visita",nosotros:"visitamos",vosotros:"visitáis",ellos:"visitan"},preterite:{yo:"visité",tú:"visitaste","él/ella":"visitó",nosotros:"visitamos",vosotros:"visitasteis",ellos:"visitaron"}}},{id:"cocinar",spanish:"cocinar",english:"to cook",type:"verb",conjugations:{present:{yo:"cocino",tú:"cocinas","él/ella":"cocina",nosotros:"cocinamos",vosotros:"cocináis",ellos:"cocinan"},preterite:{yo:"cociné",tú:"cocinaste","él/ella":"cocinó",nosotros:"cocinamos",vosotros:"cocinasteis",ellos:"cocinaron"}}}],Ht=[{id:"p1",spanish:"Tengo una familia grande.",english:"I have a big family.",audioUrl:""},{id:"p2",spanish:"Mi madre vive en España.",english:"My mother lives in Spain.",audioUrl:""},{id:"p3",spanish:"Mi padre come en la cocina.",english:"My father eats in the kitchen.",audioUrl:""},{id:"p4",spanish:"Mi hermana y yo estudiamos juntos.",english:"My sister and I study together.",audioUrl:""},{id:"p5",spanish:"Mi hermano tiene un libro nuevo.",english:"My brother has a new book.",audioUrl:""},{id:"p6",spanish:"A mi amigo le gusta el español.",english:"My friend likes Spanish.",audioUrl:""},{id:"p7",spanish:"Mis amigos viven cerca de la escuela.",english:"My friends live near the school.",audioUrl:""},{id:"p8",spanish:"Tenemos clase el martes.",english:"We have class on Tuesday.",audioUrl:""},{id:"p9",spanish:"A mi amiga le gusta comer pizza.",english:"My (female) friend likes to eat pizza.",audioUrl:""},{id:"p10",spanish:"Mi familia vive en una casa pequeña.",english:"My family lives in a small house.",audioUrl:""}],Vn={id:Mt,courseId:At,unitId:Ut,title:Lt,startDate:Ot,endDate:jt,vocab:Ft,phrases:Ht},zn=Object.freeze(Object.defineProperty({__proto__:null,courseId:At,default:Vn,endDate:jt,id:Mt,phrases:Ht,startDate:Ot,title:Lt,unitId:Ut,vocab:Ft},Symbol.toStringTag,{value:"Module"}));function qn(){const[e,t]=R(null),[n,i]=R(!0),[o,r]=R(null);return G(()=>{Q(this,null,function*(){try{i(!0),r(null);const c=yield fetch("/config.json");if(!c.ok)throw new Error(`Failed to load config: ${c.status}`);const h=yield c.json();let d;if(h.courses){d={app:h.app,courses:h.courses,units:[],weeks:[]},h.courses.forEach(m=>{m.units.forEach(l=>{d.units.push(z(B({},l),{courseId:m.id,courseTitle:m.title,weeks:[]}))})});try{const l=Object.values(Object.assign({"../weeks/spanish-1/unit-1-basics/2025-08-04.json":Fn,"../weeks/spanish-1/unit-1-basics/2025-08-11.json":Bn,"../weeks/spanish-1/unit-1-basics/2025-08-18.json":zn})).map(p=>p.default||p);if(l.length){const p={};d.courses.forEach(u=>{u.units.forEach(v=>{p[v.id]={unit:v,course:u}})}),l.forEach(u=>{const v=p[u.unitId];if(!v){console.warn("Week references unknown unitId",u.unitId,"in",u.id);return}const{unit:y,course:_}=v;y.weeks.push(u),d.weeks.push(z(B({},u),{unitTitle:y.title,courseId:_.id,courseTitle:_.title}))})}}catch(m){console.error("Error loading week modules",m)}}else if(h.weeks)d={app:z(B({},h.app),{current_unit_id:"default-unit",current_course_id:"default-course"}),courses:[{id:"default-course",title:"Spanish Course",description:"Spanish language course",units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",weeks:h.weeks}]}],units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",courseId:"default-course",courseTitle:"Spanish Course",weeks:h.weeks}],weeks:h.weeks.map(m=>z(B({},m),{unitId:"default-unit",unitTitle:"Spanish Lessons",courseId:"default-course",courseTitle:"Spanish Course"}))};else throw new Error("Invalid config format: missing courses or weeks");if(!d.app||!Array.isArray(d.weeks))throw new Error("Invalid config format after processing");t(d)}catch(c){console.error("Failed to load config:",c),r(c.message)}finally{i(!1)}})},[]),{config:e,loading:n,error:o}}function Jn(){return new Promise(e=>{const t=window.speechSynthesis;if(!t){e([]);return}let n=t.getVoices();if(n&&n.length){e(n);return}const i=()=>{n=t.getVoices(),n&&n.length&&(t.removeEventListener("voiceschanged",i),e(n))};t.addEventListener("voiceschanged",i),setTimeout(()=>{n=t.getVoices(),t.removeEventListener("voiceschanged",i),e(n||[])},1500)})}function Kn({isOpen:e,onClose:t,onSelect:n}){const[i,o]=R([]),[r,a]=R(""),[c,h]=R(!1),[d,m]=R(localStorage.getItem("prefs.tts.voice")||""),l=ht(!1),p=j(()=>Q(this,null,function*(){h(!0);const g=(yield Jn()).filter(w=>/(^|-)es(-|$)/i.test(w.lang)||w.lang.toLowerCase().startsWith("es")),f=new Set,S=[];for(const w of g){const x=w.name+"|"+w.lang;f.has(x)||(f.add(x),S.push(w))}S.sort((w,x)=>w.lang.localeCompare(x.lang)||w.name.localeCompare(x.name)),o(S),h(!1)}),[]);G(()=>{e&&p()},[e,p]);const u=_=>{m(_.name),localStorage.setItem("prefs.tts.voice",_.name),localStorage.setItem("prefs.tts.voiceLang",_.lang),n==null||n(_),t==null||t()},v=_=>{if(!window.speechSynthesis)return;try{window.speechSynthesis.cancel()}catch(x){}const g=new Date().getHours();let f;g<12?f="Buenos días":g<18?f="Buenas tardes":f="Buenas noches";const S=`Hola, ${f}`,w=new SpeechSynthesisUtterance(S);w.voice=_,w.lang=_.lang,w.rate=.9,w.pitch=1,l.current=!0,w.onend=()=>{l.current=!1},w.onerror=()=>{l.current=!1},window.speechSynthesis.speak(w)};if(!e)return null;const y=i.filter(_=>!r||_.name.toLowerCase().includes(r.toLowerCase()));return s("div",{className:"voice-modal-overlay",onClick:t,children:s("div",{className:"voice-modal",role:"dialog","aria-modal":"true",onClick:_=>_.stopPropagation(),children:[s("div",{className:"voice-modal-header",children:[s("h3",{children:"Select Voice"}),s("button",{className:"close-button",onClick:t,"aria-label":"Close voice selector",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"voice-filter-row",children:[s("input",{type:"text",className:"voice-filter",placeholder:"Filter voices",value:r,onInput:_=>a(_.target.value)}),s("button",{className:"refresh",onClick:p,disabled:c,children:c?"...":"↻"})]}),s("div",{className:"voice-list",role:"list",children:[y.map(_=>{const g=d===_.name;return s("div",{className:`voice-item ${g?"selected":""}`,role:"button",tabIndex:0,onClick:()=>u(_),onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),u(_))},children:[s("div",{className:"voice-left",children:[s("div",{className:"voice-main",children:[s("span",{className:"voice-name",children:_.name}),g&&s("span",{className:"badge",children:"Default"})]}),s("div",{className:"voice-meta",children:_.lang})]}),s("div",{className:"voice-actions",children:s("button",{type:"button",className:"preview-btn","aria-label":`Preview ${_.name}`,onClick:f=>{f.stopPropagation(),v(_)},children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s("polygon",{points:"5 3 19 12 5 21 5 3"})})})})]},_.name+_.lang)}),!y.length&&s("div",{className:"empty",children:"No voices found"})]}),s("div",{className:"voice-footer",children:s("p",{className:"hint",children:["Spanish voices detected: ",i.length]})})]})})}const Gn=24*60*60*1e3;function Yn(e){const[t,n]=R({vocabReviewed:[],phraseReviewed:[],startedAt:null});G(()=>{if(!e)return;(()=>{try{const c=`session.vocabReviewed.${e}`,h=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`,m=JSON.parse(localStorage.getItem(c)||"[]"),l=JSON.parse(localStorage.getItem(h)||"[]"),p=localStorage.getItem(d);if(p&&Date.now()-parseInt(p)>Gn){localStorage.removeItem(c),localStorage.removeItem(h),localStorage.removeItem(d),n({vocabReviewed:[],phraseReviewed:[],startedAt:null});return}n({vocabReviewed:m,phraseReviewed:l,startedAt:p?parseInt(p):null})}catch(c){console.error("Failed to load session:",c),n({vocabReviewed:[],phraseReviewed:[],startedAt:null})}})()},[e]);const i=j(a=>{if(e)try{const c=`session.vocabReviewed.${e}`,h=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`;localStorage.setItem(c,JSON.stringify(a.vocabReviewed)),localStorage.setItem(h,JSON.stringify(a.phraseReviewed)),a.startedAt&&localStorage.setItem(d,a.startedAt.toString())}catch(c){console.error("Failed to save session:",c)}},[e]),o=j((a,c)=>{e&&n(h=>{const d=Date.now(),m=h.startedAt||d;let l;if(c==="vocab"){const p=h.vocabReviewed.includes(a)?h.vocabReviewed.filter(u=>u!==a):[...h.vocabReviewed,a];l=z(B({},h),{vocabReviewed:p,startedAt:m})}else if(c==="phrase"){const p=h.phraseReviewed.includes(a)?h.phraseReviewed.filter(u=>u!==a):[...h.phraseReviewed,a];l=z(B({},h),{phraseReviewed:p,startedAt:m})}else return h;return i(l),l})},[e,i]),r=j(()=>{if(!e)return;n({vocabReviewed:[],phraseReviewed:[],startedAt:null});try{localStorage.removeItem(`session.vocabReviewed.${e}`),localStorage.removeItem(`session.phraseReviewed.${e}`),localStorage.removeItem(`session.startedAt.${e}`)}catch(c){console.error("Failed to clear session:",c)}},[e]);return{session:t,markReviewed:o,resetSession:r}}function Qn(e,t){const[n,i]=R(new Set(t?[t]:[])),o=X(()=>{var p,u;if(!e||!e.courses)return{};const l={weeks:{},units:{},courses:{}};return n.forEach(v=>{l.weeks[v]="selected"}),(p=e.units)==null||p.forEach(v=>{var g;const y=v.weeks&&v.weeks.length>0?v.weeks:((g=e.weeks)==null?void 0:g.filter(f=>f.unitId===v.id))||[],_=y.filter(f=>n.has(f.id)).length;y.length===0||_===0?l.units[v.id]="none":_===y.length?l.units[v.id]="selected":l.units[v.id]="partial"}),(u=e.courses)==null||u.forEach(v=>{var g;const y=[];(g=v.units)==null||g.forEach(f=>{var S;(S=f.weeks)==null||S.forEach(w=>y.push(w))});const _=y.filter(f=>n.has(f.id)).length;_===0?l.courses[v.id]="none":_===y.length?l.courses[v.id]="selected":l.courses[v.id]="partial"}),l},[e,n]),r=j(l=>{i(p=>{const u=new Set(p);return u.has(l)?u.delete(l):u.add(l),u})},[]),a=j(l=>{var y;if(!e)return;let p=[];const u=(y=e.units)==null?void 0:y.find(_=>_.id===l);if(u!=null&&u.weeks&&u.weeks.length>0?p=u.weeks.map(_=>_.id):e.weeks&&(p=e.weeks.filter(_=>_.unitId===l).map(_=>_.id)),p.length===0)return;const v=o.units[l];i(_=>{const g=new Set(_);return v==="selected"?p.forEach(f=>g.delete(f)):p.forEach(f=>g.add(f)),g})},[e,o]),c=j(l=>{if(!(e!=null&&e.courses))return;const p=e.courses.find(y=>y.id===l);if(!(p!=null&&p.units))return;const u=[];p.units.forEach(y=>{var _;(_=y.weeks)==null||_.forEach(g=>u.push(g.id))});const v=o.courses[l];i(y=>{const _=new Set(y);return v==="selected"?u.forEach(g=>_.delete(g)):u.forEach(g=>_.add(g)),_})},[e,o]),h=X(()=>e!=null&&e.weeks?e.weeks.filter(l=>n.has(l.id)):[],[e,n]),d=j(()=>{i(new Set)},[]),m=j(l=>{i(new Set([l]))},[]);return{selectedWeekIds:n,selectionStates:o,selectedWeeks:h,toggleWeekSelection:r,toggleUnitSelection:a,toggleCourseSelection:c,clearSelection:d,selectSingleWeek:m,hasSelection:n.size>0,selectionCount:n.size}}function Zn(){var M,Y,U;const[e,t]=R(!1),[n,i]=R(!1),[o,r]=R(!1),[a,c]=R(null),[h,d]=R("week"),[m,l]=R(null),[p,u]=R(null),{config:v,loading:y,error:_}=qn(),{session:g,markReviewed:f,resetSession:S}=Yn(a),{selectedWeekIds:w,selectionStates:x,selectedWeeks:F,toggleWeekSelection:L,toggleUnitSelection:N,toggleCourseSelection:$,selectSingleWeek:O}=Qn(v,a);G(()=>{v&&!a&&(l(v.app.current_unit_id),u(v.app.current_course_id))},[v,a]),G(()=>{if(!a&&w&&w.size>0){const T=w.values().next().value;T&&c(T)}},[a,w]);const P=(M=v==null?void 0:v.weeks)==null?void 0:M.find(T=>T.id===a),E=(Y=v==null?void 0:v.units)==null?void 0:Y.find(T=>T.id===m),H=(U=v==null?void 0:v.courses)==null?void 0:U.find(T=>T.id===p),b=T=>{c(T),d("week"),O(T),t(!1),i(!1)},C=T=>{l(T),d("unit"),t(!1),i(!1)},D=T=>{u(T),d("course"),t(!1),i(!1)},I=()=>{w&&w.size&&Array.from(w).forEach(T=>L(T))};return y?s("div",{className:"app loading",children:s("div",{className:"loading-spinner",children:[s("div",{className:"spinner"}),s("p",{children:"Loading Spanish Weekly..."})]})}):_||!v?s("div",{className:"app error",children:s("div",{className:"error-message",children:[s("h2",{children:"Oops! Can't load this week."}),s("p",{children:"Pull to refresh or try again later."}),s("button",{onClick:()=>window.location.reload(),children:"Refresh"})]})}):s("div",{className:"app",children:[s(xn,{title:v.app.title,viewMode:h,currentWeek:P,currentUnit:E,currentCourse:H,onSideNavToggle:()=>t(!e),onCalendarToggle:()=>i(!n),onVoiceToggle:()=>r(!0)}),s(En,{isOpen:e,config:v,currentWeekId:a,currentUnitId:m,currentCourseId:p,selectionStates:x,onWeekSelect:b,onUnitSelect:C,onCourseSelect:D,onWeekToggle:L,onUnitToggle:N,onCourseToggle:$,onClose:()=>t(!1),onVoiceToggle:()=>{t(!1),r(!0)}}),s(Mn,{isOpen:n,weeks:v.weeks,currentWeekId:a,onWeekSelect:b,onClose:()=>i(!1)}),s("main",{className:"main-content",children:F.length>0?s(Wn,{weeks:F,viewMode:h,currentWeek:P,currentUnit:E,currentCourse:H,session:g,onMarkReviewed:f,audioConfig:v.app.audio,onClearSelection:I}):s(Ln,{config:v,currentWeekId:a,currentUnitId:m,currentCourseId:p,selectionStates:x,onWeekSelect:b,onUnitSelect:C,onCourseSelect:D,onWeekToggle:L,onUnitToggle:N,onCourseToggle:$})}),s(Un,{weeks:F,currentWeekId:a,session:g,onReset:S}),(e||n)&&s("div",{className:"overlay",onClick:()=>{t(!1),i(!1)}}),s(Kn,{isOpen:o,onClose:()=>r(!1)}),s(Cn,{})]})}Xt(s(Zn,{}),document.getElementById("app"));
