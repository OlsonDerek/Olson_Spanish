var Ht=Object.defineProperty,Vt=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var zt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable;var Pe=(e,t,n)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V=(e,t)=>{for(var n in t||(t={}))zt.call(t,n)&&Pe(e,n,t[n]);if(Re)for(var n of Re(t))qt.call(t,n)&&Pe(e,n,t[n]);return e},z=(e,t)=>Vt(e,Bt(t));var Q=(e,t,n)=>new Promise((i,o)=>{var r=h=>{try{c(n.next(h))}catch(d){o(d)}},a=h=>{try{c(n.throw(h))}catch(d){o(d)}},c=h=>h.done?i(h.value):Promise.resolve(h.value).then(r,a);c((n=n.apply(e,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();var pe,S,Xe,Z,Te,et,tt,nt,ke,ge,ye,se={},st=[],Jt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,re=Array.isArray;function J(e,t){for(var n in t)e[n]=t[n];return e}function $e(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function we(e,t,n){var i,o,r,a={};for(r in t)r=="key"?i=t[r]:r=="ref"?o=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?pe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)a[r]===void 0&&(a[r]=e.defaultProps[r]);return de(e,a,i,o,null)}function de(e,t,n,i,o){var r={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o==null?++Xe:o,__i:-1,__u:0};return o==null&&S.vnode!=null&&S.vnode(r),r}function te(e){return e.children}function K(e,t){this.props=e,this.context=t}function ne(e,t){if(t==null)return e.__?ne(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ne(e):null}function it(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return it(e)}}function Ie(e){(!e.__d&&(e.__d=!0)&&Z.push(e)&&!ue.__r++||Te!=S.debounceRendering)&&((Te=S.debounceRendering)||et)(ue)}function ue(){for(var e,t,n,i,o,r,a,c=1;Z.length;)Z.length>c&&Z.sort(tt),e=Z.shift(),c=Z.length,e.__d&&(n=void 0,o=(i=(t=e).__v).__e,r=[],a=[],t.__P&&((n=J({},i)).__v=i.__v+1,S.vnode&&S.vnode(n),Ce(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,r,o==null?ne(i):o,!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,at(r,n,a),n.__e!=o&&it(n)));ue.__r=0}function ot(e,t,n,i,o,r,a,c,h,d,f){var l,p,u,_,m,v,y=i&&i.__k||st,g=t.length;for(h=Kt(n,t,y,h,g),l=0;l<g;l++)(u=n.__k[l])!=null&&(p=u.__i==-1?se:y[u.__i]||se,u.__i=l,v=Ce(e,u,p,o,r,a,c,h,d,f),_=u.__e,u.ref&&p.ref!=u.ref&&(p.ref&&xe(p.ref,null,u),f.push(u.ref,u.__c||_,u)),m==null&&_!=null&&(m=_),4&u.__u||p.__k===u.__k?h=rt(u,h,e):typeof u.type=="function"&&v!==void 0?h=v:_&&(h=_.nextSibling),u.__u&=-7);return n.__e=m,h}function Kt(e,t,n,i,o){var r,a,c,h,d,f=n.length,l=f,p=0;for(e.__k=new Array(o),r=0;r<o;r++)(a=t[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(h=r+p,(a=e.__k[r]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?de(null,a,null,null,null):re(a)?de(te,{children:a},null,null,null):a.constructor==null&&a.__b>0?de(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,c=null,(d=a.__i=Gt(a,n,h,l))!=-1&&(l--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(o>f?p--:o<f&&p++),typeof a.type!="function"&&(a.__u|=4)):d!=h&&(d==h-1?p--:d==h+1?p++:(d>h?p--:p++,a.__u|=4))):e.__k[r]=null;if(l)for(r=0;r<f;r++)(c=n[r])!=null&&!(2&c.__u)&&(c.__e==i&&(i=ne(c)),ct(c,c));return i}function rt(e,t,n){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,t=rt(i[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=ne(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _e(e,t){return t=t||[],e==null||typeof e=="boolean"||(re(e)?e.some(function(n){_e(n,t)}):t.push(e)),t}function Gt(e,t,n,i){var o,r,a,c=e.key,h=e.type,d=t[n],f=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||f&&c==d.key&&h==d.type)return n;if(i>(f?1:0)){for(o=n-1,r=n+1;o>=0||r<t.length;)if((d=t[a=o>=0?o--:r++])!=null&&!(2&d.__u)&&c==d.key&&h==d.type)return a}return-1}function De(e,t,n){t[0]=="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||Jt.test(t)?n:n+"px"}function ae(e,t,n,i,o){var r,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||De(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||De(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(nt,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i?n.u=i.u:(n.u=ke,e.addEventListener(t,r?ye:ge,r)):e.removeEventListener(t,r?ye:ge,r);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n==null?"":n;break e}catch(c){}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Me(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=ke++;else if(t.t<n.u)return;return n(S.event?S.event(t):t)}}}function Ce(e,t,n,i,o,r,a,c,h,d){var f,l,p,u,_,m,v,y,g,k,N,T,F,L,b,$,O,R=t.type;if(t.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),r=[c=t.__e=n.__e]),(f=S.__b)&&f(t);e:if(typeof R=="function")try{if(y=t.props,g="prototype"in R&&R.prototype.render,k=(f=R.contextType)&&i[f.__c],N=f?k?k.props.value:f.__:i,n.__c?v=(l=t.__c=n.__c).__=l.__E:(g?t.__c=l=new R(y,N):(t.__c=l=new K(y,N),l.constructor=R,l.render=Qt),k&&k.sub(l),l.props=y,l.state||(l.state={}),l.context=N,l.__n=i,p=l.__d=!0,l.__h=[],l._sb=[]),g&&l.__s==null&&(l.__s=l.state),g&&R.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=J({},l.__s)),J(l.__s,R.getDerivedStateFromProps(y,l.__s))),u=l.props,_=l.state,l.__v=t,p)g&&R.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),g&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(g&&R.getDerivedStateFromProps==null&&y!==u&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,N),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,N)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(x){x&&(x.__=t)}),T=0;T<l._sb.length;T++)l.__h.push(l._sb[T]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,N),g&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(u,_,m)})}if(l.context=N,l.props=y,l.__P=e,l.__e=!1,F=S.__r,L=0,g){for(l.state=l.__s,l.__d=!1,F&&F(t),f=l.render(l.props,l.state,l.context),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[]}else do l.__d=!1,F&&F(t),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++L<25);l.state=l.__s,l.getChildContext!=null&&(i=J(J({},i),l.getChildContext())),g&&!p&&l.getSnapshotBeforeUpdate!=null&&(m=l.getSnapshotBeforeUpdate(u,_)),$=f,f!=null&&f.type===te&&f.key==null&&($=lt(f.props.children)),c=ot(e,re($)?$:[$],t,n,i,o,r,a,c,h,d),l.base=t.__e,t.__u&=-161,l.__h.length&&a.push(l),v&&(l.__E=l.__=null)}catch(x){if(t.__v=null,h||r!=null)if(x.then){for(t.__u|=h?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;r[r.indexOf(c)]=null,t.__e=c}else{for(O=r.length;O--;)$e(r[O]);be(t)}else t.__e=n.__e,t.__k=n.__k,x.then||be(t);S.__e(x,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Yt(n.__e,t,n,i,o,r,a,h,d);return(f=S.diffed)&&f(t),128&t.__u?void 0:c}function be(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(be)}function at(e,t,n){for(var i=0;i<n.length;i++)xe(n[i],n[++i],n[++i]);S.__c&&S.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(r){r.call(o)})}catch(r){S.__e(r,o.__v)}})}function lt(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:re(e)?e.map(lt):J({},e)}function Yt(e,t,n,i,o,r,a,c,h){var d,f,l,p,u,_,m,v=n.props,y=t.props,g=t.type;if(g=="svg"?o="http://www.w3.org/2000/svg":g=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(d=0;d<r.length;d++)if((u=r[d])&&"setAttribute"in u==!!g&&(g?u.localName==g:u.nodeType==3)){e=u,r[d]=null;break}}if(e==null){if(g==null)return document.createTextNode(y);e=document.createElementNS(o,g,y.is&&y),c&&(S.__m&&S.__m(t,r),c=!1),r=null}if(g==null)v===y||c&&e.data==y||(e.data=y);else{if(r=r&&pe.call(e.childNodes),v=n.props||se,!c&&r!=null)for(v={},d=0;d<e.attributes.length;d++)v[(u=e.attributes[d]).name]=u.value;for(d in v)if(u=v[d],d!="children"){if(d=="dangerouslySetInnerHTML")l=u;else if(!(d in y)){if(d=="value"&&"defaultValue"in y||d=="checked"&&"defaultChecked"in y)continue;ae(e,d,null,u,o)}}for(d in y)u=y[d],d=="children"?p=u:d=="dangerouslySetInnerHTML"?f=u:d=="value"?_=u:d=="checked"?m=u:c&&typeof u!="function"||v[d]===u||ae(e,d,u,v[d],o);if(f)c||l&&(f.__html==l.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(l&&(e.innerHTML=""),ot(t.type=="template"?e.content:e,re(p)?p:[p],t,n,i,g=="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,a,r?r[0]:n.__k&&ne(n,0),c,h),r!=null)for(d=r.length;d--;)$e(r[d]);c||(d="value",g=="progress"&&_==null?e.removeAttribute("value"):_!=null&&(_!==e[d]||g=="progress"&&!_||g=="option"&&_!=v[d])&&ae(e,d,_,v[d],o),d="checked",m!=null&&m!=e[d]&&ae(e,d,m,v[d],o))}return e}function xe(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(o){S.__e(o,n)}}function ct(e,t,n){var i,o;if(S.unmount&&S.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||xe(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){S.__e(r,t)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&ct(i[o],t,n||typeof e.type!="function");n||$e(e.__e),e.__c=e.__=e.__e=void 0}function Qt(e,t,n){return this.constructor(e,n)}function Zt(e,t,n){var i,o,r,a;t==document&&(t=document.documentElement),S.__&&S.__(e,t),o=(i=!1)?null:t.__k,r=[],a=[],Ce(t,e=t.__k=we(te,null,[e]),o||se,se,t.namespaceURI,o?null:t.firstChild?pe.call(t.childNodes):null,r,o?o.__e:t.firstChild,i,a),at(r,e,a)}pe=st.slice,S={__e:function(e,t,n,i){for(var o,r,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(e)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),a=o.__d),a)return o.__E=o}catch(c){e=c}throw e}},Xe=0,K.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=J({},this.state),typeof e=="function"&&(e=e(J({},n),this.props)),e&&J(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ie(this))},K.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ie(this))},K.prototype.render=te,Z=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(e,t){return e.__v.__b-t.__v.__b},ue.__r=0,nt=/(PointerCapture)$|Capture$/i,ke=0,ge=Me(!1),ye=Me(!0);var Xt=0;function s(e,t,n,i,o,r){t||(t={});var a,c,h=t;if("ref"in h)for(c in h={},t)c=="ref"?a=t[c]:h[c]=t[c];var d={type:e,props:h,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Xt,__i:-1,__u:0,__source:o,__self:r};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)h[c]===void 0&&(h[c]=a[c]);return S.vnode&&S.vnode(d),d}var ie,M,fe,We,oe=0,dt=[],A=S,Ae=A.__b,Ue=A.__r,Le=A.diffed,Oe=A.__c,je=A.unmount,Fe=A.__;function Ee(e,t){A.__h&&A.__h(M,e,oe||t),oe=0;var n=M.__H||(M.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function E(e){return oe=1,en(ut,e)}function en(e,t,n){var i=Ee(ie++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):ut(void 0,t),function(c){var h=i.__N?i.__N[0]:i.__[0],d=i.t(h,c);h!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=M,!M.__f)){var o=function(c,h,d){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!r||r.call(this,c,h,d);var l=i.__c.props!==c;return f.forEach(function(p){if(p.__N){var u=p.__[0];p.__=p.__N,p.__N=void 0,u!==p.__[0]&&(l=!0)}}),r&&r.call(this,c,h,d)||l};M.__f=!0;var r=M.shouldComponentUpdate,a=M.componentWillUpdate;M.componentWillUpdate=function(c,h,d){if(this.__e){var f=r;r=void 0,o(c,h,d),r=f}a&&a.call(this,c,h,d)},M.shouldComponentUpdate=o}return i.__N||i.__}function G(e,t){var n=Ee(ie++,3);!A.__s&&ht(n.__H,t)&&(n.__=e,n.u=t,M.__H.__h.push(n))}function tn(e){return oe=5,X(function(){return{current:e}},[])}function X(e,t){var n=Ee(ie++,7);return ht(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function j(e,t){return oe=8,X(function(){return e},t)}function nn(){for(var e;e=dt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(he),e.__H.__h.forEach(Ne),e.__H.__h=[]}catch(t){e.__H.__h=[],A.__e(t,e.__v)}}A.__b=function(e){M=null,Ae&&Ae(e)},A.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Fe&&Fe(e,t)},A.__r=function(e){Ue&&Ue(e),ie=0;var t=(M=e.__c).__H;t&&(fe===M?(t.__h=[],M.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(he),t.__h.forEach(Ne),t.__h=[],ie=0)),fe=M},A.diffed=function(e){Le&&Le(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(dt.push(t)!==1&&We===A.requestAnimationFrame||((We=A.requestAnimationFrame)||sn)(nn)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),fe=M=null},A.__c=function(e,t){t.some(function(n){try{n.__h.forEach(he),n.__h=n.__h.filter(function(i){return!i.__||Ne(i)})}catch(i){t.some(function(o){o.__h&&(o.__h=[])}),t=[],A.__e(i,n.__v)}}),Oe&&Oe(e,t)},A.unmount=function(e){je&&je(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{he(i)}catch(o){t=o}}),n.__H=void 0,t&&A.__e(t,n.__v))};var He=typeof requestAnimationFrame=="function";function sn(e){var t,n=function(){clearTimeout(i),He&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);He&&(t=requestAnimationFrame(n))}function he(e){var t=M,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),M=t}function Ne(e){var t=M;e.__c=e.__(),M=t}function ht(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function ut(e,t){return typeof t=="function"?t(e):t}function on(e,t){for(var n in t)e[n]=t[n];return e}function Ve(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var i in t)if(i!=="__source"&&e[i]!==t[i])return!0;return!1}function Be(e,t){this.props=e,this.context=t}(Be.prototype=new K).isPureReactComponent=!0,Be.prototype.shouldComponentUpdate=function(e,t){return Ve(this.props,e)||Ve(this.state,t)};var ze=S.__b;S.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ze&&ze(e)};var rn=S.__e;S.__e=function(e,t,n,i){if(e.then){for(var o,r=t;r=r.__;)if((o=r.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}rn(e,t,n,i)};var qe=S.unmount;function _t(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),e.__c.__H=null),(e=on({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(i){return _t(i,t,n)})),e}function pt(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(i){return pt(i,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function me(){this.__u=0,this.o=null,this.__b=null}function vt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function le(){this.i=null,this.l=null}S.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qe&&qe(e)},(me.prototype=new K).__c=function(e,t){var n=t.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var o=vt(i.__v),r=!1,a=function(){r||(r=!0,n.__R=null,o?o(c):c())};n.__R=a;var c=function(){if(!--i.__u){if(i.state.__a){var h=i.state.__a;i.__v.__k[0]=pt(h,h.__c.__P,h.__c.__O)}var d;for(i.setState({__a:i.__b=null});d=i.o.pop();)d.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(a,a)},me.prototype.componentWillUnmount=function(){this.o=[]},me.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=_t(this.__b,n,i.__O=i.__P)}this.__b=null}var o=t.__a&&we(te,null,e.fallback);return o&&(o.__u&=-33),[we(te,null,t.__a?null:e.children),o]};var Je=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};(le.prototype=new K).__a=function(e){var t=this,n=vt(t.__v),i=t.l.get(e);return i[0]++,function(o){var r=function(){t.props.revealOrder?(i.push(o),Je(t,e,i)):o()};n?n(r):r()}},le.prototype.render=function(e){this.i=null,this.l=new Map;var t=_e(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},le.prototype.componentDidUpdate=le.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Je(e,n,t)})};var an=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,ln=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,cn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,dn=/[A-Z0-9]/g,hn=typeof document!="undefined",un=function(e){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};K.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(K.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ke=S.event;function _n(){}function pn(){return this.cancelBubble}function vn(){return this.defaultPrevented}S.event=function(e){return Ke&&(e=Ke(e)),e.persist=_n,e.isPropagationStopped=pn,e.isDefaultPrevented=vn,e.nativeEvent=e};var fn={enumerable:!1,configurable:!0,get:function(){return this.class}},Ge=S.vnode;S.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,i=t.type,o={},r=i.indexOf("-")===-1;for(var a in n){var c=n[a];if(!(a==="value"&&"defaultValue"in n&&c==null||hn&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var h=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&c===!0?c="":h==="translate"&&c==="no"?c=!1:h[0]==="o"&&h[1]==="n"?h==="ondoubleclick"?a="ondblclick":h!=="onchange"||i!=="input"&&i!=="textarea"||un(n.type)?h==="onfocus"?a="onfocusin":h==="onblur"?a="onfocusout":cn.test(a)&&(a=h):h=a="oninput":r&&ln.test(a)?a=a.replace(dn,"-$&").toLowerCase():c===null&&(c=void 0),h==="oninput"&&o[a=h]&&(a="oninputCapture"),o[a]=c}}i=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=_e(n.children).forEach(function(d){d.props.selected=o.value.indexOf(d.props.value)!=-1})),i=="select"&&o.defaultValue!=null&&(o.value=_e(n.children).forEach(function(d){d.props.selected=o.multiple?o.defaultValue.indexOf(d.props.value)!=-1:o.defaultValue==d.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",fn)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=an,Ge&&Ge(e)};var Ye=S.__r;S.__r=function(e){Ye&&Ye(e),e.__c};var Qe=S.diffed;S.diffed=function(e){Qe&&Qe(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};var Ze={},mn="@vercel/analytics",gn="1.5.0",yn=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function ft(){return typeof window!="undefined"}function mt(){try{const e="production"}catch(e){}return"production"}function wn(e="auto"){if(e==="auto"){window.vam=mt();return}window.vam=e}function bn(){return(ft()?window.vam:mt())||"production"}function Se(){return bn()==="development"}function Nn(e){return e.scriptSrc?e.scriptSrc:Se()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function Sn(e={debug:!0}){var t;if(!ft())return;wn(e.mode),yn(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=Nn(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const i=document.createElement("script");i.src=n,i.defer=!0,i.dataset.sdkn=mn+(e.framework?`/${e.framework}`:""),i.dataset.sdkv=gn,e.disableAutoTrack&&(i.dataset.disableAutoTrack="1"),e.endpoint?i.dataset.endpoint=e.endpoint:e.basePath&&(i.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(i.dataset.dsn=e.dsn),i.onerror=()=>{const o=Se()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${o}`)},Se()&&e.debug===!1&&(i.dataset.debug="false"),document.head.appendChild(i)}function kn({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function $n(){if(!(typeof process=="undefined"||typeof Ze=="undefined"))return Ze.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Cn(e){return G(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),G(()=>{var t;Sn(V(V({framework:e.framework||"react",basePath:(t=e.basePath)!=null?t:$n()},e.route!==void 0&&{disableAutoTrack:!0}),e))},[]),G(()=>{e.route&&e.path&&kn({route:e.route,path:e.path})},[e.route,e.path]),null}function xn({title:e,viewMode:t,currentWeek:n,currentUnit:i,currentCourse:o,onSideNavToggle:r,onCalendarToggle:a,onVoiceToggle:c}){const h=()=>{switch(t){case"course":return o==null?void 0:o.title;case"unit":return i==null?void 0:i.title;case"week":default:return n==null?void 0:n.title}},d=()=>{switch(t){case"course":return"Course View";case"unit":return"Unit View";case"week":default:return""}};return s("header",{className:"header",children:s("div",{className:"header-content",children:[s("button",{className:"nav-toggle",onClick:r,"aria-label":"Toggle navigation",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[s("path",{d:"M3 12h18m-9 5V7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3 6h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),s("div",{className:"title-section",children:[s("h1",{className:"app-title",children:e}),h()&&s("h2",{className:"subtitle",children:h()}),d()&&s("span",{className:"view-mode-label",children:d()})]}),s("div",{className:"header-actions",children:[s("button",{className:"calendar-toggle",onClick:a,"aria-label":"Toggle calendar view",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}),s("button",{className:"voice-toggle",onClick:c,"aria-label":"Select voice",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("path",{d:"M12 3v18"}),s("path",{d:"M17 8v8"}),s("path",{d:"M7 8v8"}),s("path",{d:"M4 12h16"})]})})]})]})})}function ee({state:e,onClick:t,size:n="medium",disabled:i=!1}){const o=()=>{switch(e){case"selected":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12",stroke:"currentColor",strokeWidth:"2",fill:"none"})});case"partial":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"currentColor",strokeWidth:"2"})});case"none":default:return null}},r=()=>{switch(e){case"selected":return"Fully selected";case"partial":return"Partially selected";case"none":default:return"Not selected"}};return s("button",{className:`selection-bubble ${e} ${n} ${i?"disabled":""}`,onClick:i?void 0:t,disabled:i,"aria-label":r(),title:r(),children:o()})}function En({isOpen:e,config:t,currentWeekId:n,currentUnitId:i,currentCourseId:o,selectionStates:r,onWeekSelect:a,onUnitSelect:c,onCourseSelect:h,onWeekToggle:d,onUnitToggle:f,onCourseToggle:l,onClose:p,onVoiceToggle:u}){const[_,m]=E(new Set([o])),[v,y]=E(new Set([i]));if(!t||!t.courses||t.courses.length===0)return null;const g=b=>{try{const $=`session.vocabReviewed.${b}`,O=`session.phraseReviewed.${b}`,R=JSON.parse(localStorage.getItem($)||"[]"),x=JSON.parse(localStorage.getItem(O)||"[]");return{vocabReviewed:R,phraseReviewed:x}}catch($){return{vocabReviewed:[],phraseReviewed:[]}}},k=b=>{if(!b.vocab||!b.phrases)return!1;const $=g(b.id),O=b.vocab.map(w=>w.id),R=b.phrases.map(w=>w.id),x=O.every(w=>$.vocabReviewed.includes(w)),H=R.every(w=>$.phraseReviewed.includes(w));return x&&H&&O.length>0&&R.length>0},N=b=>!b.weeks||b.weeks.length===0?!1:b.weeks.every($=>k($)),T=b=>!b.units||b.units.length===0?!1:b.units.every($=>N($)),F=b=>{const $=new Set(_);$.has(b)?$.delete(b):$.add(b),m($)},L=b=>{const $=new Set(v);$.has(b)?$.delete(b):$.add(b),y($)};return s("nav",{className:`side-nav ${e?"open":""}`,children:[s("div",{className:"side-nav-header",children:[s("h3",{children:"Navigation"}),s("button",{className:"close-button",onClick:p,"aria-label":"Close navigation",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"nav-list",children:t.courses.map(b=>{var O,R;const $=_.has(b.id);return s("div",{className:"nav-section",children:[s("button",{className:`nav-item course-item ${$?"current":""} has-children`,onClick:()=>F(b.id),"aria-expanded":$,children:[s("div",{className:"nav-item-content",children:[s("h4",{className:"nav-item-title",children:b.title}),s("p",{className:"nav-item-meta",children:["Course • ",((O=b.units)==null?void 0:O.length)||0," units"]})]}),s("div",{className:"nav-item-actions",children:[s(ee,{state:((R=r.courses)==null?void 0:R[b.id])||"none",onClick:x=>{x.stopPropagation(),l(b.id)},size:"medium"}),T(b)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),$&&b.units&&s("div",{className:"nav-children",children:b.units.map(x=>{var w,C;const H=v.has(x.id);return s("div",{className:"nav-subsection",children:[s("button",{className:`nav-item unit-item ${H?"current":""} has-children`,onClick:()=>L(x.id),"aria-expanded":H,children:[s("div",{className:"nav-item-content",children:[s("h5",{className:"nav-item-title",children:x.title}),s("p",{className:"nav-item-meta",children:["Unit • ",((w=x.weeks)==null?void 0:w.length)||0," weeks"]})]}),s("div",{className:"nav-item-actions",children:[s(ee,{state:((C=r.units)==null?void 0:C[x.id])||"none",onClick:D=>{D.stopPropagation(),f(x.id)},size:"medium"}),N(x)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),H&&x.weeks&&s("div",{className:"nav-children",children:x.weeks.map(D=>{var P;return s("button",{className:`nav-item week-item ${n===D.id?"current":""}`,onClick:()=>d(D.id),children:[s("div",{className:"nav-item-content",children:[s("h6",{className:"nav-item-title",children:D.title}),s("p",{className:"nav-item-meta",children:Rn(D)})]}),s("div",{className:"nav-item-actions",children:[s(ee,{state:(P=r.weeks)!=null&&P[D.id]?"selected":"none",onClick:W=>{W.stopPropagation(),d(D.id)},size:"small"}),k(D)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},D.id)})})]},x.id)})})]},b.id)})}),s("div",{className:"side-nav-footer",children:s("button",{className:"voice-select-footer",onClick:u,children:[s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:"margin-right:6px",children:[s("path",{d:"M12 3v18"}),s("path",{d:"M17 8v8"}),s("path",{d:"M7 8v8"}),s("path",{d:"M4 12h16"})]}),"Select Voice"]})})]})}function Rn(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),i=t.getMonth()===n.getMonth(),o=new Intl.DateTimeFormat("en-US",{month:"short"}),r=o.format(t),a=o.format(n),c=t.getFullYear();return i?`${r} ${t.getDate()}–${n.getDate()}, ${c}`:`${r} ${t.getDate()} – ${a} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}function Pn(e){const[t,n]=E(!1),[i,o]=E(null),r=tn(null),a=j(()=>{r.current&&(r.current.pause(),r.current=null),n(!1)},[]),c=j((l,p="es-ES")=>Q(this,null,function*(){return new Promise((u,_)=>{if(!window.speechSynthesis){_(new Error("Speech synthesis not supported"));return}window.speechSynthesis.cancel();const m=new SpeechSynthesisUtterance(l),v=localStorage.getItem("prefs.tts.voice"),y=localStorage.getItem("prefs.tts.voiceLang")||p,g=()=>{const k=window.speechSynthesis.getVoices()||[];let N=null;v&&(N=k.find(T=>T.name===v)),N||(N=k.find(T=>T.lang===y)),N||(N=k.find(T=>T.lang.startsWith("es"))),N||(N=k.find(T=>T.name.toLowerCase().includes("spanish"))),N?(m.voice=N,m.lang=N.lang):m.lang=y};if(window.speechSynthesis.getVoices().length===0){const k=()=>{g(),window.speechSynthesis.removeEventListener("voiceschanged",k),window.speechSynthesis.speak(m)};window.speechSynthesis.addEventListener("voiceschanged",k)}else g();m.rate=.8,m.pitch=1.1,m.volume=1,m.onstart=()=>{n(!0),o(null)},m.onend=()=>{n(!1),u()},m.onerror=k=>{n(!1),_(new Error(`Speech synthesis error: ${k.error}`))},window.speechSynthesis.getVoices().length>0&&window.speechSynthesis.speak(m)})}),[]),h=j(l=>Q(this,null,function*(){return new Promise((p,u)=>{a();const _=new Audio(l);r.current=_,_.onloadstart=()=>{n(!0),o(null)},_.onended=()=>{n(!1),r.current=null,p()},_.onerror=()=>{n(!1),r.current=null,u(new Error("Failed to load audio file"))},_.play().catch(u)})}),[a]),d=j((l,p)=>Q(this,null,function*(){var u,_,m,v;try{if(o(null),a(),(u=window.speechSynthesis)==null||u.cancel(),p&&p.trim()&&(e!=null&&e.preferMp3||!((_=e==null?void 0:e.tts)!=null&&_.enabled)))try{yield h(p);return}catch(y){console.warn("Audio file failed, falling back to TTS:",y)}if(((m=e==null?void 0:e.tts)==null?void 0:m.enabled)!==!1)yield c(l,((v=e==null?void 0:e.tts)==null?void 0:v.voiceHint)||"es-ES");else throw new Error("No audio playback method available")}catch(y){throw console.error("Failed to play phrase:",y),o(y.message),n(!1),y}}),[e,h,c,a]),f=j(()=>{var l;a(),(l=window.speechSynthesis)==null||l.cancel(),n(!1),o(null)},[a]);return{playPhrase:d,isPlaying:t,error:i,cleanup:f}}function Tn(e){const t=[e.spanish.toLowerCase()];if(e.conjugations&&Object.values(e.conjugations).forEach(n=>{typeof n=="object"&&Object.values(n).forEach(i=>{typeof i=="string"&&t.push(i.toLowerCase())})}),e.type==="noun"){const n=e.spanish.toLowerCase();n.endsWith("a")?t.push(n.slice(0,-1)+"as"):n.endsWith("o")?t.push(n.slice(0,-1)+"os"):n.endsWith("e")?t.push(n+"s"):n.endsWith("l")||n.endsWith("r")||n.endsWith("n")?t.push(n+"es"):t.push(n+"s")}if(e.type==="adjective"){const n=e.spanish.toLowerCase();if(n.endsWith("o")){const i=n.slice(0,-1);t.push(i+"a"),t.push(i+"os"),t.push(i+"as")}else if(n.endsWith("a")){const i=n.slice(0,-1);t.push(i+"o"),t.push(i+"as"),t.push(i+"os")}else n.endsWith("s")||(t.push(n+"s"),(n.endsWith("l")||n.endsWith("r")||n.endsWith("n"))&&t.push(n+"es"))}return[...new Set(t.filter(n=>n&&n.trim()))]}function In(e,t){if(!t||t.length===0)return e;let n=e;const i=new Map;return t.forEach(r=>{Tn(r).forEach(c=>{(!i.has(c)||c.length>i.get(c).spanish.length)&&i.set(c,r)})}),Array.from(i.keys()).sort((r,a)=>a.length-r.length).forEach(r=>{const a=i.get(r),c=r.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&"),h=new RegExp(`\\\\b${c}\\\\b`,"gi");n=n.replace(h,d=>`<mark class="vocab-highlight" data-vocab-id="${a.id}" title="${a.english}">${d}</mark>`)}),n}const q={SPANISH:"spanish",ENGLISH:"english",CONJUGATIONS:"conjugations"};function Dn({type:e,item:t,isReviewed:n,onToggleReviewed:i,audioConfig:o,vocabList:r}){const[a,c]=E(q.SPANISH),{playPhrase:h,isPlaying:d}=Pn(o),f=e==="vocab"&&t.conjugations&&Object.keys(t.conjugations).length>0,l=X(()=>e!=="phrase"?"":In(t.spanish,r||[]),[e,t.spanish,r]),p=()=>{a===q.SPANISH?c(q.ENGLISH):a===q.ENGLISH&&f?c(q.CONJUGATIONS):c(q.SPANISH)},u=v=>Q(this,null,function*(){v.stopPropagation();try{yield h(t.spanish,t.audioUrl)}catch(y){console.warn(y)}}),_=v=>{v.stopPropagation(),i()},m=()=>e==="vocab"?a===q.ENGLISH?s("div",{className:"card-content english",children:[s("div",{className:"word",children:t.english}),s("div",{className:"word-type",children:t.type})]}):a===q.CONJUGATIONS&&f?s("div",{className:"card-content conjugations",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"conjugation-grid",children:Object.entries(t.conjugations).map(([v,y])=>s("div",{className:"tense-group",children:[s("div",{className:"tense-title",children:v}),s("div",{className:"conjugation-forms",children:Object.entries(y).map(([g,k])=>s("div",{className:"conjugation-item",children:[s("span",{className:"person",children:[g,":"]}),s("span",{className:"form",children:k})]},g))})]},v))})]}):s("div",{className:"card-content spanish",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"word-type",children:t.type})]}):a===q.ENGLISH?s("div",{className:"card-content english",children:s("div",{className:"phrase-text",children:t.english})}):s("div",{className:"card-content spanish",children:s("div",{className:"phrase-text",dangerouslySetInnerHTML:{__html:l}})});return s("div",{className:"study-card-wrapper",children:s("div",{className:`study-card ${e} ${a} ${n?"reviewed":""}`,onClick:p,role:"button",tabIndex:0,onKeyDown:v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),p())},"aria-label":`${e==="vocab"?"Vocabulary":"Phrase"} card ${t.spanish}`,children:[m(),s("div",{className:"right-buttons",children:[s("button",{className:`play-button ${d?"playing":""}`,disabled:d,onClick:u,"aria-label":"Play audio",children:d?s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[s("rect",{x:"6",y:"4",width:"4",height:"16"}),s("rect",{x:"14",y:"4",width:"4",height:"16"})]}):s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("polygon",{points:"5,3 19,12 5,21"})})}),s("button",{className:`review-button ${n?"active":""}`,onClick:_,"aria-pressed":n,"aria-label":n?"Unmark reviewed":"Mark reviewed",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12"})})})]})]})})}function ce({type:e,items:t=[],reviewedIds:n=[],onToggleReviewed:i,audioConfig:o,vocabList:r}){return t.length?s("div",{className:`study-collection ${e}`,children:t.map(a=>s(Dn,{type:e,item:a,isReviewed:n.includes(a.id),onToggleReviewed:()=>i(a.id),audioConfig:o,vocabList:r},`${a.weekId}-${e}-${a.id}`))}):s("div",{className:"empty-state",children:s("p",{children:["No ",e==="vocab"?"vocabulary":"phrases"," items"]})})}function Mn({weeks:e,viewMode:t,currentWeek:n,currentUnit:i,currentCourse:o,session:r,onMarkReviewed:a,audioConfig:c,onClearSelection:h}){var v,y;const[d,f]=E("vocab"),[l,p]=E(!1);if(G(()=>{if(!localStorage.getItem("hint.tapCycleShown")){p(!0);const g=setTimeout(()=>{p(!1),localStorage.setItem("hint.tapCycleShown","1")},2500);return()=>clearTimeout(g)}},[]),!e||e.length===0)return null;const u=X(()=>{const g=[],k=[];return e.forEach(N=>{N.vocab&&N.vocab.forEach(T=>{g.push(z(V({},T),{weekId:N.id,weekTitle:N.title,unitId:N.unitId,unitTitle:N.unitTitle}))}),N.phrases&&N.phrases.forEach(T=>{k.push(z(V({},T),{weekId:N.id,weekTitle:N.title,unitId:N.unitId,unitTitle:N.unitTitle}))})}),{vocab:g,phrases:k}},[e]),_=e.length===1?e[0]:null,m={vocabReviewed:((v=r.vocabReviewed)==null?void 0:v.length)||0,phraseReviewed:((y=r.phraseReviewed)==null?void 0:y.length)||0,vocabTotal:u.vocab.length,phraseTotal:u.phrases.length};return s("div",{className:"week-view",children:[_?s("div",{className:"hero",children:[s("h1",{className:"hero-title",children:_.title}),s("div",{className:"hero-progress",children:[s("div",{className:"counts",children:[m.vocabReviewed,"/",m.vocabTotal," words · ",m.phraseReviewed,"/",m.phraseTotal," phrases"]}),s("div",{className:"linear-track","aria-label":"Overall progress",children:s("div",{className:"linear-fill",style:{width:`${(m.vocabReviewed+m.phraseReviewed)/Math.max(1,m.vocabTotal+m.phraseTotal)*100}%`}})})]}),s("div",{className:"hero-actions",children:s("button",{className:"primary hero-cta",children:["Study ",_.title]})})]}):s("div",{className:"selection-chips","aria-label":"Selected weeks",children:[s("span",{className:"chips-label",children:"Selected:"}),s("div",{className:"chips-group",children:e.map(g=>s("span",{className:"chip",children:g.title},g.id))}),s("button",{className:"clear-chips",onClick:h,children:"Clear"})]}),s("div",{className:"tab-rail",children:[s("button",{className:`pill-tab ${d==="vocab"?"active":""}`,onClick:()=>f("vocab"),children:["Vocabulary ",s("span",{className:"count",children:u.vocab.length})]}),s("button",{className:`pill-tab ${d==="phrases"?"active":""}`,onClick:()=>f("phrases"),children:["Phrases ",s("span",{className:"count",children:u.phrases.length})]})]}),l&&s("div",{className:"tap-hint",children:"tap to cycle"}),s("div",{className:"tab-panels",children:[s("div",{className:`panel ${d==="vocab"?"active":""}`,children:d==="vocab"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(g=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:g.title}),s(ce,{type:"vocab",items:u.vocab.filter(k=>k.weekId===g.id),reviewedIds:r.vocabReviewed||[],onToggleReviewed:k=>a(k,"vocab"),audioConfig:c,vocabList:u.vocab})]},g.id))}):s(ce,{type:"vocab",items:u.vocab,reviewedIds:r.vocabReviewed||[],onToggleReviewed:g=>a(g,"vocab"),audioConfig:c,vocabList:u.vocab}))}),s("div",{className:`panel ${d==="phrases"?"active":""}`,children:d==="phrases"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(g=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:g.title}),s(ce,{type:"phrase",items:u.phrases.filter(k=>k.weekId===g.id),reviewedIds:r.phraseReviewed||[],onToggleReviewed:k=>a(k,"phrase"),audioConfig:c,vocabList:u.vocab})]},g.id))}):s(ce,{type:"phrase",items:u.phrases,reviewedIds:r.phraseReviewed||[],onToggleReviewed:g=>a(g,"phrase"),audioConfig:c,vocabList:u.vocab}))})]})]})}function Wn({isOpen:e,weeks:t,currentWeekId:n,onWeekSelect:i,onClose:o}){const[r,a]=E(new Date),c=X(()=>{if(!t||t.length===0)return{weeks:[],monthName:"",year:""};const d=r.toLocaleDateString("en-US",{month:"long"}),f=r.getFullYear();return{weeks:t.filter(p=>{if(!p.startDate)return!1;const u=new Date(p.startDate);return u.getMonth()===r.getMonth()&&u.getFullYear()===r.getFullYear()}).sort((p,u)=>new Date(p.startDate)-new Date(u.startDate)),monthName:d,year:f.toString()}},[t,r]),h=d=>{a(f=>{const l=new Date(f);return l.setMonth(f.getMonth()+d),l})};return!t||t.length===0?null:s("div",{className:`calendar-nav ${e?"open":""}`,children:[s("div",{className:"calendar-header",children:[s("h3",{children:"Calendar"}),s("button",{className:"close-button",onClick:o,"aria-label":"Close calendar",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"calendar-content",children:[s("div",{className:"month-navigation",children:[s("button",{className:"nav-arrow",onClick:()=>h(-1),"aria-label":"Previous month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"15,18 9,12 15,6"})})}),s("h4",{className:"month-title",children:[c.monthName," ",c.year]}),s("button",{className:"nav-arrow",onClick:()=>h(1),"aria-label":"Next month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"9,6 15,12 9,18"})})})]}),s("div",{className:"calendar-weeks",children:c.weeks.length>0?c.weeks.map(d=>s("button",{className:`calendar-week-item ${n===d.id?"active":""}`,onClick:()=>i(d.id),children:[s("div",{className:"week-info",children:[s("h5",{className:"week-title",children:d.title}),s("p",{className:"week-dates",children:An(d)})]}),n===d.id&&s("div",{className:"active-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]},d.id)):s("div",{className:"no-weeks",children:s("p",{children:["No weeks available for ",c.monthName]})})})]})]})}function An(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),i=t.getMonth()===n.getMonth(),o=new Intl.DateTimeFormat("en-US",{month:"short"}),r=o.format(t),a=o.format(n),c=t.getFullYear();return i?`${r} ${t.getDate()}–${n.getDate()}, ${c}`:`${r} ${t.getDate()} – ${a} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}function Un({weeks:e=[],currentWeekId:t,session:n,onReset:i}){var p,u;if(!e||e.length===0||!n)return null;let o=0,r=0;e.forEach(_=>{var m,v;o+=((m=_.vocab)==null?void 0:m.length)||0,r+=((v=_.phrases)==null?void 0:v.length)||0});const a=((p=n.vocabReviewed)==null?void 0:p.length)||0,c=((u=n.phraseReviewed)==null?void 0:u.length)||0;if(!(o+r>0))return null;const d=o?a/o*100:0,f=r?c/r*100:0,l=a>0||c>0;return s("div",{className:"progress-bar-container mini",children:s("div",{className:"progress-content split",children:[s("div",{className:"counter-group","aria-label":"Vocabulary progress",children:[s("span",{className:"counter-label",children:["Words ",a,"/",o]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${d}%`}})})]}),s("div",{className:"counter-group","aria-label":"Phrases progress",children:[s("span",{className:"counter-label",children:["Phrases ",c,"/",r]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${f}%`}})})]}),l&&s("button",{className:"reset-button link",onClick:i,"aria-label":"Reset session progress",children:"Reset"})]})})}function Ln({config:e,currentWeekId:t,currentUnitId:n,currentCourseId:i,selectionStates:o,onWeekSelect:r,onUnitSelect:a,onCourseSelect:c,onWeekToggle:h,onUnitToggle:d,onCourseToggle:f}){var $,O,R,x,H;const[l,p]=E(new Set((($=e.courses)==null?void 0:$.map(w=>w.id))||[])),u=(e.courses||[]).flatMap(w=>(w.units||[]).map(C=>C.id)),[_,m]=E(new Set(u));if(!e||!e.courses||e.courses.length===0)return s("div",{className:"full-nav-view",children:s("div",{className:"empty-state",children:[s("h2",{children:"No Content Available"}),s("p",{children:"No courses or weeks are configured."})]})});const v=w=>{try{return{vocabReviewed:JSON.parse(localStorage.getItem(`session.vocabReviewed.${w}`)||"[]"),phraseReviewed:JSON.parse(localStorage.getItem(`session.phraseReviewed.${w}`)||"[]")}}catch(C){return{vocabReviewed:[],phraseReviewed:[]}}},y=w=>{if(!w.vocab||!w.phrases)return!1;const C=v(w.id),D=w.vocab.map(W=>W.id),P=w.phrases.map(W=>W.id);return D.every(W=>C.vocabReviewed.includes(W))&&P.every(W=>C.phraseReviewed.includes(W))&&D.length>0&&P.length>0},g=w=>{var C;return((C=w.weeks)==null?void 0:C.length)&&w.weeks.every(y)},k=w=>{var C;return((C=w.units)==null?void 0:C.length)&&w.units.every(g)},N=w=>{const C=new Set(l);C.has(w)?C.delete(w):C.add(w),p(C)},T=w=>{const C=new Set(_);C.has(w)?C.delete(w):C.add(w),m(C)};(O=e.weeks)==null||O.find(w=>w.id===e.app.current_week_id);const L=(()=>{var w,C;for(const D of e.courses)for(const P of D.units||[])for(const W of P.weeks||[]){const Y=v(W.id),U=((w=W.vocab)==null?void 0:w.map(B=>B.id))||[],I=((C=W.phrases)==null?void 0:C.map(B=>B.id))||[];if(!(U.length>0&&I.length>0&&U.every(B=>Y.vocabReviewed.includes(B))&&I.every(B=>Y.phraseReviewed.includes(B))))return W}return null})()||((R=e.weeks)==null?void 0:R[0]);let b={vocab:0,phrases:0};return L&&(b.vocab=((x=L.vocab)==null?void 0:x.length)||0,b.phrases=((H=L.phrases)==null?void 0:H.length)||0),s("div",{className:"full-nav-view",children:[L&&s("div",{className:"landing-hero",children:s("div",{className:"hero-left",children:[s("h1",{className:"hero-h1",children:L.title}),s("div",{className:"hero-progress-line","aria-label":"Week item counts",children:s("span",{children:[b.vocab," words · ",b.phrases," phrases"]})}),s("button",{className:"primary hero-start",onClick:()=>r(L.id),children:["Study ",L.title]})]})}),s("div",{className:"nav-content",children:e.courses.map(w=>{var C,D;return s("div",{className:"course-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item course-item has-children ${l.has(w.id)?"current":""}`,onClick:()=>N(w.id),"aria-expanded":l.has(w.id),children:[s("div",{className:"section-content",children:[s("h3",{className:"section-title",children:w.title}),s("p",{className:"section-meta",children:["Units ",((C=w.units)==null?void 0:C.length)||0]})]}),s("div",{className:"section-actions",children:[s(ee,{state:((D=o.courses)==null?void 0:D[w.id])||"none",onClick:P=>{P.stopPropagation(),f(w.id)},size:"medium"}),k(w)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),l.has(w.id)&&w.units&&s("div",{className:"section-children",children:w.units.map(P=>{var W,Y;return s("div",{className:"unit-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item unit-item has-children ${_.has(P.id)?"current":""}`,onClick:()=>T(P.id),"aria-expanded":_.has(P.id),children:[s("div",{className:"section-content",children:[s("h4",{className:"section-title",children:P.title}),s("p",{className:"section-meta",children:["Weeks ",((W=P.weeks)==null?void 0:W.length)||0]})]}),s("div",{className:"section-actions",children:[s(ee,{state:((Y=o.units)==null?void 0:Y[P.id])||"none",onClick:U=>{U.stopPropagation(),d(P.id)},size:"medium"}),g(P)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),_.has(P.id)&&P.weeks&&s("div",{className:"section-children",children:s("div",{className:"weeks-grid",children:P.weeks.map(U=>{var I,ve;return s("button",{className:`week-card ${t===U.id?"current":""} ${(I=o.weeks)!=null&&I[U.id]?"selected":""}`,onClick:()=>h(U.id),children:[s("div",{className:"week-card-content",children:[s("h5",{className:"week-title",children:U.title}),s("p",{className:"week-dates",children:On(U)})]}),s("div",{className:"week-actions",children:[s(ee,{state:(ve=o.weeks)!=null&&ve[U.id]?"selected":"none",onClick:B=>{B.stopPropagation(),h(U.id)},size:"small"}),y(U)&&s("div",{className:"reviewed-indicator small",children:s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},U.id)})})})]},P.id)})})]},w.id)})})]})}function On(e){if(e.startDate&&e.endDate)try{const t=new Date(e.startDate),n=new Date(e.endDate),i=t.getMonth()===n.getMonth(),o=new Intl.DateTimeFormat("en-US",{month:"short"}),r=o.format(t),a=o.format(n),c=t.getFullYear();return i?`${r} ${t.getDate()}–${n.getDate()}, ${c}`:`${r} ${t.getDate()} – ${a} ${n.getDate()}, ${c}`}catch(t){}return e.dateRange||""}const gt="2025-08-04",yt="spanish-1",wt="unit-1-basics",bt="Week 0: Saludos",Nt="2025-08-04",St="2025-08-10",kt=[{id:"hola",spanish:"hola",english:"hello",type:"interjection"},{id:"adios",spanish:"adiós",english:"goodbye",type:"interjection"},{id:"ser",spanish:"ser",english:"to be (essential)",type:"verb",conjugations:{present:{yo:"soy",tú:"eres","él/ella":"es",nosotros:"somos",vosotros:"sois",ellos:"son"},preterite:{yo:"fui",tú:"fuiste","él/ella":"fue",nosotros:"fuimos",vosotros:"fuisteis",ellos:"fueron"}}},{id:"estar",spanish:"estar",english:"to be (temporary)",type:"verb",conjugations:{present:{yo:"estoy",tú:"estás","él/ella":"está",nosotros:"estamos",vosotros:"estáis",ellos:"están"}}}],$t=[{id:"p1",spanish:"Hola, ¿cómo estás?",english:"Hi, how are you?",audioUrl:""},{id:"p2",spanish:"Yo soy estudiante.",english:"I am a student.",audioUrl:""},{id:"p3",spanish:"Adiós, hasta mañana.",english:"Goodbye, see you tomorrow.",audioUrl:""}],jn={id:gt,courseId:yt,unitId:wt,title:bt,startDate:Nt,endDate:St,vocab:kt,phrases:$t},Fn=Object.freeze(Object.defineProperty({__proto__:null,courseId:yt,default:jn,endDate:St,id:gt,phrases:$t,startDate:Nt,title:bt,unitId:wt,vocab:kt},Symbol.toStringTag,{value:"Module"})),Ct="2025-08-11",xt="spanish-1",Et="unit-1-basics",Rt="Week 0: En la Escuela",Pt="2025-08-11",Tt="2025-08-17",It=[{id:"lapiz",spanish:"lápiz",english:"pencil",type:"noun"},{id:"libro",spanish:"libro",english:"book",type:"noun"},{id:"estudiar",spanish:"estudiar",english:"to study",type:"verb",conjugations:{present:{yo:"estudio",tú:"estudias","él/ella":"estudia",nosotros:"estudiamos",vosotros:"estudiáis",ellos:"estudian"}}}],Dt=[{id:"p1",spanish:"Necesito un lápiz.",english:"I need a pencil.",audioUrl:""},{id:"p2",spanish:"Yo estudio español cada día.",english:"I study Spanish every day.",audioUrl:""}],Hn={id:Ct,courseId:xt,unitId:Et,title:Rt,startDate:Pt,endDate:Tt,vocab:It,phrases:Dt},Vn=Object.freeze(Object.defineProperty({__proto__:null,courseId:xt,default:Hn,endDate:Tt,id:Ct,phrases:Dt,startDate:Pt,title:Rt,unitId:Et,vocab:It},Symbol.toStringTag,{value:"Module"})),Mt="2025-08-18",Wt="spanish-1",At="unit-1-basics",Ut="Week 3: Family & Basics Review",Lt="2025-08-18",Ot="2025-08-24",jt=[{id:"familia",spanish:"familia",english:"family",type:"noun"},{id:"madre",spanish:"madre",english:"mother",type:"noun"},{id:"padre",spanish:"padre",english:"father",type:"noun"},{id:"hermano",spanish:"hermano",english:"brother",type:"noun"},{id:"hermana",spanish:"hermana",english:"sister",type:"noun"},{id:"amigo",spanish:"amigo",english:"friend (male)",type:"noun"},{id:"amiga",spanish:"amiga",english:"friend (female)",type:"noun"},{id:"clase",spanish:"clase",english:"class",type:"noun"},{id:"casa",spanish:"casa",english:"house",type:"noun"},{id:"escuela",spanish:"escuela",english:"school",type:"noun"},{id:"ciudad",spanish:"ciudad",english:"city",type:"noun"},{id:"perro",spanish:"perro",english:"dog",type:"noun"},{id:"gato",spanish:"gato",english:"cat",type:"noun"},{id:"comida",spanish:"comida",english:"food",type:"noun"},{id:"tener",spanish:"tener",english:"to have",type:"verb",conjugations:{present:{yo:"tengo",tú:"tienes","él/ella":"tiene",nosotros:"tenemos",vosotros:"tenéis",ellos:"tienen"},preterite:{yo:"tuve",tú:"tuviste","él/ella":"tuvo",nosotros:"tuvimos",vosotros:"tuvisteis",ellos:"tuvieron"}}},{id:"vivir",spanish:"vivir",english:"to live",type:"verb",conjugations:{present:{yo:"vivo",tú:"vives","él/ella":"vive",nosotros:"vivimos",vosotros:"vivís",ellos:"viven"},preterite:{yo:"viví",tú:"viviste","él/ella":"vivió",nosotros:"vivimos",vosotros:"vivisteis",ellos:"vivieron"}}},{id:"comer",spanish:"comer",english:"to eat",type:"verb",conjugations:{present:{yo:"como",tú:"comes","él/ella":"come",nosotros:"comemos",vosotros:"coméis",ellos:"comen"},preterite:{yo:"comí",tú:"comiste","él/ella":"comió",nosotros:"comimos",vosotros:"comisteis",ellos:"comieron"}}},{id:"gustar",spanish:"gustar",english:"to like",type:"verb",conjugations:{present:{yo:"me gusta",tú:"te gusta","él/ella":"le gusta",nosotros:"nos gusta",vosotros:"os gusta",ellos:"les gusta"},preterite:{yo:"me gustó",tú:"te gustó","él/ella":"le gustó",nosotros:"nos gustó",vosotros:"os gustó",ellos:"les gustó"}}},{id:"visitar",spanish:"visitar",english:"to visit",type:"verb",conjugations:{present:{yo:"visito",tú:"visitas","él/ella":"visita",nosotros:"visitamos",vosotros:"visitáis",ellos:"visitan"},preterite:{yo:"visité",tú:"visitaste","él/ella":"visitó",nosotros:"visitamos",vosotros:"visitasteis",ellos:"visitaron"}}},{id:"cocinar",spanish:"cocinar",english:"to cook",type:"verb",conjugations:{present:{yo:"cocino",tú:"cocinas","él/ella":"cocina",nosotros:"cocinamos",vosotros:"cocináis",ellos:"cocinan"},preterite:{yo:"cociné",tú:"cocinaste","él/ella":"cocinó",nosotros:"cocinamos",vosotros:"cocinasteis",ellos:"cocinaron"}}}],Ft=[{id:"p1",spanish:"Tengo una familia grande.",english:"I have a big family.",audioUrl:""},{id:"p2",spanish:"Mi madre vive en España.",english:"My mother lives in Spain.",audioUrl:""},{id:"p3",spanish:"Mi padre come en la cocina.",english:"My father eats in the kitchen.",audioUrl:""},{id:"p4",spanish:"Mi hermana y yo estudiamos juntos.",english:"My sister and I study together.",audioUrl:""},{id:"p5",spanish:"Mi hermano tiene un libro nuevo.",english:"My brother has a new book.",audioUrl:""},{id:"p6",spanish:"A mi amigo le gusta el español.",english:"My friend likes Spanish.",audioUrl:""},{id:"p7",spanish:"Mis amigos viven cerca de la escuela.",english:"My friends live near the school.",audioUrl:""},{id:"p8",spanish:"Tenemos clase el martes.",english:"We have class on Tuesday.",audioUrl:""},{id:"p9",spanish:"A mi amiga le gusta comer pizza.",english:"My (female) friend likes to eat pizza.",audioUrl:""},{id:"p10",spanish:"Mi familia vive en una casa pequeña.",english:"My family lives in a small house.",audioUrl:""}],Bn={id:Mt,courseId:Wt,unitId:At,title:Ut,startDate:Lt,endDate:Ot,vocab:jt,phrases:Ft},zn=Object.freeze(Object.defineProperty({__proto__:null,courseId:Wt,default:Bn,endDate:Ot,id:Mt,phrases:Ft,startDate:Lt,title:Ut,unitId:At,vocab:jt},Symbol.toStringTag,{value:"Module"}));function qn(){const[e,t]=E(null),[n,i]=E(!0),[o,r]=E(null);return G(()=>{Q(this,null,function*(){try{i(!0),r(null);const c=yield fetch("/config.json");if(!c.ok)throw new Error(`Failed to load config: ${c.status}`);const h=yield c.json();let d;if(h.courses){d={app:h.app,courses:h.courses,units:[],weeks:[]},h.courses.forEach(f=>{f.units.forEach(l=>{d.units.push(z(V({},l),{courseId:f.id,courseTitle:f.title,weeks:[]}))})});try{const l=Object.values(Object.assign({"../weeks/spanish-1/unit-1-basics/2025-08-04.json":Fn,"../weeks/spanish-1/unit-1-basics/2025-08-11.json":Vn,"../weeks/spanish-1/unit-1-basics/2025-08-18.json":zn})).map(p=>p.default||p);if(l.length){const p={};d.courses.forEach(u=>{u.units.forEach(_=>{p[_.id]={unit:_,course:u}})}),l.forEach(u=>{const _=p[u.unitId];if(!_){console.warn("Week references unknown unitId",u.unitId,"in",u.id);return}const{unit:m,course:v}=_;m.weeks.push(u),d.weeks.push(z(V({},u),{unitTitle:m.title,courseId:v.id,courseTitle:v.title}))})}}catch(f){console.error("Error loading week modules",f)}}else if(h.weeks)d={app:z(V({},h.app),{current_unit_id:"default-unit",current_course_id:"default-course"}),courses:[{id:"default-course",title:"Spanish Course",description:"Spanish language course",units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",weeks:h.weeks}]}],units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",courseId:"default-course",courseTitle:"Spanish Course",weeks:h.weeks}],weeks:h.weeks.map(f=>z(V({},f),{unitId:"default-unit",unitTitle:"Spanish Lessons",courseId:"default-course",courseTitle:"Spanish Course"}))};else throw new Error("Invalid config format: missing courses or weeks");if(!d.app||!Array.isArray(d.weeks))throw new Error("Invalid config format after processing");t(d)}catch(c){console.error("Failed to load config:",c),r(c.message)}finally{i(!1)}})},[]),{config:e,loading:n,error:o}}function Jn(){return new Promise(e=>{const t=window.speechSynthesis;if(!t){e([]);return}let n=t.getVoices();if(n&&n.length){e(n);return}const i=()=>{n=t.getVoices(),n&&n.length&&(t.removeEventListener("voiceschanged",i),e(n))};t.addEventListener("voiceschanged",i),setTimeout(()=>{n=t.getVoices(),t.removeEventListener("voiceschanged",i),e(n||[])},1500)})}function Kn({isOpen:e,onClose:t,onSelect:n}){const[i,o]=E([]),[r,a]=E(""),[c,h]=E(!1),[d,f]=E(localStorage.getItem("prefs.tts.voice")||""),l=j(()=>Q(this,null,function*(){h(!0);const m=(yield Jn()).filter(v=>/(^|-)es(-|$)/i.test(v.lang)||v.lang.toLowerCase().startsWith("es"));m.sort((v,y)=>v.lang.localeCompare(y.lang)||v.name.localeCompare(y.name)),o(m),h(!1)}),[]);G(()=>{e&&l()},[e,l]);const p=_=>{f(_.name),localStorage.setItem("prefs.tts.voice",_.name),localStorage.setItem("prefs.tts.voiceLang",_.lang),n==null||n(_),t==null||t()};if(!e)return null;const u=i.filter(_=>!r||_.name.toLowerCase().includes(r.toLowerCase()));return s("div",{className:"voice-modal-overlay",onClick:t,children:s("div",{className:"voice-modal",role:"dialog","aria-modal":"true",onClick:_=>_.stopPropagation(),children:[s("div",{className:"voice-modal-header",children:[s("h3",{children:"Select Voice"}),s("button",{className:"close-button",onClick:t,"aria-label":"Close voice selector",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"voice-filter-row",children:[s("input",{type:"text",className:"voice-filter",placeholder:"Filter voices",value:r,onInput:_=>a(_.target.value)}),s("button",{className:"refresh",onClick:l,disabled:c,children:c?"...":"↻"})]}),s("div",{className:"voice-list",role:"list",children:[u.map(_=>{const m=d===_.name;return s("button",{className:`voice-item ${m?"selected":""}`,onClick:()=>p(_),children:[s("div",{className:"voice-main",children:[s("span",{className:"voice-name",children:_.name}),m&&s("span",{className:"badge",children:"Default"})]}),s("div",{className:"voice-meta",children:_.lang})]},_.name+_.lang)}),!u.length&&s("div",{className:"empty",children:"No voices found"})]}),s("div",{className:"voice-footer",children:s("p",{className:"hint",children:["Spanish voices detected: ",i.length]})})]})})}const Gn=24*60*60*1e3;function Yn(e){const[t,n]=E({vocabReviewed:[],phraseReviewed:[],startedAt:null});G(()=>{if(!e)return;(()=>{try{const c=`session.vocabReviewed.${e}`,h=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`,f=JSON.parse(localStorage.getItem(c)||"[]"),l=JSON.parse(localStorage.getItem(h)||"[]"),p=localStorage.getItem(d);if(p&&Date.now()-parseInt(p)>Gn){localStorage.removeItem(c),localStorage.removeItem(h),localStorage.removeItem(d),n({vocabReviewed:[],phraseReviewed:[],startedAt:null});return}n({vocabReviewed:f,phraseReviewed:l,startedAt:p?parseInt(p):null})}catch(c){console.error("Failed to load session:",c),n({vocabReviewed:[],phraseReviewed:[],startedAt:null})}})()},[e]);const i=j(a=>{if(e)try{const c=`session.vocabReviewed.${e}`,h=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`;localStorage.setItem(c,JSON.stringify(a.vocabReviewed)),localStorage.setItem(h,JSON.stringify(a.phraseReviewed)),a.startedAt&&localStorage.setItem(d,a.startedAt.toString())}catch(c){console.error("Failed to save session:",c)}},[e]),o=j((a,c)=>{e&&n(h=>{const d=Date.now(),f=h.startedAt||d;let l;if(c==="vocab"){const p=h.vocabReviewed.includes(a)?h.vocabReviewed.filter(u=>u!==a):[...h.vocabReviewed,a];l=z(V({},h),{vocabReviewed:p,startedAt:f})}else if(c==="phrase"){const p=h.phraseReviewed.includes(a)?h.phraseReviewed.filter(u=>u!==a):[...h.phraseReviewed,a];l=z(V({},h),{phraseReviewed:p,startedAt:f})}else return h;return i(l),l})},[e,i]),r=j(()=>{if(!e)return;n({vocabReviewed:[],phraseReviewed:[],startedAt:null});try{localStorage.removeItem(`session.vocabReviewed.${e}`),localStorage.removeItem(`session.phraseReviewed.${e}`),localStorage.removeItem(`session.startedAt.${e}`)}catch(c){console.error("Failed to clear session:",c)}},[e]);return{session:t,markReviewed:o,resetSession:r}}function Qn(e,t){const[n,i]=E(new Set(t?[t]:[])),o=X(()=>{var p,u;if(!e||!e.courses)return{};const l={weeks:{},units:{},courses:{}};return n.forEach(_=>{l.weeks[_]="selected"}),(p=e.units)==null||p.forEach(_=>{var y;const m=_.weeks&&_.weeks.length>0?_.weeks:((y=e.weeks)==null?void 0:y.filter(g=>g.unitId===_.id))||[],v=m.filter(g=>n.has(g.id)).length;m.length===0||v===0?l.units[_.id]="none":v===m.length?l.units[_.id]="selected":l.units[_.id]="partial"}),(u=e.courses)==null||u.forEach(_=>{var y;const m=[];(y=_.units)==null||y.forEach(g=>{var k;(k=g.weeks)==null||k.forEach(N=>m.push(N))});const v=m.filter(g=>n.has(g.id)).length;v===0?l.courses[_.id]="none":v===m.length?l.courses[_.id]="selected":l.courses[_.id]="partial"}),l},[e,n]),r=j(l=>{i(p=>{const u=new Set(p);return u.has(l)?u.delete(l):u.add(l),u})},[]),a=j(l=>{var m;if(!e)return;let p=[];const u=(m=e.units)==null?void 0:m.find(v=>v.id===l);if(u!=null&&u.weeks&&u.weeks.length>0?p=u.weeks.map(v=>v.id):e.weeks&&(p=e.weeks.filter(v=>v.unitId===l).map(v=>v.id)),p.length===0)return;const _=o.units[l];i(v=>{const y=new Set(v);return _==="selected"?p.forEach(g=>y.delete(g)):p.forEach(g=>y.add(g)),y})},[e,o]),c=j(l=>{if(!(e!=null&&e.courses))return;const p=e.courses.find(m=>m.id===l);if(!(p!=null&&p.units))return;const u=[];p.units.forEach(m=>{var v;(v=m.weeks)==null||v.forEach(y=>u.push(y.id))});const _=o.courses[l];i(m=>{const v=new Set(m);return _==="selected"?u.forEach(y=>v.delete(y)):u.forEach(y=>v.add(y)),v})},[e,o]),h=X(()=>e!=null&&e.weeks?e.weeks.filter(l=>n.has(l.id)):[],[e,n]),d=j(()=>{i(new Set)},[]),f=j(l=>{i(new Set([l]))},[]);return{selectedWeekIds:n,selectionStates:o,selectedWeeks:h,toggleWeekSelection:r,toggleUnitSelection:a,toggleCourseSelection:c,clearSelection:d,selectSingleWeek:f,hasSelection:n.size>0,selectionCount:n.size}}function Zn(){var W,Y,U;const[e,t]=E(!1),[n,i]=E(!1),[o,r]=E(!1),[a,c]=E(null),[h,d]=E("week"),[f,l]=E(null),[p,u]=E(null),{config:_,loading:m,error:v}=qn(),{session:y,markReviewed:g,resetSession:k}=Yn(a),{selectedWeekIds:N,selectionStates:T,selectedWeeks:F,toggleWeekSelection:L,toggleUnitSelection:b,toggleCourseSelection:$,selectSingleWeek:O}=Qn(_,a);G(()=>{_&&!a&&(l(_.app.current_unit_id),u(_.app.current_course_id))},[_,a]),G(()=>{if(!a&&N&&N.size>0){const I=N.values().next().value;I&&c(I)}},[a,N]);const R=(W=_==null?void 0:_.weeks)==null?void 0:W.find(I=>I.id===a),x=(Y=_==null?void 0:_.units)==null?void 0:Y.find(I=>I.id===f),H=(U=_==null?void 0:_.courses)==null?void 0:U.find(I=>I.id===p),w=I=>{c(I),d("week"),O(I),t(!1),i(!1)},C=I=>{l(I),d("unit"),t(!1),i(!1)},D=I=>{u(I),d("course"),t(!1),i(!1)},P=()=>{N&&N.size&&Array.from(N).forEach(I=>L(I))};return m?s("div",{className:"app loading",children:s("div",{className:"loading-spinner",children:[s("div",{className:"spinner"}),s("p",{children:"Loading Spanish Weekly..."})]})}):v||!_?s("div",{className:"app error",children:s("div",{className:"error-message",children:[s("h2",{children:"Oops! Can't load this week."}),s("p",{children:"Pull to refresh or try again later."}),s("button",{onClick:()=>window.location.reload(),children:"Refresh"})]})}):s("div",{className:"app",children:[s(xn,{title:_.app.title,viewMode:h,currentWeek:R,currentUnit:x,currentCourse:H,onSideNavToggle:()=>t(!e),onCalendarToggle:()=>i(!n),onVoiceToggle:()=>r(!0)}),s(En,{isOpen:e,config:_,currentWeekId:a,currentUnitId:f,currentCourseId:p,selectionStates:T,onWeekSelect:w,onUnitSelect:C,onCourseSelect:D,onWeekToggle:L,onUnitToggle:b,onCourseToggle:$,onClose:()=>t(!1),onVoiceToggle:()=>{t(!1),r(!0)}}),s(Wn,{isOpen:n,weeks:_.weeks,currentWeekId:a,onWeekSelect:w,onClose:()=>i(!1)}),s("main",{className:"main-content",children:F.length>0?s(Mn,{weeks:F,viewMode:h,currentWeek:R,currentUnit:x,currentCourse:H,session:y,onMarkReviewed:g,audioConfig:_.app.audio,onClearSelection:P}):s(Ln,{config:_,currentWeekId:a,currentUnitId:f,currentCourseId:p,selectionStates:T,onWeekSelect:w,onUnitSelect:C,onCourseSelect:D,onWeekToggle:L,onUnitToggle:b,onCourseToggle:$})}),s(Un,{weeks:F,currentWeekId:a,session:y,onReset:k}),(e||n)&&s("div",{className:"overlay",onClick:()=>{t(!1),i(!1)}}),s(Kn,{isOpen:o,onClose:()=>r(!1)}),s(Cn,{})]})}Zt(s(Zn,{}),document.getElementById("app"));
