var Xe=Object.defineProperty,Ze=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var ke=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var Ce=(e,t,n)=>t in e?Xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V=(e,t)=>{for(var n in t||(t={}))tt.call(t,n)&&Ce(e,n,t[n]);if(ke)for(var n of ke(t))nt.call(t,n)&&Ce(e,n,t[n]);return e},z=(e,t)=>Ze(e,et(t));var Y=(e,t,n)=>new Promise((i,l)=>{var a=u=>{try{c(n.next(u))}catch(d){l(d)}},o=u=>{try{c(n.throw(u))}catch(d){l(d)}},c=u=>u.done?i(u.value):Promise.resolve(u.value).then(a,o);c((n=n.apply(e,t)).next())});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();var de,R,He,G,$e,Fe,Oe,De,we,ve,fe,ee={},Be=[],st=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function K(e,t){for(var n in t)e[n]=t[n];return e}function ye(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function rt(e,t,n){var i,l,a,o={};for(a in t)a=="key"?i=t[a]:a=="ref"?l=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?de.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)o[a]===void 0&&(o[a]=e.defaultProps[a]);return ae(e,o,i,l,null)}function ae(e,t,n,i,l){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l==null?++He:l,__i:-1,__u:0};return l==null&&R.vnode!=null&&R.vnode(a),a}function ue(e){return e.children}function le(e,t){this.props=e,this.context=t}function X(e,t){if(t==null)return e.__?X(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?X(e):null}function je(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return je(e)}}function Re(e){(!e.__d&&(e.__d=!0)&&G.push(e)&&!ce.__r++||$e!=R.debounceRendering)&&(($e=R.debounceRendering)||Fe)(ce)}function ce(){for(var e,t,n,i,l,a,o,c=1;G.length;)G.length>c&&G.sort(Oe),e=G.shift(),c=G.length,e.__d&&(n=void 0,l=(i=(t=e).__v).__e,a=[],o=[],t.__P&&((n=K({},i)).__v=i.__v+1,R.vnode&&R.vnode(n),Ne(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[l]:null,a,l==null?X(i):l,!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,Je(a,n,o),n.__e!=l&&je(n)));ce.__r=0}function Ve(e,t,n,i,l,a,o,c,u,d,p){var r,h,_,m,f,g,w=i&&i.__k||Be,v=t.length;for(u=it(n,t,w,u,v),r=0;r<v;r++)(_=n.__k[r])!=null&&(h=_.__i==-1?ee:w[_.__i]||ee,_.__i=r,g=Ne(e,_,h,l,a,o,c,u,d,p),m=_.__e,_.ref&&h.ref!=_.ref&&(h.ref&&be(h.ref,null,_),p.push(_.ref,_.__c||m,_)),f==null&&m!=null&&(f=m),4&_.__u||h.__k===_.__k?u=ze(_,u,e):typeof _.type=="function"&&g!==void 0?u=g:m&&(u=m.nextSibling),_.__u&=-7);return n.__e=f,u}function it(e,t,n,i,l){var a,o,c,u,d,p=n.length,r=p,h=0;for(e.__k=new Array(l),a=0;a<l;a++)(o=t[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(u=a+h,(o=e.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?ae(null,o,null,null,null):he(o)?ae(ue,{children:o},null,null,null):o.constructor==null&&o.__b>0?ae(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,c=null,(d=o.__i=at(o,n,u,r))!=-1&&(r--,(c=n[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(l>p?h--:l<p&&h++),typeof o.type!="function"&&(o.__u|=4)):d!=u&&(d==u-1?h--:d==u+1?h++:(d>u?h--:h++,o.__u|=4))):e.__k[a]=null;if(r)for(a=0;a<p;a++)(c=n[a])!=null&&!(2&c.__u)&&(c.__e==i&&(i=X(c)),Ge(c,c));return i}function ze(e,t,n){var i,l;if(typeof e.type=="function"){for(i=e.__k,l=0;i&&l<i.length;l++)i[l]&&(i[l].__=e,t=ze(i[l],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=X(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function at(e,t,n,i){var l,a,o,c=e.key,u=e.type,d=t[n],p=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||p&&c==d.key&&u==d.type)return n;if(i>(p?1:0)){for(l=n-1,a=n+1;l>=0||a<t.length;)if((d=t[o=l>=0?l--:a++])!=null&&!(2&d.__u)&&c==d.key&&u==d.type)return o}return-1}function xe(e,t,n){t[0]=="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||st.test(t)?n:n+"px"}function re(e,t,n,i,l){var a,o;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||xe(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||xe(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(De,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=we,e.addEventListener(t,a?fe:ve,a)):e.removeEventListener(t,a?fe:ve,a);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n==null?"":n;break e}catch(c){}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Ee(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=we++;else if(t.t<n.u)return;return n(R.event?R.event(t):t)}}}function Ne(e,t,n,i,l,a,o,c,u,d){var p,r,h,_,m,f,g,w,v,$,C,U,B,N,S,A,M,k=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),a=[c=t.__e=n.__e]),(p=R.__b)&&p(t);e:if(typeof k=="function")try{if(w=t.props,v="prototype"in k&&k.prototype.render,$=(p=k.contextType)&&i[p.__c],C=p?$?$.props.value:p.__:i,n.__c?g=(r=t.__c=n.__c).__=r.__E:(v?t.__c=r=new k(w,C):(t.__c=r=new le(w,C),r.constructor=k,r.render=ot),$&&$.sub(r),r.props=w,r.state||(r.state={}),r.context=C,r.__n=i,h=r.__d=!0,r.__h=[],r._sb=[]),v&&r.__s==null&&(r.__s=r.state),v&&k.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=K({},r.__s)),K(r.__s,k.getDerivedStateFromProps(w,r.__s))),_=r.props,m=r.state,r.__v=t,h)v&&k.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),v&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&w!==_&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(w,C),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(w,r.__s,C)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(r.props=w,r.state=r.__s,r.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(I){I&&(I.__=t)}),U=0;U<r._sb.length;U++)r.__h.push(r._sb[U]);r._sb=[],r.__h.length&&o.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(w,r.__s,C),v&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(_,m,f)})}if(r.context=C,r.props=w,r.__P=e,r.__e=!1,B=R.__r,N=0,v){for(r.state=r.__s,r.__d=!1,B&&B(t),p=r.render(r.props,r.state,r.context),S=0;S<r._sb.length;S++)r.__h.push(r._sb[S]);r._sb=[]}else do r.__d=!1,B&&B(t),p=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++N<25);r.state=r.__s,r.getChildContext!=null&&(i=K(K({},i),r.getChildContext())),v&&!h&&r.getSnapshotBeforeUpdate!=null&&(f=r.getSnapshotBeforeUpdate(_,m)),A=p,p!=null&&p.type===ue&&p.key==null&&(A=Ke(p.props.children)),c=Ve(e,he(A)?A:[A],t,n,i,l,a,o,c,u,d),r.base=t.__e,t.__u&=-161,r.__h.length&&o.push(r),g&&(r.__E=r.__=null)}catch(I){if(t.__v=null,u||a!=null)if(I.then){for(t.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;a[a.indexOf(c)]=null,t.__e=c}else{for(M=a.length;M--;)ye(a[M]);me(t)}else t.__e=n.__e,t.__k=n.__k,I.then||me(t);R.__e(I,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=lt(n.__e,t,n,i,l,a,o,u,d);return(p=R.diffed)&&p(t),128&t.__u?void 0:c}function me(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(me)}function Je(e,t,n){for(var i=0;i<n.length;i++)be(n[i],n[++i],n[++i]);R.__c&&R.__c(t,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(a){a.call(l)})}catch(a){R.__e(a,l.__v)}})}function Ke(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:he(e)?e.map(Ke):K({},e)}function lt(e,t,n,i,l,a,o,c,u){var d,p,r,h,_,m,f,g=n.props,w=t.props,v=t.type;if(v=="svg"?l="http://www.w3.org/2000/svg":v=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((_=a[d])&&"setAttribute"in _==!!v&&(v?_.localName==v:_.nodeType==3)){e=_,a[d]=null;break}}if(e==null){if(v==null)return document.createTextNode(w);e=document.createElementNS(l,v,w.is&&w),c&&(R.__m&&R.__m(t,a),c=!1),a=null}if(v==null)g===w||c&&e.data==w||(e.data=w);else{if(a=a&&de.call(e.childNodes),g=n.props||ee,!c&&a!=null)for(g={},d=0;d<e.attributes.length;d++)g[(_=e.attributes[d]).name]=_.value;for(d in g)if(_=g[d],d!="children"){if(d=="dangerouslySetInnerHTML")r=_;else if(!(d in w)){if(d=="value"&&"defaultValue"in w||d=="checked"&&"defaultChecked"in w)continue;re(e,d,null,_,l)}}for(d in w)_=w[d],d=="children"?h=_:d=="dangerouslySetInnerHTML"?p=_:d=="value"?m=_:d=="checked"?f=_:c&&typeof _!="function"||g[d]===_||re(e,d,_,g[d],l);if(p)c||r&&(p.__html==r.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(r&&(e.innerHTML=""),Ve(t.type=="template"?e.content:e,he(h)?h:[h],t,n,i,v=="foreignObject"?"http://www.w3.org/1999/xhtml":l,a,o,a?a[0]:n.__k&&X(n,0),c,u),a!=null)for(d=a.length;d--;)ye(a[d]);c||(d="value",v=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[d]||v=="progress"&&!m||v=="option"&&m!=g[d])&&re(e,d,m,g[d],l),d="checked",f!=null&&f!=e[d]&&re(e,d,f,g[d],l))}return e}function be(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(l){R.__e(l,n)}}function Ge(e,t,n){var i,l;if(R.unmount&&R.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||be(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){R.__e(a,t)}i.base=i.__P=null}if(i=e.__k)for(l=0;l<i.length;l++)i[l]&&Ge(i[l],t,n||typeof e.type!="function");n||ye(e.__e),e.__c=e.__=e.__e=void 0}function ot(e,t,n){return this.constructor(e,n)}function ct(e,t,n){var i,l,a,o;t==document&&(t=document.documentElement),R.__&&R.__(e,t),l=(i=!1)?null:t.__k,a=[],o=[],Ne(t,e=t.__k=rt(ue,null,[e]),l||ee,ee,t.namespaceURI,l?null:t.firstChild?de.call(t.childNodes):null,a,l?l.__e:t.firstChild,i,o),Je(a,e,o)}de=Be.slice,R={__e:function(e,t,n,i){for(var l,a,o;t=t.__;)if((l=t.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(e)),o=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,i||{}),o=l.__d),o)return l.__E=l}catch(c){e=c}throw e}},He=0,le.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=K({},this.state),typeof e=="function"&&(e=e(K({},n),this.props)),e&&K(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Re(this))},le.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Re(this))},le.prototype.render=ue,G=[],Fe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Oe=function(e,t){return e.__v.__b-t.__v.__b},ce.__r=0,De=/(PointerCapture)$|Capture$/i,we=0,ve=Ee(!1),fe=Ee(!0);var dt=0;function s(e,t,n,i,l,a){t||(t={});var o,c,u=t;if("ref"in u)for(c in u={},t)c=="ref"?o=t[c]:u[c]=t[c];var d={type:e,props:u,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dt,__i:-1,__u:0,__source:l,__self:a};if(typeof e=="function"&&(o=e.defaultProps))for(c in o)u[c]===void 0&&(u[c]=o[c]);return R.vnode&&R.vnode(d),d}var te,T,pe,Te,ne=0,qe=[],P=R,We=P.__b,Pe=P.__r,Ae=P.diffed,Ie=P.__c,Le=P.unmount,Me=P.__;function Se(e,t){P.__h&&P.__h(T,e,ne||t),ne=0;var n=T.__H||(T.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function W(e){return ne=1,ht(Qe,e)}function ht(e,t,n){var i=Se(te++,2);if(i.t=e,!i.__c&&(i.__=[Qe(void 0,t),function(c){var u=i.__N?i.__N[0]:i.__[0],d=i.t(u,c);u!==d&&(i.__N=[d,i.__[1]],i.__c.setState({}))}],i.__c=T,!T.__f)){var l=function(c,u,d){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!a||a.call(this,c,u,d);var r=i.__c.props!==c;return p.forEach(function(h){if(h.__N){var _=h.__[0];h.__=h.__N,h.__N=void 0,_!==h.__[0]&&(r=!0)}}),a&&a.call(this,c,u,d)||r};T.__f=!0;var a=T.shouldComponentUpdate,o=T.componentWillUpdate;T.componentWillUpdate=function(c,u,d){if(this.__e){var p=a;a=void 0,l(c,u,d),a=p}o&&o.call(this,c,u,d)},T.shouldComponentUpdate=l}return i.__N||i.__}function se(e,t){var n=Se(te++,3);!P.__s&&Ye(n.__H,t)&&(n.__=e,n.u=t,T.__H.__h.push(n))}function ut(e){return ne=5,q(function(){return{current:e}},[])}function q(e,t){var n=Se(te++,7);return Ye(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function D(e,t){return ne=8,q(function(){return e},t)}function _t(){for(var e;e=qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(oe),e.__H.__h.forEach(ge),e.__H.__h=[]}catch(t){e.__H.__h=[],P.__e(t,e.__v)}}P.__b=function(e){T=null,We&&We(e)},P.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Me&&Me(e,t)},P.__r=function(e){Pe&&Pe(e),te=0;var t=(T=e.__c).__H;t&&(pe===T?(t.__h=[],T.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(oe),t.__h.forEach(ge),t.__h=[],te=0)),pe=T},P.diffed=function(e){Ae&&Ae(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(qe.push(t)!==1&&Te===P.requestAnimationFrame||((Te=P.requestAnimationFrame)||pt)(_t)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),pe=T=null},P.__c=function(e,t){t.some(function(n){try{n.__h.forEach(oe),n.__h=n.__h.filter(function(i){return!i.__||ge(i)})}catch(i){t.some(function(l){l.__h&&(l.__h=[])}),t=[],P.__e(i,n.__v)}}),Ie&&Ie(e,t)},P.unmount=function(e){Le&&Le(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{oe(i)}catch(l){t=l}}),n.__H=void 0,t&&P.__e(t,n.__v))};var Ue=typeof requestAnimationFrame=="function";function pt(e){var t,n=function(){clearTimeout(i),Ue&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);Ue&&(t=requestAnimationFrame(n))}function oe(e){var t=T,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),T=t}function ge(e){var t=T;e.__c=e.__(),T=t}function Ye(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Qe(e,t){return typeof t=="function"?t(e):t}function vt({title:e,viewMode:t,currentWeek:n,currentUnit:i,currentCourse:l,onSideNavToggle:a,onCalendarToggle:o}){const c=()=>{switch(t){case"course":return l==null?void 0:l.title;case"unit":return i==null?void 0:i.title;case"week":default:return n==null?void 0:n.title}},u=()=>{switch(t){case"course":return"Course View";case"unit":return"Unit View";case"week":default:return""}};return s("header",{className:"header",children:s("div",{className:"header-content",children:[s("button",{className:"nav-toggle",onClick:a,"aria-label":"Toggle navigation",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[s("path",{d:"M3 12h18m-9 5V7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3 6h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),s("div",{className:"title-section",children:[s("h1",{className:"app-title",children:e}),c()&&s("h2",{className:"subtitle",children:c()}),u()&&s("span",{className:"view-mode-label",children:u()})]}),s("button",{className:"calendar-toggle",onClick:o,"aria-label":"Toggle calendar view",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),s("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),s("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),s("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})})]})})}function Q({state:e,onClick:t,size:n="medium",disabled:i=!1}){const l=()=>{switch(e){case"selected":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12",stroke:"currentColor",strokeWidth:"2",fill:"none"})});case"partial":return s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"currentColor",strokeWidth:"2"})});case"none":default:return null}},a=()=>{switch(e){case"selected":return"Fully selected";case"partial":return"Partially selected";case"none":default:return"Not selected"}};return s("button",{className:`selection-bubble ${e} ${n} ${i?"disabled":""}`,onClick:i?void 0:t,disabled:i,"aria-label":a(),title:a(),children:l()})}function ft({isOpen:e,config:t,currentWeekId:n,currentUnitId:i,currentCourseId:l,selectionStates:a,onWeekSelect:o,onUnitSelect:c,onCourseSelect:u,onWeekToggle:d,onUnitToggle:p,onCourseToggle:r,onClose:h}){const[_,m]=W(new Set([l])),[f,g]=W(new Set([i]));if(!t||!t.courses||t.courses.length===0)return null;const w=N=>{try{const S=`session.vocabReviewed.${N}`,A=`session.phraseReviewed.${N}`,M=JSON.parse(localStorage.getItem(S)||"[]"),k=JSON.parse(localStorage.getItem(A)||"[]");return{vocabReviewed:M,phraseReviewed:k}}catch(S){return{vocabReviewed:[],phraseReviewed:[]}}},v=N=>{if(!N.vocab||!N.phrases)return!1;const S=w(N.id),A=N.vocab.map(H=>H.id),M=N.phrases.map(H=>H.id),k=A.every(H=>S.vocabReviewed.includes(H)),I=M.every(H=>S.phraseReviewed.includes(H));return k&&I&&A.length>0&&M.length>0},$=N=>!N.weeks||N.weeks.length===0?!1:N.weeks.every(S=>v(S)),C=N=>!N.units||N.units.length===0?!1:N.units.every(S=>$(S)),U=N=>{const S=new Set(_);S.has(N)?S.delete(N):S.add(N),m(S)},B=N=>{const S=new Set(f);S.has(N)?S.delete(N):S.add(N),g(S)};return s("nav",{className:`side-nav ${e?"open":""}`,children:[s("div",{className:"side-nav-header",children:[s("h3",{children:"Navigation"}),s("button",{className:"close-button",onClick:h,"aria-label":"Close navigation",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"nav-list",children:t.courses.map(N=>{var A,M;const S=_.has(N.id);return s("div",{className:"nav-section",children:[s("button",{className:`nav-item course-item ${S?"current":""} has-children`,onClick:()=>U(N.id),"aria-expanded":S,children:[s("div",{className:"nav-item-content",children:[s("h4",{className:"nav-item-title",children:N.title}),s("p",{className:"nav-item-meta",children:["Course • ",((A=N.units)==null?void 0:A.length)||0," units"]})]}),s("div",{className:"nav-item-actions",children:[s(Q,{state:((M=a.courses)==null?void 0:M[N.id])||"none",onClick:k=>{k.stopPropagation(),u(N.id),r(N.id)},size:"medium"}),C(N)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),S&&N.units&&s("div",{className:"nav-children",children:N.units.map(k=>{var H,y;const I=f.has(k.id);return s("div",{className:"nav-subsection",children:[s("button",{className:`nav-item unit-item ${I?"current":""} has-children`,onClick:()=>B(k.id),"aria-expanded":I,children:[s("div",{className:"nav-item-content",children:[s("h5",{className:"nav-item-title",children:k.title}),s("p",{className:"nav-item-meta",children:["Unit • ",((H=k.weeks)==null?void 0:H.length)||0," weeks"]})]}),s("div",{className:"nav-item-actions",children:[s(Q,{state:((y=a.units)==null?void 0:y[k.id])||"none",onClick:b=>{b.stopPropagation(),c(k.id),p(k.id)},size:"medium"}),$(k)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]}),I&&k.weeks&&s("div",{className:"nav-children",children:k.weeks.map(b=>{var O;return s("button",{className:`nav-item week-item ${n===b.id?"current":""}`,onClick:()=>d(b.id),children:[s("div",{className:"nav-item-content",children:[s("h6",{className:"nav-item-title",children:b.title}),s("p",{className:"nav-item-meta",children:b.dateRange})]}),s("div",{className:"nav-item-actions",children:[s(Q,{state:(O=a.weeks)!=null&&O[b.id]?"selected":"none",onClick:x=>{x.stopPropagation(),o(b.id),d(b.id)},size:"small"}),v(b)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},b.id)})})]},k.id)})})]},N.id)})})]})}function mt(e){const[t,n]=W(!1),[i,l]=W(null),a=ut(null),o=D(()=>{a.current&&(a.current.pause(),a.current=null),n(!1)},[]),c=D((r,h="es-ES")=>Y(this,null,function*(){return new Promise((_,m)=>{if(!window.speechSynthesis){m(new Error("Speech synthesis not supported"));return}window.speechSynthesis.cancel();const f=new SpeechSynthesisUtterance(r),w=window.speechSynthesis.getVoices().find(v=>v.lang.startsWith("es")||v.lang.includes(h)||v.name.toLowerCase().includes("spanish"));w&&(f.voice=w),f.lang=h,f.rate=.8,f.pitch=1.1,f.volume=1,f.onstart=()=>{n(!0),l(null)},f.onend=()=>{n(!1),_()},f.onerror=v=>{n(!1),m(new Error(`Speech synthesis error: ${v.error}`))},window.speechSynthesis.speak(f)})}),[]),u=D(r=>Y(this,null,function*(){return new Promise((h,_)=>{o();const m=new Audio(r);a.current=m,m.onloadstart=()=>{n(!0),l(null)},m.onended=()=>{n(!1),a.current=null,h()},m.onerror=()=>{n(!1),a.current=null,_(new Error("Failed to load audio file"))},m.play().catch(_)})}),[o]),d=D((r,h)=>Y(this,null,function*(){var _,m,f,g;try{if(l(null),o(),(_=window.speechSynthesis)==null||_.cancel(),h&&h.trim()&&(e!=null&&e.preferMp3||!((m=e==null?void 0:e.tts)!=null&&m.enabled)))try{yield u(h);return}catch(w){console.warn("Audio file failed, falling back to TTS:",w)}if(((f=e==null?void 0:e.tts)==null?void 0:f.enabled)!==!1)yield c(r,((g=e==null?void 0:e.tts)==null?void 0:g.voiceHint)||"es-ES");else throw new Error("No audio playback method available")}catch(w){throw console.error("Failed to play phrase:",w),l(w.message),n(!1),w}}),[e,u,c,o]),p=D(()=>{var r;o(),(r=window.speechSynthesis)==null||r.cancel(),n(!1),l(null)},[o]);return{playPhrase:d,isPlaying:t,error:i,cleanup:p}}function gt(e){const t=[e.spanish.toLowerCase()];if(e.conjugations&&Object.values(e.conjugations).forEach(n=>{typeof n=="object"&&Object.values(n).forEach(i=>{typeof i=="string"&&t.push(i.toLowerCase())})}),e.type==="noun"){const n=e.spanish.toLowerCase();n.endsWith("a")?t.push(n.slice(0,-1)+"as"):n.endsWith("o")?t.push(n.slice(0,-1)+"os"):n.endsWith("e")?t.push(n+"s"):n.endsWith("l")||n.endsWith("r")||n.endsWith("n")?t.push(n+"es"):t.push(n+"s")}if(e.type==="adjective"){const n=e.spanish.toLowerCase();if(n.endsWith("o")){const i=n.slice(0,-1);t.push(i+"a"),t.push(i+"os"),t.push(i+"as")}else if(n.endsWith("a")){const i=n.slice(0,-1);t.push(i+"o"),t.push(i+"as"),t.push(i+"os")}else n.endsWith("s")||(t.push(n+"s"),(n.endsWith("l")||n.endsWith("r")||n.endsWith("n"))&&t.push(n+"es"))}return[...new Set(t.filter(n=>n&&n.trim()))]}function wt(e,t){if(!t||t.length===0)return e;let n=e;const i=new Map;return t.forEach(a=>{gt(a).forEach(c=>{(!i.has(c)||c.length>i.get(c).spanish.length)&&i.set(c,a)})}),Array.from(i.keys()).sort((a,o)=>o.length-a.length).forEach(a=>{const o=i.get(a),c=a.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&"),u=new RegExp(`\\\\b${c}\\\\b`,"gi");n=n.replace(u,d=>`<mark class="vocab-highlight" data-vocab-id="${o.id}" title="${o.english}">${d}</mark>`)}),n}const J={SPANISH:"spanish",ENGLISH:"english",CONJUGATIONS:"conjugations"};function yt({type:e,item:t,isReviewed:n,onToggleReviewed:i,audioConfig:l,vocabList:a}){const[o,c]=W(J.SPANISH),{playPhrase:u,isPlaying:d}=mt(l),p=e==="vocab"&&t.conjugations&&Object.keys(t.conjugations).length>0,r=q(()=>e!=="phrase"?"":wt(t.spanish,a||[]),[e,t.spanish,a]),h=()=>{o===J.SPANISH?c(J.ENGLISH):o===J.ENGLISH&&p?c(J.CONJUGATIONS):c(J.SPANISH)},_=g=>Y(this,null,function*(){g.stopPropagation();try{yield u(t.spanish,t.audioUrl)}catch(w){console.warn(w)}}),m=g=>{g.stopPropagation(),i()},f=()=>e==="vocab"?o===J.ENGLISH?s("div",{className:"card-content english",children:[s("div",{className:"word",children:t.english}),s("div",{className:"word-type",children:t.type})]}):o===J.CONJUGATIONS&&p?s("div",{className:"card-content conjugations",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"conjugation-grid",children:Object.entries(t.conjugations).map(([g,w])=>s("div",{className:"tense-group",children:[s("div",{className:"tense-title",children:g}),s("div",{className:"conjugation-forms",children:Object.entries(w).map(([v,$])=>s("div",{className:"conjugation-item",children:[s("span",{className:"person",children:[v,":"]}),s("span",{className:"form",children:$})]},v))})]},g))})]}):s("div",{className:"card-content spanish",children:[s("div",{className:"word",children:t.spanish}),s("div",{className:"word-type",children:t.type})]}):o===J.ENGLISH?s("div",{className:"card-content english",children:s("div",{className:"phrase-text",children:t.english})}):s("div",{className:"card-content spanish",children:s("div",{className:"phrase-text",dangerouslySetInnerHTML:{__html:r}})});return s("div",{className:"study-card-wrapper",children:s("div",{className:`study-card ${e} ${o} ${n?"reviewed":""}`,onClick:h,role:"button",tabIndex:0,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),h())},"aria-label":`${e==="vocab"?"Vocabulary":"Phrase"} card ${t.spanish}`,children:[f(),s("div",{className:"right-buttons",children:[s("button",{className:`play-button ${d?"playing":""}`,disabled:d,onClick:_,"aria-label":"Play audio",children:d?s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:[s("rect",{x:"6",y:"4",width:"4",height:"16"}),s("rect",{x:"14",y:"4",width:"4",height:"16"})]}):s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("polygon",{points:"5,3 19,12 5,21"})})}),s("button",{className:`review-button ${n?"active":""}`,onClick:m,"aria-pressed":n,"aria-label":n?"Unmark reviewed":"Mark reviewed",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"20,6 9,17 4,12"})})})]})]})})}function ie({type:e,items:t=[],reviewedIds:n=[],onToggleReviewed:i,audioConfig:l,vocabList:a}){return t.length?s("div",{className:`study-collection ${e}`,children:t.map(o=>s(yt,{type:e,item:o,isReviewed:n.includes(o.id),onToggleReviewed:()=>i(o.id),audioConfig:l,vocabList:a},`${o.weekId}-${e}-${o.id}`))}):s("div",{className:"empty-state",children:s("p",{children:["No ",e==="vocab"?"vocabulary":"phrases"," items"]})})}function Nt({weeks:e,viewMode:t,currentWeek:n,currentUnit:i,currentCourse:l,session:a,onMarkReviewed:o,audioConfig:c,onClearSelection:u}){var g,w;const[d,p]=W("vocab"),[r,h]=W(!1);if(se(()=>{if(!localStorage.getItem("hint.tapCycleShown")){h(!0);const v=setTimeout(()=>{h(!1),localStorage.setItem("hint.tapCycleShown","1")},2500);return()=>clearTimeout(v)}},[]),!e||e.length===0)return null;const _=q(()=>{const v=[],$=[];return e.forEach(C=>{C.vocab&&C.vocab.forEach(U=>{v.push(z(V({},U),{weekId:C.id,weekTitle:C.title,unitId:C.unitId,unitTitle:C.unitTitle}))}),C.phrases&&C.phrases.forEach(U=>{$.push(z(V({},U),{weekId:C.id,weekTitle:C.title,unitId:C.unitId,unitTitle:C.unitTitle}))})}),{vocab:v,phrases:$}},[e]),m=e.length===1?e[0]:null,f={vocabReviewed:((g=a.vocabReviewed)==null?void 0:g.length)||0,phraseReviewed:((w=a.phraseReviewed)==null?void 0:w.length)||0,vocabTotal:_.vocab.length,phraseTotal:_.phrases.length};return s("div",{className:"week-view",children:[m?s("div",{className:"hero",children:[s("h1",{className:"hero-title",children:m.title}),s("div",{className:"hero-progress",children:[s("div",{className:"counts",children:[f.vocabReviewed,"/",f.vocabTotal," words · ",f.phraseReviewed,"/",f.phraseTotal," phrases"]}),s("div",{className:"linear-track","aria-label":"Overall progress",children:s("div",{className:"linear-fill",style:{width:`${(f.vocabReviewed+f.phraseReviewed)/Math.max(1,f.vocabTotal+f.phraseTotal)*100}%`}})})]}),s("div",{className:"hero-actions",children:s("button",{className:"primary hero-cta",children:["Study ",m.title]})})]}):s("div",{className:"selection-chips","aria-label":"Selected weeks",children:[s("span",{className:"chips-label",children:"Selected:"}),s("div",{className:"chips-group",children:e.map(v=>s("span",{className:"chip",children:v.title},v.id))}),s("button",{className:"clear-chips",onClick:u,children:"Clear"})]}),s("div",{className:"tab-rail",children:[s("button",{className:`pill-tab ${d==="vocab"?"active":""}`,onClick:()=>p("vocab"),children:["Vocabulary ",s("span",{className:"count",children:_.vocab.length})]}),s("button",{className:`pill-tab ${d==="phrases"?"active":""}`,onClick:()=>p("phrases"),children:["Phrases ",s("span",{className:"count",children:_.phrases.length})]})]}),r&&s("div",{className:"tap-hint",children:"tap to cycle"}),s("div",{className:"tab-panels",children:[s("div",{className:`panel ${d==="vocab"?"active":""}`,children:d==="vocab"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(v=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:v.title}),s(ie,{type:"vocab",items:_.vocab.filter($=>$.weekId===v.id),reviewedIds:a.vocabReviewed||[],onToggleReviewed:$=>o($,"vocab"),audioConfig:c,vocabList:_.vocab})]},v.id))}):s(ie,{type:"vocab",items:_.vocab,reviewedIds:a.vocabReviewed||[],onToggleReviewed:v=>o(v,"vocab"),audioConfig:c,vocabList:_.vocab}))}),s("div",{className:`panel ${d==="phrases"?"active":""}`,children:d==="phrases"&&(e.length>1?s("div",{className:"grouped-list",children:e.map(v=>s("div",{className:"group-block",children:[s("h3",{className:"group-header",children:v.title}),s(ie,{type:"phrase",items:_.phrases.filter($=>$.weekId===v.id),reviewedIds:a.phraseReviewed||[],onToggleReviewed:$=>o($,"phrase"),audioConfig:c,vocabList:_.vocab})]},v.id))}):s(ie,{type:"phrase",items:_.phrases,reviewedIds:a.phraseReviewed||[],onToggleReviewed:v=>o(v,"phrase"),audioConfig:c,vocabList:_.vocab}))})]})]})}function bt({isOpen:e,weeks:t,currentWeekId:n,onWeekSelect:i,onClose:l}){const[a,o]=W(new Date),c=q(()=>{if(!t||t.length===0)return{weeks:[],monthName:"",year:""};const d=a.toLocaleDateString("en-US",{month:"long"}),p=a.getFullYear();return{weeks:t.filter(h=>{const _=h.dateRange.match(/(\w+)\s+(\d+)/);if(!_)return!1;const[,m,f]=_,g=new Date(`${m} ${f}, ${p}`);return g.getMonth()===a.getMonth()&&g.getFullYear()===a.getFullYear()}),monthName:d,year:p.toString()}},[t,a]),u=d=>{o(p=>{const r=new Date(p);return r.setMonth(p.getMonth()+d),r})};return!t||t.length===0?null:s("div",{className:`calendar-nav ${e?"open":""}`,children:[s("div",{className:"calendar-header",children:[s("h3",{children:"Calendar"}),s("button",{className:"close-button",onClick:l,"aria-label":"Close calendar",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),s("div",{className:"calendar-content",children:[s("div",{className:"month-navigation",children:[s("button",{className:"nav-arrow",onClick:()=>u(-1),"aria-label":"Previous month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"15,18 9,12 15,6"})})}),s("h4",{className:"month-title",children:[c.monthName," ",c.year]}),s("button",{className:"nav-arrow",onClick:()=>u(1),"aria-label":"Next month",children:s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("polyline",{points:"9,6 15,12 9,18"})})})]}),s("div",{className:"calendar-weeks",children:c.weeks.length>0?c.weeks.map(d=>s("button",{className:`calendar-week-item ${n===d.id?"active":""}`,onClick:()=>i(d.id),children:[s("div",{className:"week-info",children:[s("h5",{className:"week-title",children:d.title}),s("p",{className:"week-dates",children:d.dateRange})]}),n===d.id&&s("div",{className:"active-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]},d.id)):s("div",{className:"no-weeks",children:s("p",{children:["No weeks available for ",c.monthName]})})})]})]})}function St({weeks:e=[],currentWeekId:t,session:n,onReset:i}){var h,_;if(!e||e.length===0||!n)return null;let l=0,a=0;e.forEach(m=>{var f,g;l+=((f=m.vocab)==null?void 0:f.length)||0,a+=((g=m.phrases)==null?void 0:g.length)||0});const o=((h=n.vocabReviewed)==null?void 0:h.length)||0,c=((_=n.phraseReviewed)==null?void 0:_.length)||0;if(!(l+a>0))return null;const d=l?o/l*100:0,p=a?c/a*100:0,r=o>0||c>0;return s("div",{className:"progress-bar-container mini",children:s("div",{className:"progress-content split",children:[s("div",{className:"counter-group","aria-label":"Vocabulary progress",children:[s("span",{className:"counter-label",children:["Words ",o,"/",l]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${d}%`}})})]}),s("div",{className:"counter-group","aria-label":"Phrases progress",children:[s("span",{className:"counter-label",children:["Phrases ",c,"/",a]}),s("div",{className:"mini-track",children:s("div",{className:"mini-fill",style:{width:`${p}%`}})})]}),r&&s("button",{className:"reset-button link",onClick:i,"aria-label":"Reset session progress",children:"Reset"})]})})}function kt({config:e,currentWeekId:t,currentUnitId:n,currentCourseId:i,selectionStates:l,onWeekSelect:a,onUnitSelect:o,onCourseSelect:c,onWeekToggle:u,onUnitToggle:d,onCourseToggle:p}){var A,M,k,I,H;const[r,h]=W(new Set(((A=e.courses)==null?void 0:A.map(y=>y.id))||[])),_=(e.courses||[]).flatMap(y=>(y.units||[]).map(b=>b.id)),[m,f]=W(new Set(_));if(!e||!e.courses||e.courses.length===0)return s("div",{className:"full-nav-view",children:s("div",{className:"empty-state",children:[s("h2",{children:"No Content Available"}),s("p",{children:"No courses or weeks are configured."})]})});const g=y=>{try{return{vocabReviewed:JSON.parse(localStorage.getItem(`session.vocabReviewed.${y}`)||"[]"),phraseReviewed:JSON.parse(localStorage.getItem(`session.phraseReviewed.${y}`)||"[]")}}catch(b){return{vocabReviewed:[],phraseReviewed:[]}}},w=y=>{if(!y.vocab||!y.phrases)return!1;const b=g(y.id),O=y.vocab.map(L=>L.id),x=y.phrases.map(L=>L.id);return O.every(L=>b.vocabReviewed.includes(L))&&x.every(L=>b.phraseReviewed.includes(L))&&O.length>0&&x.length>0},v=y=>{var b;return((b=y.weeks)==null?void 0:b.length)&&y.weeks.every(w)},$=y=>{var b;return((b=y.units)==null?void 0:b.length)&&y.units.every(v)},C=y=>{const b=new Set(r);b.has(y)?b.delete(y):b.add(y),h(b)},U=y=>{const b=new Set(m);b.has(y)?b.delete(y):b.add(y),f(b)};(M=e.weeks)==null||M.find(y=>y.id===e.app.current_week_id);const N=(()=>{var y,b;for(const O of e.courses)for(const x of O.units||[])for(const L of x.weeks||[]){const E=g(L.id),F=((y=L.vocab)==null?void 0:y.map(j=>j.id))||[],Z=((b=L.phrases)==null?void 0:b.map(j=>j.id))||[];if(!(F.length>0&&Z.length>0&&F.every(j=>E.vocabReviewed.includes(j))&&Z.every(j=>E.phraseReviewed.includes(j))))return L}return null})()||((k=e.weeks)==null?void 0:k[0]);let S={vocab:0,phrases:0};return N&&(S.vocab=((I=N.vocab)==null?void 0:I.length)||0,S.phrases=((H=N.phrases)==null?void 0:H.length)||0),s("div",{className:"full-nav-view",children:[N&&s("div",{className:"landing-hero",children:s("div",{className:"hero-left",children:[s("h1",{className:"hero-h1",children:N.title}),s("div",{className:"hero-progress-line","aria-label":"Week item counts",children:s("span",{children:[S.vocab," words · ",S.phrases," phrases"]})}),s("button",{className:"primary hero-start",onClick:()=>a(N.id),children:["Study ",N.title]})]})}),s("div",{className:"nav-content",children:e.courses.map(y=>{var b,O;return s("div",{className:"course-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item course-item has-children ${r.has(y.id)?"current":""}`,onClick:()=>C(y.id),"aria-expanded":r.has(y.id),children:[s("div",{className:"section-content",children:[s("h3",{className:"section-title",children:y.title}),s("p",{className:"section-meta",children:["Units ",((b=y.units)==null?void 0:b.length)||0]})]}),s("div",{className:"section-actions",children:[s(Q,{state:((O=l.courses)==null?void 0:O[y.id])||"none",onClick:x=>{x.stopPropagation(),c(y.id),p(y.id)},size:"medium"}),$(y)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),r.has(y.id)&&y.units&&s("div",{className:"section-children",children:y.units.map(x=>{var L,E;return s("div",{className:"unit-section",children:[s("div",{className:"section-header",children:s("button",{className:`section-item unit-item has-children ${m.has(x.id)?"current":""}`,onClick:()=>U(x.id),"aria-expanded":m.has(x.id),children:[s("div",{className:"section-content",children:[s("h4",{className:"section-title",children:x.title}),s("p",{className:"section-meta",children:["Weeks ",((L=x.weeks)==null?void 0:L.length)||0]})]}),s("div",{className:"section-actions",children:[s(Q,{state:((E=l.units)==null?void 0:E[x.id])||"none",onClick:F=>{F.stopPropagation(),o(x.id),d(x.id)},size:"medium"}),v(x)&&s("div",{className:"reviewed-indicator",children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]})}),m.has(x.id)&&x.weeks&&s("div",{className:"section-children",children:s("div",{className:"weeks-grid",children:x.weeks.map(F=>{var Z,_e;return s("button",{className:`week-card ${t===F.id?"current":""} ${(Z=l.weeks)!=null&&Z[F.id]?"selected":""}`,onClick:()=>u(F.id),children:[s("div",{className:"week-card-content",children:[s("h5",{className:"week-title",children:F.title}),s("p",{className:"week-dates",children:F.dateRange})]}),s("div",{className:"week-actions",children:[s(Q,{state:(_e=l.weeks)!=null&&_e[F.id]?"selected":"none",onClick:j=>{j.stopPropagation(),a(F.id),u(F.id)},size:"small"}),w(F)&&s("div",{className:"reviewed-indicator small",children:s("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s("path",{d:"M20 6L9 17l-5-5"})})})]})]},F.id)})})})]},x.id)})})]},y.id)})})]})}function Ct(){const[e,t]=W(null),[n,i]=W(!0),[l,a]=W(null);return se(()=>{Y(this,null,function*(){try{i(!0),a(null);const c=yield fetch("/config.json");if(!c.ok)throw new Error(`Failed to load config: ${c.status}`);const u=yield c.json();let d;if(u.courses)d={app:u.app,courses:u.courses,units:[],weeks:[]},u.courses.forEach(p=>{p.units.forEach(r=>{d.units.push(z(V({},r),{courseId:p.id,courseTitle:p.title})),r.weeks.forEach(h=>{d.weeks.push(z(V({},h),{unitId:r.id,unitTitle:r.title,courseId:p.id,courseTitle:p.title}))})})});else if(u.weeks)d={app:z(V({},u.app),{current_unit_id:"default-unit",current_course_id:"default-course"}),courses:[{id:"default-course",title:"Spanish Course",description:"Spanish language course",units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",weeks:u.weeks}]}],units:[{id:"default-unit",title:"Spanish Lessons",description:"Weekly Spanish lessons",courseId:"default-course",courseTitle:"Spanish Course",weeks:u.weeks}],weeks:u.weeks.map(p=>z(V({},p),{unitId:"default-unit",unitTitle:"Spanish Lessons",courseId:"default-course",courseTitle:"Spanish Course"}))};else throw new Error("Invalid config format: missing courses or weeks");if(!d.app||!Array.isArray(d.weeks))throw new Error("Invalid config format after processing");t(d)}catch(c){console.error("Failed to load config:",c),a(c.message)}finally{i(!1)}})},[]),{config:e,loading:n,error:l}}const $t=24*60*60*1e3;function Rt(e){const[t,n]=W({vocabReviewed:[],phraseReviewed:[],startedAt:null});se(()=>{if(!e)return;(()=>{try{const c=`session.vocabReviewed.${e}`,u=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`,p=JSON.parse(localStorage.getItem(c)||"[]"),r=JSON.parse(localStorage.getItem(u)||"[]"),h=localStorage.getItem(d);if(h&&Date.now()-parseInt(h)>$t){localStorage.removeItem(c),localStorage.removeItem(u),localStorage.removeItem(d),n({vocabReviewed:[],phraseReviewed:[],startedAt:null});return}n({vocabReviewed:p,phraseReviewed:r,startedAt:h?parseInt(h):null})}catch(c){console.error("Failed to load session:",c),n({vocabReviewed:[],phraseReviewed:[],startedAt:null})}})()},[e]);const i=D(o=>{if(e)try{const c=`session.vocabReviewed.${e}`,u=`session.phraseReviewed.${e}`,d=`session.startedAt.${e}`;localStorage.setItem(c,JSON.stringify(o.vocabReviewed)),localStorage.setItem(u,JSON.stringify(o.phraseReviewed)),o.startedAt&&localStorage.setItem(d,o.startedAt.toString())}catch(c){console.error("Failed to save session:",c)}},[e]),l=D((o,c)=>{e&&n(u=>{const d=Date.now(),p=u.startedAt||d;let r;if(c==="vocab"){const h=u.vocabReviewed.includes(o)?u.vocabReviewed.filter(_=>_!==o):[...u.vocabReviewed,o];r=z(V({},u),{vocabReviewed:h,startedAt:p})}else if(c==="phrase"){const h=u.phraseReviewed.includes(o)?u.phraseReviewed.filter(_=>_!==o):[...u.phraseReviewed,o];r=z(V({},u),{phraseReviewed:h,startedAt:p})}else return u;return i(r),r})},[e,i]),a=D(()=>{if(!e)return;n({vocabReviewed:[],phraseReviewed:[],startedAt:null});try{localStorage.removeItem(`session.vocabReviewed.${e}`),localStorage.removeItem(`session.phraseReviewed.${e}`),localStorage.removeItem(`session.startedAt.${e}`)}catch(c){console.error("Failed to clear session:",c)}},[e]);return{session:t,markReviewed:l,resetSession:a}}function xt(e,t){const[n,i]=W(new Set(t?[t]:[])),l=q(()=>{var h,_;if(!e||!e.courses)return{};const r={weeks:{},units:{},courses:{}};return n.forEach(m=>{r.weeks[m]="selected"}),(h=e.units)==null||h.forEach(m=>{const f=m.weeks||[],g=f.filter(w=>n.has(w.id)).length;g===0?r.units[m.id]="none":g===f.length?r.units[m.id]="selected":r.units[m.id]="partial"}),(_=e.courses)==null||_.forEach(m=>{var w;const f=[];(w=m.units)==null||w.forEach(v=>{var $;($=v.weeks)==null||$.forEach(C=>f.push(C))});const g=f.filter(v=>n.has(v.id)).length;g===0?r.courses[m.id]="none":g===f.length?r.courses[m.id]="selected":r.courses[m.id]="partial"}),r},[e,n]),a=D(r=>{i(h=>{const _=new Set(h);return _.has(r)?_.delete(r):_.add(r),_})},[]),o=D(r=>{if(!(e!=null&&e.units))return;const h=e.units.find(f=>f.id===r);if(!(h!=null&&h.weeks))return;const _=h.weeks.map(f=>f.id),m=l.units[r];i(f=>{const g=new Set(f);return m==="selected"?_.forEach(w=>g.delete(w)):_.forEach(w=>g.add(w)),g})},[e,l]),c=D(r=>{if(!(e!=null&&e.courses))return;const h=e.courses.find(f=>f.id===r);if(!(h!=null&&h.units))return;const _=[];h.units.forEach(f=>{var g;(g=f.weeks)==null||g.forEach(w=>_.push(w.id))});const m=l.courses[r];i(f=>{const g=new Set(f);return m==="selected"?_.forEach(w=>g.delete(w)):_.forEach(w=>g.add(w)),g})},[e,l]),u=q(()=>e!=null&&e.weeks?e.weeks.filter(r=>n.has(r.id)):[],[e,n]),d=D(()=>{i(new Set)},[]),p=D(r=>{i(new Set([r]))},[]);return{selectedWeekIds:n,selectionStates:l,selectedWeeks:u,toggleWeekSelection:a,toggleUnitSelection:o,toggleCourseSelection:c,clearSelection:d,selectSingleWeek:p,hasSelection:n.size>0,selectionCount:n.size}}function Et(){var O,x,L;const[e,t]=W(!1),[n,i]=W(!1),[l,a]=W(null),[o,c]=W("week"),[u,d]=W(null),[p,r]=W(null),{config:h,loading:_,error:m}=Ct(),{session:f,markReviewed:g,resetSession:w}=Rt(l),{selectedWeekIds:v,selectionStates:$,selectedWeeks:C,toggleWeekSelection:U,toggleUnitSelection:B,toggleCourseSelection:N,selectSingleWeek:S}=xt(h,l);se(()=>{h&&!l&&(d(h.app.current_unit_id),r(h.app.current_course_id))},[h,l]),se(()=>{if(!l&&v&&v.size>0){const E=v.values().next().value;E&&a(E)}},[l,v]);const A=(O=h==null?void 0:h.weeks)==null?void 0:O.find(E=>E.id===l),M=(x=h==null?void 0:h.units)==null?void 0:x.find(E=>E.id===u),k=(L=h==null?void 0:h.courses)==null?void 0:L.find(E=>E.id===p),I=E=>{a(E),c("week"),S(E),t(!1),i(!1)},H=E=>{d(E),c("unit"),t(!1),i(!1)},y=E=>{r(E),c("course"),t(!1),i(!1)},b=()=>{v&&v.size&&Array.from(v).forEach(E=>U(E))};return _?s("div",{className:"app loading",children:s("div",{className:"loading-spinner",children:[s("div",{className:"spinner"}),s("p",{children:"Loading Spanish Weekly..."})]})}):m||!h?s("div",{className:"app error",children:s("div",{className:"error-message",children:[s("h2",{children:"Oops! Can't load this week."}),s("p",{children:"Pull to refresh or try again later."}),s("button",{onClick:()=>window.location.reload(),children:"Refresh"})]})}):s("div",{className:"app",children:[s(vt,{title:h.app.title,viewMode:o,currentWeek:A,currentUnit:M,currentCourse:k,onSideNavToggle:()=>t(!e),onCalendarToggle:()=>i(!n)}),s(ft,{isOpen:e,config:h,currentWeekId:l,currentUnitId:u,currentCourseId:p,selectionStates:$,onWeekSelect:I,onUnitSelect:H,onCourseSelect:y,onWeekToggle:U,onUnitToggle:B,onCourseToggle:N,onClose:()=>t(!1)}),s(bt,{isOpen:n,weeks:h.weeks,currentWeekId:l,onWeekSelect:I,onClose:()=>i(!1)}),s("main",{className:"main-content",children:C.length>0?s(Nt,{weeks:C,viewMode:o,currentWeek:A,currentUnit:M,currentCourse:k,session:f,onMarkReviewed:g,audioConfig:h.app.audio,onClearSelection:b}):s(kt,{config:h,currentWeekId:l,currentUnitId:u,currentCourseId:p,selectionStates:$,onWeekSelect:I,onUnitSelect:H,onCourseSelect:y,onWeekToggle:U,onUnitToggle:B,onCourseToggle:N})}),s(St,{weeks:C,currentWeekId:l,session:f,onReset:w}),(e||n)&&s("div",{className:"overlay",onClick:()=>{t(!1),i(!1)}})]})}ct(s(Et,{}),document.getElementById("app"));
